<!doctype html>
<html lang="en">
    <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Multiple ways to solve the FizzBuzz code kata in Clojure">

    <title>
        
            FizzBuzz in Clojure &middot; Edd Mann
        
    </title>

    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,700italic,400italic">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/styles.css">

    <link rel="shortcut icon" href="/favicon.ico">

    <link rel="alternate" href="/rss.xml" title="" type="application/rss+xml">

    

    <script>
        var _gaq=[['_setAccount','UA-32512081-1'],['_setDomainName','eddmann.com'],['_trackPageview']];
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = 'https://ssl.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>
</head>

    <body>
        <div class="container content">
            <header class="masthead">
                <h3 class="masthead-title">
                    <a href="/" title="Home">Edd Mann</a>
                    <small><i class="fa fa-code"></i> Developer</small>
                </h3>
                <nav>
                    <a href="https://twitter.com/edd_mann"><i class="fa fa-twitter"></i></a>
                    <a href="https://github.com/eddmann"><i class="fa fa-github"></i></a>
                    <a href="mailto:the@eddmann.com"><i class="fa fa-envelope"></i></a>
                </nav>
                <div class="cf"></div>
            </header>

            <main>
                <article class="post">
    <h1 class="post-title">FizzBuzz in Clojure</h1>
    <time datetime="2015-12-31T00:00:00+00:00" class="post-date">31 Dec 2015</time>
    <p>This past Christmas break I had the chance to finally pick up <a href="https://www.manning.com/books/the-joy-of-clojure">The Joy of Clojure</a> book and delve into the world of Lisp.
Along with the common-place Merge-sort algorithm I find it beneficial to explore a new language and its capabilities by solving the <a href="http://rosettacode.org/wiki/FizzBuzz">FizzBizz</a> code kata.
In this post I will be explaining a couple of the implementations that I created.
</p>

<p>Each of the four solutions below share the following predicate functions.</p>

<div class="language-clojure highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="k">def</span><span class="w"> </span><span class="n">fizz?</span><span class="w"> </span><span class="o">#</span><span class="p">(</span><span class="nb">zero?</span><span class="w"> </span><span class="p">(</span><span class="nf">mod</span><span class="w"> </span><span class="n">%</span><span class="w"> </span><span class="mi">3</span><span class="p">)))</span><span class="w">
</span><span class="p">(</span><span class="k">def</span><span class="w"> </span><span class="n">buzz?</span><span class="w"> </span><span class="o">#</span><span class="p">(</span><span class="nb">zero?</span><span class="w"> </span><span class="p">(</span><span class="nf">mod</span><span class="w"> </span><span class="n">%</span><span class="w"> </span><span class="mi">5</span><span class="p">)))</span><span class="w">
</span><span class="p">(</span><span class="k">def</span><span class="w"> </span><span class="n">fizzbuzz?</span><span class="w"> </span><span class="o">#</span><span class="p">(</span><span class="nb">and</span><span class="w"> </span><span class="p">(</span><span class="nf">fizz?</span><span class="w"> </span><span class="n">%</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nf">buzz?</span><span class="w"> </span><span class="n">%</span><span class="p">)))</span><span class="w">
</span></code></pre></div></div>

<p>And can return the desired results by mapping it over a supplied range.</p>

<div class="language-clojure highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nb">map</span><span class="w"> </span><span class="n">fizzbuzz</span><span class="w"> </span><span class="p">(</span><span class="nb">range</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">101</span><span class="p">))</span><span class="w">
</span></code></pre></div></div>

<h2 id="solution-1">Solution 1</h2>

<p>This solution is the most trivial taking advantage of ‘cond’ over multiple ‘if’ statements.
So as to remove some boilerplate the anonymous function short-hand has been used.</p>

<div class="language-clojure highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="k">def</span><span class="w"> </span><span class="n">fizzbuzz</span><span class="w">
  </span><span class="o">#</span><span class="p">(</span><span class="k">cond</span><span class="w">
    </span><span class="p">(</span><span class="nf">fizzbuzz?</span><span class="w"> </span><span class="n">%</span><span class="p">)</span><span class="w"> </span><span class="s">"FizzBuzz"</span><span class="w">
    </span><span class="p">(</span><span class="nf">fizz?</span><span class="w"> </span><span class="n">%</span><span class="p">)</span><span class="w"> </span><span class="s">"Fizz"</span><span class="w">
    </span><span class="p">(</span><span class="nf">buzz?</span><span class="w"> </span><span class="n">%</span><span class="p">)</span><span class="w"> </span><span class="s">"Buzz"</span><span class="w">
    </span><span class="no">:else</span><span class="w"> </span><span class="n">%</span><span class="p">))</span><span class="w">
</span></code></pre></div></div>

<p>## Solution 2</p>

<p>The solution below uses the ‘let’ statement in combination with ‘str’ to produce an output string.
If the output string is empty however, the provided number is returned instead.</p>

<div class="language-clojure highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">fizzbuzz</span><span class="w"> </span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="w">
  </span><span class="p">(</span><span class="k">let</span><span class="w"> </span><span class="p">[</span><span class="n">s</span><span class="w"> </span><span class="p">(</span><span class="nb">str</span><span class="w"> </span><span class="p">(</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nf">fizz?</span><span class="w"> </span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="s">"Fizz"</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nf">buzz?</span><span class="w"> </span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="s">"Buzz"</span><span class="p">))]</span><span class="w">
    </span><span class="p">(</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nf">empty?</span><span class="w"> </span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="n">s</span><span class="p">)))</span><span class="w">
</span></code></pre></div></div>

<h2 id="solution-3">Solution 3</h2>

<p>Conceptionaly similar to the ‘cond’ implementation - ‘some-fn’ allows us to create a function which includes a list of predicates along with their desired return values.
In the case of a match not being found the supplied number is returned instead.</p>

<div class="language-clojure highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">fizzbuzz</span><span class="w"> </span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="w">
  </span><span class="p">(</span><span class="k">let</span><span class="w"> </span><span class="p">[</span><span class="n">to-words</span><span class="w"> </span><span class="p">(</span><span class="nf">some-fn</span><span class="w"> </span><span class="o">#</span><span class="p">(</span><span class="nb">when</span><span class="w"> </span><span class="p">(</span><span class="nf">fizzbuzz?</span><span class="w"> </span><span class="n">%</span><span class="p">)</span><span class="w"> </span><span class="s">"FizzBuzz"</span><span class="p">)</span><span class="w">
                          </span><span class="o">#</span><span class="p">(</span><span class="nb">when</span><span class="w"> </span><span class="p">(</span><span class="nf">fizz?</span><span class="w"> </span><span class="n">%</span><span class="p">)</span><span class="w"> </span><span class="s">"Fizz"</span><span class="p">)</span><span class="w">
                          </span><span class="o">#</span><span class="p">(</span><span class="nb">when</span><span class="w"> </span><span class="p">(</span><span class="nf">buzz?</span><span class="w"> </span><span class="n">%</span><span class="p">)</span><span class="w"> </span><span class="s">"Buzz"</span><span class="p">))]</span><span class="w">
    </span><span class="p">(</span><span class="nb">or</span><span class="w"> </span><span class="p">(</span><span class="nf">to-words</span><span class="w"> </span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="n">n</span><span class="p">)))</span><span class="w">
</span></code></pre></div></div>

<h2 id="solution-4">Solution 4</h2>

<p>The final solution uses a couple of great Clojure features, including multi-arity overloading to supply a default lookup map, as well as an array map which maintains insertion order.
Each entry in the map is deconstructed into its predicate and return word (key, value) and then used to test against the supplied number.
If the predicate passes, the entry is kept and finally joined together to return the output using ‘apply’ and  ‘str’ functions.</p>

<div class="language-clojure highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">fizzbuzz</span><span class="w">
  </span><span class="p">([</span><span class="n">n</span><span class="p">]</span><span class="w"> </span><span class="p">(</span><span class="nf">fizzbuzz</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="p">(</span><span class="nb">array-map</span><span class="w"> </span><span class="n">fizz?</span><span class="w"> </span><span class="s">"Fizz"</span><span class="w"> </span><span class="n">buzz?</span><span class="w"> </span><span class="s">"Buzz"</span><span class="p">)))</span><span class="w">
  </span><span class="p">([</span><span class="n">n</span><span class="w"> </span><span class="n">lookup</span><span class="p">]</span><span class="w">
    </span><span class="p">(</span><span class="nb">if-let</span><span class="w"> </span><span class="p">[</span><span class="n">matches</span><span class="w"> </span><span class="p">(</span><span class="nb">seq</span><span class="w"> </span><span class="p">(</span><span class="nf">keep</span><span class="w"> </span><span class="p">(</span><span class="k">fn</span><span class="w"> </span><span class="p">[[</span><span class="n">pred?</span><span class="w"> </span><span class="n">word</span><span class="p">]]</span><span class="w"> </span><span class="p">(</span><span class="nb">when</span><span class="w"> </span><span class="p">(</span><span class="nf">pred?</span><span class="w"> </span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="n">word</span><span class="p">))</span><span class="w"> </span><span class="n">lookup</span><span class="p">))]</span><span class="w">
      </span><span class="p">(</span><span class="nb">apply</span><span class="w"> </span><span class="nb">str</span><span class="w"> </span><span class="n">matches</span><span class="p">)</span><span class="w">
      </span><span class="n">n</span><span class="p">)))</span><span class="w">
</span></code></pre></div></div>

</article>

            </main>

            <footer class="footer">
                <img src="https://www.gravatar.com/avatar/c5c2978bb14d16460f73399c394b6acd?s=160">
                <ul>
                    <li>Developer at <a href="http://www.mybuilder.com/">MyBuilder</a></li>
                    <li><a href="http://threedevsandamaybe.com/">Three Devs and a Maybe</a> podcast co-host</li>
                    <li>All ramblings can be found in the <a href="/archive/">Archive</a></li>
                </ul>
                <div class="cf"></div>
            </footer>
        </div>
    </body>
</html>
