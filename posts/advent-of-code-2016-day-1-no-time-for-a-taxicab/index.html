<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Advent of Code 2016 - Day 1 - No Time for a Taxicab - Edd Mann</title>
<meta name=description content="Solving the Advent of Code 2016 Day 1 puzzle using Python."><meta name=author content="Edd Mann"><script async src="https://www.googletagmanager.com/gtag/js?id=G-ZPQ7WHNXH4"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-ZPQ7WHNXH4")}</script><meta itemprop=name content="Advent of Code 2016 - Day 1 - No Time for a Taxicab"><meta itemprop=description content="Having enjoyed documenting my progress in completing the Advent of Code 2015 advent calendar in TypeScript, I have decided to do the same for 2016. However, for this year, I wish to instead explore Python."><meta itemprop=datePublished content="2021-03-23T00:00:00+00:00"><meta itemprop=dateModified content="2021-03-23T00:00:00+00:00"><meta itemprop=wordCount content="591"><meta itemprop=keywords content="Advent-of-Code,Advent-of-Code-2016,Python"><meta property="og:url" content="https://eddmann.com/posts/advent-of-code-2016-day-1-no-time-for-a-taxicab/"><meta property="og:site_name" content="Edd Mann"><meta property="og:title" content="Advent of Code 2016 - Day 1 - No Time for a Taxicab"><meta property="og:description" content="Having enjoyed documenting my progress in completing the Advent of Code 2015 advent calendar in TypeScript, I have decided to do the same for 2016. However, for this year, I wish to instead explore Python."><meta property="og:locale" content="en_GB"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-03-23T00:00:00+00:00"><meta property="article:modified_time" content="2021-03-23T00:00:00+00:00"><meta property="article:tag" content="Advent-of-Code"><meta property="article:tag" content="Advent-of-Code-2016"><meta property="article:tag" content="Python"><meta name=twitter:card content="summary"><meta name=twitter:title content="Advent of Code 2016 - Day 1 - No Time for a Taxicab"><meta name=twitter:description content="Having enjoyed documenting my progress in completing the Advent of Code 2015 advent calendar in TypeScript, I have decided to do the same for 2016. However, for this year, I wish to instead explore Python."><meta name=twitter:site content="@edd_mann"><link rel=stylesheet href=/css/style.min.a18bbea58d05187498ffb7d6a33b580609df2e92b988055a4b51e41596cc934e.css integrity="sha256-oYu+pY0FGHSY/7fWoztYBgnfLpK5iAVaS1HkFZbMk04="><link rel=preload as=image href=/assets/x.svg crossorigin=anonymous><link rel=preload as=image href=/assets/github.svg crossorigin=anonymous><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://eddmann.com/posts/advent-of-code-2016-day-1-no-time-for-a-taxicab/><script>document.documentElement.setAttribute("data-theme",localStorage.getItem("theme")||window.matchMedia("(prefers-color-scheme: dark)").matches&&"dark"||"light")</script><script src=/script.min.da71ac9c7b8bd4e644618df0ab735aed1393aad3cb5e5c57e5adc300fe7c8209.js integrity="sha256-2nGsnHuL1OZEYY3wq3Na7ROTqtPLXlxX5a3DAP58ggk=" defer></script></head><body><header class="site-header l-wrapper"><a href=https://eddmann.com/><h3 class=site-header__title>Edd Mann
<span style=--url:url(/assets/code.svg)>Developer</span></h3></a><button class=site-header__mobile-navigation-button type=button title="Toggle mobile site navigation" aria-label="Toggle mobile site navigation" aria-expanded=false aria-controls=site-navigation></button><div class=site-header__navigation id=site-navigation><nav aria-label="Primary navigation"><ul class=site-header__primary-navigation><li><a href=/archive>Archive</a></li><li><a href=/projects>Projects</a></li><li><a href=/about>About</a></li></ul></nav><nav aria-label="Social links"><ul class=site-header__social-navigation><li><a class=social-icon style=--url:url(/assets/x.svg) href=https://x.com/edd_mann rel="external noopener" target=_blank>Twitter (X)</a></li><li><a class=social-icon style=--url:url(/assets/github.svg) href=https://github.com/eddmann rel="external noopener" target=_blank>GitHub</a></li></ul></nav></div></header><main class=l-wrapper><article><header class=l-page-title><h1 class=u-transition-between-pages style=--id:advent-of-code-2016-day-1-no-time-for-a-taxicab>Advent of Code 2016 - Day 1 - No Time for a Taxicab</h1><time datetime=2021-03-23T00:00:00Z class=published-at>Mar 23, 2021</time></header><main class=u-prose><p>Having enjoyed documenting my progress in completing the Advent of Code 2015 advent calendar in TypeScript, I have decided to do the same for 2016.
However, for this year, I wish to instead explore Python.</p><p>I have decided on Python as I&rsquo;ve been very impressed with how concise and expressive some of the solutions for the 2015 calendar I have seen on the AoC subreddit have been.</p><h2 id=part-1>Part 1</h2><p>The initial problem for the 2016 calendar requires us to navigate our way from our &lsquo;airdropped&rsquo; location to Easter Bunny HQ.
In doing so, we are required to work out how many blocks away the location is (using <a href=https://en.wikipedia.org/wiki/Taxicab_geometry rel="external noopener" target=_blank>Manhattan distance</a>).</p><p>We begin by parsing the provided directions into tuples of the form <code>(direction, steps)</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>parse_instructions</span>(input):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> [[i[<span style=color:#ae81ff>0</span>], int(i[<span style=color:#ae81ff>1</span>:])] <span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> input<span style=color:#f92672>.</span>split(<span style=color:#e6db74>&#39;, &#39;</span>)]
</span></span></code></pre></div><p>With the instructions now parsed, we can (from our starting position of <code>0,0</code>) navigate our way to the final destination.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>COMPASS <span style=color:#f92672>=</span> [(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>), (<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>), (<span style=color:#ae81ff>0</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>), (<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>)]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>part1</span>(input):
</span></span><span style=display:flex><span>    dir <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    pos <span style=color:#f92672>=</span> (<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> turn, steps <span style=color:#f92672>in</span> parse_instructions(input):
</span></span><span style=display:flex><span>        dir <span style=color:#f92672>=</span> (dir <span style=color:#f92672>+</span> (<span style=color:#ae81ff>1</span> <span style=color:#66d9ef>if</span> turn <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;R&#39;</span> <span style=color:#66d9ef>else</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>)) <span style=color:#f92672>%</span> len(COMPASS)
</span></span><span style=display:flex><span>        pos <span style=color:#f92672>=</span> tuple(map(<span style=color:#66d9ef>lambda</span> p, d: p <span style=color:#f92672>+</span> d <span style=color:#f92672>*</span> steps, pos, COMPASS[dir]))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> sum(map(abs, pos))
</span></span></code></pre></div><p>We are able to calculate the revised directional coordinates that need to be applied to the current position upon each instruction using the provided <code>COMPASS</code> lookup table.
Once we have applied all the moves, we return the <em>Manhattan distance</em> of the final position to get the desired answer ðŸŒŸ.</p><h2 id=part-2>Part 2</h2><p>For part two, we are required to instead work out the first position that we visit twice.
This can be achieved by storing the <em>seen</em> positions within a set and short-circuiting the instruction application upon seeing a position again ðŸŒŸ.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>part2</span>(input):
</span></span><span style=display:flex><span>    dir <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    pos <span style=color:#f92672>=</span> (<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>    seen <span style=color:#f92672>=</span> {pos}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> turn, steps <span style=color:#f92672>in</span> parse_instructions(input):
</span></span><span style=display:flex><span>        dir <span style=color:#f92672>=</span> (dir <span style=color:#f92672>+</span> (<span style=color:#ae81ff>1</span> <span style=color:#66d9ef>if</span> turn <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;R&#39;</span> <span style=color:#66d9ef>else</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>)) <span style=color:#f92672>%</span> len(COMPASS)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> _ <span style=color:#f92672>in</span> range(steps):
</span></span><span style=display:flex><span>            pos <span style=color:#f92672>=</span> tuple(map(operator<span style=color:#f92672>.</span>add, pos, COMPASS[dir]))
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> pos <span style=color:#f92672>in</span> seen:
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>return</span> sum(map(abs, pos))
</span></span><span style=display:flex><span>            seen<span style=color:#f92672>.</span>add(pos)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>raise</span> <span style=color:#a6e22e>Exception</span>(<span style=color:#e6db74>&#39;No repeated position&#39;</span>)
</span></span></code></pre></div><h2 id=alternative-solutions>Alternative Solutions</h2><p>Like the 2015 calendar, I found that for the first couple of day&rsquo;s solutions, I had the time to devise several different ways to solve the problem.</p><p>Having a chance to explore the Python standard library, I was able to take advantage of <a href=https://docs.python.org/3/library/collections.html#collections.deque rel="external noopener" target=_blank><em>Deque</em></a>, which is a double-ended queue implementation.
This allows me to efficiently <a href=https://docs.python.org/3/library/collections.html#collections.deque.rotate rel="external noopener" target=_blank><em>rotate</em></a> the queued items in a very succinct manner.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>part1</span>(input):
</span></span><span style=display:flex><span>    dir <span style=color:#f92672>=</span> collections<span style=color:#f92672>.</span>deque([(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>), (<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>), (<span style=color:#ae81ff>0</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>), (<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>)])
</span></span><span style=display:flex><span>    pos <span style=color:#f92672>=</span> (<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> turn, steps <span style=color:#f92672>in</span> parse_instructions(input):
</span></span><span style=display:flex><span>        dir<span style=color:#f92672>.</span>rotate(<span style=color:#ae81ff>1</span> <span style=color:#66d9ef>if</span> turn <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;R&#39;</span> <span style=color:#66d9ef>else</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>        pos <span style=color:#f92672>=</span> tuple(map(<span style=color:#66d9ef>lambda</span> p, d: p <span style=color:#f92672>+</span> d <span style=color:#f92672>*</span> steps, pos, dir[<span style=color:#ae81ff>0</span>]))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> sum(map(abs, pos))
</span></span></code></pre></div><p>Having explored storing the positional state (x and y coordinates) in tuples several times, I was very excited to see that instead, we could take advantage of <a href=https://docs.python.org/3/library/cmath.html rel="external noopener" target=_blank>Complex numbers</a> and model them in this form.
Using this method, we were able to move away from the directional lookup table concept and instead just apply left and right rotations using multiplication directly.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>TURNS <span style=color:#f92672>=</span> {<span style=color:#e6db74>&#39;R&#39;</span>: <span style=color:#ae81ff>0</span><span style=color:#f92672>+</span><span style=color:#ae81ff>1</span>j, <span style=color:#e6db74>&#39;L&#39;</span>: <span style=color:#ae81ff>0</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>j}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>manhattan_distance</span>(pos):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> abs(int(pos<span style=color:#f92672>.</span>real)) <span style=color:#f92672>+</span> abs(int(pos<span style=color:#f92672>.</span>imag))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>part1</span>(input):
</span></span><span style=display:flex><span>    dir <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span><span style=color:#f92672>+</span><span style=color:#ae81ff>0</span>j
</span></span><span style=display:flex><span>    pos <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>+</span><span style=color:#ae81ff>0</span>j
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> turn, steps <span style=color:#f92672>in</span> parse_instructions(input):
</span></span><span style=display:flex><span>        dir <span style=color:#f92672>*=</span> TURNS[turn]
</span></span><span style=display:flex><span>        pos <span style=color:#f92672>+=</span> dir <span style=color:#f92672>*</span> steps
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> manhattan_distance(pos)
</span></span></code></pre></div><p>This is by far my favourite way to solve this problem, as it highlights some of the powerful features that Python has to offer.
I look forward to continuing my journey in solving the 2016 calendar in future posts.</p></main><footer class=post-footer><ul class="tags tags--large"><li><a href=/archive/tag/advent-of-code>advent-of-code</a></li><li><a href=/archive/tag/advent-of-code-2016>advent-of-code-2016</a></li><li><a href=/archive/tag/python>python</a></li></ul><div class=related><h3 class=related__title>Related Posts</h3><ul class=related__posts><li><a href=/posts/advent-of-code-2015-day-25-let-it-snow/>Advent of Code 2015 - Day 25 - Let It Snow</a></li><li><a href=/posts/advent-of-code-2015-day-24-it-hangs-in-the-balance/>Advent of Code 2015 - Day 24 - It Hangs in the Balance</a></li><li><a href=/posts/advent-of-code-2015-day-23-opening-the-turing-lock/>Advent of Code 2015 - Day 23 - Opening the Turing Lock</a></li><li><a href=/posts/advent-of-code-2015-day-22-wizard-simulator-20xx/>Advent of Code 2015 - Day 22 - Wizard Simulator 20XX</a></li><li><a href=/posts/advent-of-code-2015-day-21-rpg-simulator-20xx/>Advent of Code 2015 - Day 21 - RPG Simulator 20XX</a></li></ul></div></footer></article><div class=scroll-watcher></div></main><footer class="site-footer l-wrapper"><div>&copy; 2025, Edd Mann</div><button class=site-footer__theme-toggle type=button title="Toggle theme" aria-label="Toggle theme"><svg fill="currentcolor" viewBox="0 0 32 32" role="img"><title>Theme toggle icon</title><desc>A circle representing the moon for toggling theme</desc><path d="M16 .5C7.4.5.5 7.4.5 16S7.4 31.5 16 31.5 31.5 24.6 31.5 16 24.6.5 16 .5zm0 28.1V3.4C23 3.4 28.6 9 28.6 16S23 28.6 16 28.6z"/></svg></button></footer></body></html>