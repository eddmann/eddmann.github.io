<!doctype html>
<html lang="en">
    <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Examples of supplying array_map with multiple arrays to be used within the callback">

    <title>
        
            Using Multiple Arrays with array_map in PHP &middot; Edd Mann
        
    </title>

    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,700italic,400italic">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/styles.css">

    <link rel="shortcut icon" href="/favicon.ico">

    <link rel="alternate" href="/rss.xml" title="" type="application/rss+xml">

    

    <script>
        var _gaq=[['_setAccount','UA-32512081-1'],['_setDomainName','eddmann.com'],['_trackPageview']];
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = 'https://ssl.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>
</head>

    <body>
        <div class="container content">
            <header class="masthead">
                <h3 class="masthead-title">
                    <a href="/" title="Home">Edd Mann</a>
                    <small><i class="fa fa-code"></i> Developer</small>
                </h3>
                <nav>
                    <a href="https://twitter.com/edd_mann"><i class="fa fa-twitter"></i></a>
                    <a href="https://github.com/eddmann"><i class="fa fa-github"></i></a>
                    <a href="mailto:the@eddmann.com"><i class="fa fa-envelope"></i></a>
                </nav>
                <div class="cf"></div>
            </header>

            <main>
                <article class="post">
    <h1 class="post-title">Using Multiple Arrays with array_map in PHP</h1>
    <time datetime="2016-01-28T00:00:00+00:00" class="post-date">28 Jan 2016</time>
    <p>Today I stumble upon some code that I did not realise was possible with an <code class="language-plaintext highlighter-rouge">array_map</code> function in PHP.
You are able to supply multiple arrays, which in turn will get ‘zipped up’ and passed to the supplied callback as parameters.
This allows for some rather elegant solutions to the ‘index issue’ and accessing keys from within the callback - both of which are easily achieved in an impertivive mindset.</p>



<h2 id="current-index">Current Index</h2>

<p>Using the <code class="language-plaintext highlighter-rouge">range</code> function we are able to supply a sequence of indexes based on the collection.
This allows us to access the current index from within the callback function.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$users</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">'Joe'</span><span class="p">,</span> <span class="s1">'Bob'</span><span class="p">,</span> <span class="s1">'Sam'</span> <span class="p">];</span>

<span class="nb">array_map</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$name</span><span class="p">,</span> <span class="nv">$position</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">compact</span><span class="p">(</span><span class="s1">'position'</span><span class="p">,</span> <span class="s1">'name'</span><span class="p">);</span>
<span class="p">},</span> <span class="nv">$users</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$users</span><span class="p">)));</span>

<span class="c1">// [ position =&gt; 1, name =&gt; 'Joe' ]</span>
<span class="c1">// [ position =&gt; 2, name =&gt; 'Bob' ]</span>
<span class="c1">// [ position =&gt; 3, name =&gt; 'Sam' ]</span>
</code></pre></div></div>

<h2 id="key-value-access">Key-Value Access</h2>

<p>One use-case that a <code class="language-plaintext highlighter-rouge">foreach</code> provides is the ability to destructure an associative array, allowing you to access the key and value.
In its basic form an <code class="language-plaintext highlighter-rouge">array_map</code> seems to be missing this capability, however, with the ability to supply multiple arrays this is not the case.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$users</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">123</span> <span class="o">=&gt;</span> <span class="s1">'Joe'</span><span class="p">,</span> <span class="mi">456</span> <span class="o">=&gt;</span> <span class="s1">'Bob'</span><span class="p">,</span> <span class="mi">789</span> <span class="o">=&gt;</span> <span class="s1">'Sam'</span> <span class="p">];</span>

<span class="nb">array_map</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$id</span><span class="p">,</span> <span class="nv">$name</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">compact</span><span class="p">(</span><span class="s1">'id'</span><span class="p">,</span> <span class="s1">'name'</span><span class="p">);</span>
<span class="p">},</span> <span class="nb">array_keys</span><span class="p">(</span><span class="nv">$users</span><span class="p">),</span> <span class="nb">array_values</span><span class="p">(</span><span class="nv">$users</span><span class="p">));</span>

<span class="c1">// [ id =&gt; 123, name =&gt; 'Joe' ]</span>
<span class="c1">// [ id =&gt; 456, name =&gt; 'Bob' ]</span>
<span class="c1">// [ id =&gt; 789, name =&gt; 'Sam' ]</span>
</code></pre></div></div>

</article>

            </main>

            <footer class="footer">
                <img src="https://www.gravatar.com/avatar/c5c2978bb14d16460f73399c394b6acd?s=160">
                <ul>
                    <li>Developer at <a href="http://www.mybuilder.com/">MyBuilder</a></li>
                    <li><a href="http://threedevsandamaybe.com/">Three Devs and a Maybe</a> podcast co-host</li>
                    <li>All ramblings can be found in the <a href="/archive/">Archive</a></li>
                </ul>
                <div class="cf"></div>
            </footer>
        </div>
    </body>
</html>
