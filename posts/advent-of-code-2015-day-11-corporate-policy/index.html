<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Advent of Code 2015 - Day 11 - Corporate Policy - Edd Mann</title>
<meta name=description content="Solving the Advent of Code 2015 Day 11 puzzle using TypeScript."><meta name=author content="Edd Mann"><script async src="https://www.googletagmanager.com/gtag/js?id=G-ZPQ7WHNXH4"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-ZPQ7WHNXH4")}</script><meta itemprop=name content="Advent of Code 2015 - Day 11 - Corporate Policy"><meta itemprop=description content="On the eleventh day of Advent of Code 2015, we are asked to help Santa pick a new memorable password, as his last one has expired."><meta itemprop=datePublished content="2021-02-04T00:00:00+00:00"><meta itemprop=dateModified content="2021-02-04T00:00:00+00:00"><meta itemprop=wordCount content="521"><meta itemprop=keywords content="Advent-of-Code,Advent-of-Code-2015,Typescript"><meta property="og:url" content="https://eddmann.com/posts/advent-of-code-2015-day-11-corporate-policy/"><meta property="og:site_name" content="Edd Mann"><meta property="og:title" content="Advent of Code 2015 - Day 11 - Corporate Policy"><meta property="og:description" content="On the eleventh day of Advent of Code 2015, we are asked to help Santa pick a new memorable password, as his last one has expired."><meta property="og:locale" content="en_GB"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-02-04T00:00:00+00:00"><meta property="article:modified_time" content="2021-02-04T00:00:00+00:00"><meta property="article:tag" content="Advent-of-Code"><meta property="article:tag" content="Advent-of-Code-2015"><meta property="article:tag" content="Typescript"><meta name=twitter:card content="summary"><meta name=twitter:title content="Advent of Code 2015 - Day 11 - Corporate Policy"><meta name=twitter:description content="On the eleventh day of Advent of Code 2015, we are asked to help Santa pick a new memorable password, as his last one has expired."><meta name=twitter:site content="@edd_mann"><link rel="preload stylesheet" as=style href=/css/style.min.866f0dbf24963ef6aab7a870ac4f1e5617707e4531cb5ea08f18fc7918a154c4.css integrity="sha256-hm8NvySWPvaqt6hwrE8eVhdwfkUxy16gjxj8eRihVMQ="><link rel=preload as=image href=/assets/x.svg><link rel=preload as=image href=/assets/github.svg><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://eddmann.com/posts/advent-of-code-2015-day-11-corporate-policy/></head><body><header class="site-header wrapper"><a href=https://eddmann.com/><h3 class=site-header__title>Edd Mann
<span style=--url:url(/assets/code.svg)>Developer</span></h3></a><div class=site-header__mobile-navigation-button aria-label="Toggle mobile site navigation" aria-expanded=false aria-controls=site-navigation></div><div class=site-header__navigation id=site-navigation><nav aria-label="Primary navigation"><ul class=site-header__primary-navigation><li><a href=/archive>Archive</a></li><li><a href=/projects>Projects</a></li><li><a href=/about>About</a></li></ul></nav><nav aria-label="Social links"><ul class=site-header__social-navigation><li><a class=social-icon style=--url:url(/assets/x.svg) href=https://x.com/edd_mann rel="external noopener" target=_blank>Twitter (X)</a></li><li><a class=social-icon style=--url:url(/assets/github.svg) href=https://github.com/eddmann rel="external noopener" target=_blank>GitHub</a></li></ul></nav></div></header><main class=wrapper><article><header class=page-title><h1 class=transition-between-pages style=--id:advent-of-code-2015-day-11-corporate-policy>Advent of Code 2015 - Day 11 - Corporate Policy</h1><time class=post__time>Feb 4, 2021</time></header><main class=prose><p>On the eleventh day of Advent of Code 2015, we are asked to help Santa pick a new <em>memorable</em> password, as his last one has expired.</p><h2 id=part-1>Part 1</h2><p>For part one, we are asked to determine what Santa&rsquo;s next password should be, based on his previous expired one.</p><p>Santa&rsquo;s password is generated by incrementing a seed password using a process similar to how rotors step within an <a href=https://en.wikipedia.org/wiki/Enigma_machine rel="external noopener" target=_blank>Enigma machine</a>.
We increase the rightmost letter by one step.
If it is <em>z</em>, it wraps around to <em>a</em>, and then we repeat with the next letter to the left until one does not wrap around.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>ALPHA</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;abcdefghijklmnopqrstuvwxyz&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>nextPossiblePassword</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>password</span>: <span style=color:#66d9ef>string</span>)<span style=color:#f92672>:</span> <span style=color:#66d9ef>string</span> <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>password</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;&#39;</span>) <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>remaining</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>password</span>.<span style=color:#a6e22e>slice</span>(<span style=color:#ae81ff>0</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>next</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>ALPHA</span>.<span style=color:#a6e22e>indexOf</span>(<span style=color:#a6e22e>password</span>.<span style=color:#a6e22e>substr</span>(<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>)) <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>next</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>ALPHA</span>.<span style=color:#a6e22e>length</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>?</span> <span style=color:#a6e22e>remaining</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>ALPHA</span>[<span style=color:#a6e22e>next</span>]
</span></span><span style=display:flex><span>    <span style=color:#f92672>:</span> <span style=color:#a6e22e>nextPossiblePassword</span>(<span style=color:#a6e22e>remaining</span>) <span style=color:#f92672>+</span> <span style=color:#a6e22e>ALPHA</span>[<span style=color:#ae81ff>0</span>];
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><p>For the above implementation, I decided to take a recursive approach, leveraging an alphabet sequence string to deduce order.
I explored the option of using ordinal character codes instead but decided to stick with this implementation for readability.</p><p>With a possible new password now generated, Santa requires that it passes three password policy rules he has enforced.
To ensure the password is valid, it must not contain any restricted letters, have at least two occurrences of non-overlapping pairs (e.g., <em>aacc</em>, <em>aabcc</em>), and include an alphabet sequence triplet (e.g., <em>abc</em>, <em>cbd</em>).</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>isValidPassword</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>password</span>: <span style=color:#66d9ef>string</span>)<span style=color:#f92672>:</span> <span style=color:#66d9ef>boolean</span> <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>hasRestrictedLetter</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>/[iol]/</span>.<span style=color:#a6e22e>test</span>(<span style=color:#a6e22e>password</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>hasTwoNonOverlappingPairs</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>/([a-z])\1.*([a-z])\2/</span>.<span style=color:#a6e22e>test</span>(
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>password</span>
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>hasAlphaSequence</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    ...<span style=color:#a6e22e>password</span>.<span style=color:#a6e22e>matchAll</span>(<span style=color:#e6db74>/(?=([a-z]{3}))/g</span>),
</span></span><span style=display:flex><span>  ].<span style=color:#a6e22e>some</span>(([, <span style=color:#a6e22e>seq</span>]) <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>ALPHA</span>.<span style=color:#a6e22e>includes</span>(<span style=color:#a6e22e>seq</span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>    <span style=color:#f92672>!</span><span style=color:#a6e22e>hasRestrictedLetter</span> <span style=color:#f92672>&amp;&amp;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>hasTwoNonOverlappingPairs</span> <span style=color:#f92672>&amp;&amp;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>hasAlphaSequence</span>
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><p>Harnessing regular expression back-references, we can test for non-overlapping pairs like we did in previous days&rsquo; solutions.
To validate the alphabet sequence triplet criteria, I opted to reuse the alphabet sequence string and capture all triplet sub-sequences from the password using a positive lookahead regular expression.</p><p>With the ability to generate and validate possible passwords, we are required to iteratively perform this operation until the next valid password has been found.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>generateNextPassword</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>seed</span>: <span style=color:#66d9ef>string</span>)<span style=color:#f92672>:</span> <span style=color:#66d9ef>string</span> <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>next</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>seed</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>while</span> (<span style=color:#66d9ef>true</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>next</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>nextPossiblePassword</span>(<span style=color:#a6e22e>next</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>isValidPassword</span>(<span style=color:#a6e22e>next</span>)) <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>next</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><p>I initially explored the option of using a tail-recursive approach to iterate over this process but found that JavaScript engines do not <a href=https://dev.to/snird/recursion-optimization-in-js-where-is-it-ptc-tco-and-fud-4fka rel="external noopener" target=_blank>fully support this yet</a>.
From here, I debated whether returning a <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Generator rel="external noopener" target=_blank>Generator</a> would add much value to the solution.
In the end, I landed on a simple stateful loop that iteratively applies and validates the generation process until the next password is found.</p><p>Finally, we can call this function with the supplied expired password to return Santa&rsquo;s next valid password ðŸŒŸ.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>part1</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>input</span>: <span style=color:#66d9ef>string</span>)<span style=color:#f92672>:</span> <span style=color:#66d9ef>string</span> <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>generateNextPassword</span>(<span style=color:#a6e22e>input</span>);
</span></span></code></pre></div><h2 id=part-2>Part 2</h2><p>For part two, we are asked to apply this process an additional time and generate Santa&rsquo;s next following password.
All the work for carrying out this task has been done in part one ðŸŽ‰, meaning all that is required is to supply the password generated in part one into an additional generation call ðŸŒŸ.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>part2</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>input</span>: <span style=color:#66d9ef>string</span>)<span style=color:#f92672>:</span> <span style=color:#66d9ef>string</span> <span style=color:#f92672>=&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>generateNextPassword</span>(<span style=color:#a6e22e>part1</span>(<span style=color:#a6e22e>input</span>));
</span></span></code></pre></div></main><footer class=post__tags><a href=/archive/tag/advent-of-code>advent-of-code</a><a href=/archive/tag/advent-of-code-2015>advent-of-code-2015</a><a href=/archive/tag/typescript>typescript</a></footer></article><div class=scroll-watcher></div></main><footer class="site-footer wrapper"><div>&copy; 2025, Edd Mann</div></footer><script>(function(){document.querySelector(".site-header__mobile-navigation-button").addEventListener("click",e=>{document.documentElement.classList.toggle("mobile-navigation-open"),e.target.setAttribute("aria-expanded",e.target.getAttribute("aria-expanded")==="false"?"true":"false")});const n=document.querySelector(".site-header");let t=window.pageYOffset,e=!1;window.addEventListener("scroll",()=>{if(e)return;setTimeout(()=>{const s=window.pageYOffset;n.classList.toggle("is-sticky",s>0&&t>s),t=s,e=!1},500),e=!0})})()</script></body></html>