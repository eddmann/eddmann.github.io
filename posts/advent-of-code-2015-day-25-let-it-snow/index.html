<!doctype html>
<html lang="en">
    <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Solving the Advent of Code 2015 Day 25 puzzle using TypeScript">

    <title>Advent of Code 2015 - Day 25 - Let It Snow &middot; Edd Mann</title>

    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,700italic,400italic">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/styles.css">

    <link rel="shortcut icon" href="/favicon.ico">

    <link rel="alternate" href="/rss.xml" title="" type="application/rss+xml">

    <script>
        var _gaq=[['_setAccount','UA-32512081-1'],['_setDomainName','eddmann.com'],['_trackPageview']];
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = 'https://ssl.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>
</head>

    <body>
        <div class="container content">
            <header class="masthead">
                <h3 class="masthead-title">
                    <a href="/" title="Home">Edd Mann</a>
                    <small><i class="fa fa-code"></i> Developer</small>
                </h3>
                <nav>
                    <a href="https://twitter.com/edd_mann"><i class="fa fa-twitter"></i></a>
                    <a href="https://github.com/eddmann"><i class="fa fa-github"></i></a>
                    <a href="mailto:the@eddmann.com"><i class="fa fa-envelope"></i></a>
                </nav>
                <div class="cf"></div>
            </header>

            <main>
                <article class="post">
    <h1 class="post-title">Advent of Code 2015 - Day 25 - Let It Snow</h1>
    <time datetime="2021-02-20T00:00:00-06:00" class="post-date">20 Feb 2021</time>
    <p>On the twenty fifth day of Advent of Code 2015 we are asked to help Santa boot up his weather machine.</p>



<h3 id="part-1">Part 1</h3>

<p>The weather machine requires a <em>code</em> to be entered for copy protection purposes.
As the manual has been misplaced we are required to determine what this code will be based on the rules laid out in the <a href="https://adventofcode.com/2015/day/25">problem definition</a>.</p>

<p>The problem outlined first centres around calculating a <a href="https://en.wikipedia.org/wiki/Triangular_number">Triangle number</a>, and then with this value using <a href="https://en.wikipedia.org/wiki/Modular_exponentiation">Modular exponentiation</a> to return the desired code.
We will begin by building the functionality to determine what the given rows/columns triangle number will be in the table.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">calcTriangleNumberAt</span> <span class="o">=</span> <span class="p">(</span><span class="nx">row</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">col</span><span class="p">:</span> <span class="kr">number</span><span class="p">):</span> <span class="kr">number</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">side</span> <span class="o">=</span> <span class="nx">row</span> <span class="o">+</span> <span class="nx">col</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">return</span> <span class="p">(</span><span class="nx">side</span> <span class="o">*</span> <span class="p">(</span><span class="nx">side</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="nx">row</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div></div>

<p>The value we are looking for is on the hypotenuse of an isosceles right-angle triangle.
We begin by working out what the length of the side is.
From here we then calculate how many numbers are in that triangle.
Based on this value we can then return the resulting number.</p>

<p>Now we have the <em>exponent</em> value required, we can move on to building the functionality to calculate the code itself.
We use <em>Modular exponentiation</em> to solve this, which is used regularly within public-key cryptography.
As JavaScript does not have this functionality built-in we are required to write our own implementation.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">expMod</span> <span class="o">=</span> <span class="p">(</span><span class="nx">base</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">exp</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">mod</span><span class="p">:</span> <span class="kr">number</span><span class="p">):</span> <span class="kr">number</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">exp</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">exp</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="nx">expMod</span><span class="p">(</span><span class="nx">base</span><span class="p">,</span> <span class="nx">exp</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">mod</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span> <span class="o">%</span> <span class="nx">mod</span><span class="p">;</span>
  <span class="k">return</span> <span class="p">(</span><span class="nx">base</span> <span class="o">*</span> <span class="nx">expMod</span><span class="p">(</span><span class="nx">base</span><span class="p">,</span> <span class="nx">exp</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">mod</span><span class="p">))</span> <span class="o">%</span> <span class="nx">mod</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div></div>

<p>With these two functions available to us, we can parse the provided row and column input and calculate the desired answer ðŸŒŸ.
Note that based on our resulting modular exponentiation we must multiply this by the first code supplied before returning it.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">part1</span> <span class="o">=</span> <span class="p">(</span><span class="nx">input</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="kr">number</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">row</span><span class="p">,</span> <span class="nx">col</span><span class="p">]</span> <span class="o">=</span> <span class="nx">input</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/</span><span class="se">(\d</span><span class="sr">+</span><span class="se">)</span><span class="sr">/g</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span><span class="nx">toInt</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">firstCode</span> <span class="o">=</span> <span class="mi">20151125</span><span class="p">;</span>

  <span class="kd">const</span> <span class="nx">base</span> <span class="o">=</span> <span class="mi">252533</span><span class="p">;</span>
  <span class="kd">const</span> <span class="nx">exp</span> <span class="o">=</span> <span class="nx">calcTriangleNumberAt</span><span class="p">(</span><span class="nx">row</span><span class="p">,</span> <span class="nx">col</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">mod</span> <span class="o">=</span> <span class="mi">33554393</span><span class="p">;</span>

  <span class="k">return</span> <span class="p">(</span><span class="nx">expMod</span><span class="p">(</span><span class="nx">base</span><span class="p">,</span> <span class="nx">exp</span><span class="p">,</span> <span class="nx">mod</span><span class="p">)</span> <span class="o">*</span> <span class="nx">firstCode</span><span class="p">)</span> <span class="o">%</span> <span class="nx">mod</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div></div>

<h3 id="part-2">Part 2</h3>

<p>For part twoâ€¦ there is nothing more to do.
We can give ourselves a pat on the back as we have helped save Christmas! ðŸŽ‰</p>

</article>

            </main>

            <footer class="footer">
                <img src="https://www.gravatar.com/avatar/c5c2978bb14d16460f73399c394b6acd?s=160">
                <ul>
                    <li>Developer at <a href="http://www.mybuilder.com/">MyBuilder</a></li>
                    <li><a href="http://threedevsandamaybe.com/">Three Devs and a Maybe</a> podcast co-host</li>
                    <li>All ramblings can be found in the <a href="/archive/">Archive</a></li>
                </ul>
                <div class="cf"></div>
            </footer>
        </div>
    </body>
</html>
