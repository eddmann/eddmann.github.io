<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>How Static Facades and IoC are used in Laravel - Edd Mann</title>
<meta name=description content="Demystifying the magic behind Static Facades and IoC in Laravel: Discover how Laravel employs static facades and inversion of control to enhance flexibility and maintainability."><meta name=author content="Edd Mann"><script async src="https://www.googletagmanager.com/gtag/js?id=G-ZPQ7WHNXH4"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-ZPQ7WHNXH4")}</script><meta itemprop=name content="How Static Facades and IoC are used in Laravel"><meta itemprop=description content="When you first take a look at Laravel you may ask yourself, what is with all the static? It is a valid question, as on the surface it can seem like the framework is heavily static method based. However, this could be no further from the truth. A deeper exploration reveals that the static calls we make really mask a great number of instance objects. In this post I hope to provide a simple explanation as to what is really going on, and along the way build a basic implementation to practise these newfound findings."><meta itemprop=datePublished content="2014-01-08T00:00:00+00:00"><meta itemprop=dateModified content="2014-01-08T00:00:00+00:00"><meta itemprop=wordCount content="1072"><meta itemprop=keywords content="Laravel,Php"><meta property="og:url" content="https://eddmann.com/posts/how-static-facades-and-ioc-are-used-in-laravel/"><meta property="og:site_name" content="Edd Mann"><meta property="og:title" content="How Static Facades and IoC are used in Laravel"><meta property="og:description" content="When you first take a look at Laravel you may ask yourself, what is with all the static? It is a valid question, as on the surface it can seem like the framework is heavily static method based. However, this could be no further from the truth. A deeper exploration reveals that the static calls we make really mask a great number of instance objects. In this post I hope to provide a simple explanation as to what is really going on, and along the way build a basic implementation to practise these newfound findings."><meta property="og:locale" content="en_GB"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2014-01-08T00:00:00+00:00"><meta property="article:modified_time" content="2014-01-08T00:00:00+00:00"><meta property="article:tag" content="Laravel"><meta property="article:tag" content="Php"><meta name=twitter:card content="summary"><meta name=twitter:title content="How Static Facades and IoC are used in Laravel"><meta name=twitter:description content="When you first take a look at Laravel you may ask yourself, what is with all the static? It is a valid question, as on the surface it can seem like the framework is heavily static method based. However, this could be no further from the truth. A deeper exploration reveals that the static calls we make really mask a great number of instance objects. In this post I hope to provide a simple explanation as to what is really going on, and along the way build a basic implementation to practise these newfound findings."><meta name=twitter:site content="@edd_mann"><link rel=stylesheet href=/css/style.min.c3ee6cab58dd3fee7e6960b0391e996ba9254804702bc60a52ec5e0e3591a018.css integrity="sha256-w+5sq1jdP+5+aWCwOR6Za6klSARwK8YKUuxeDjWRoBg="><link rel=preload as=image href=/assets/x.svg><link rel=preload as=image href=/assets/github.svg><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://eddmann.com/posts/how-static-facades-and-ioc-are-used-in-laravel/><script>document.documentElement.setAttribute("data-theme",localStorage.getItem("theme")||window.matchMedia("(prefers-color-scheme: dark)").matches&&"dark"||"light")</script><script src=/script.min.164d56ac6f4c8613b0b7109fd1b4d9dfdce1d004edab8e1afb7240013f9221d7.js integrity="sha256-Fk1WrG9MhhOwtxCf0bTZ39zh0ATtq44a+3JAAT+SIdc=" defer></script></head><body><header class="site-header l-wrapper"><a href=https://eddmann.com/><h3 class=site-header__title>Edd Mann
<span style=--url:url(/assets/code.svg)>Developer</span></h3></a><button class=site-header__mobile-navigation-button type=button title="Toggle mobile site navigation" aria-label="Toggle mobile site navigation" aria-expanded=false aria-controls=site-navigation></button><div class=site-header__navigation id=site-navigation><nav aria-label="Primary navigation"><ul class=site-header__primary-navigation><li><a href=/archive>Archive</a></li><li><a href=/projects>Projects</a></li><li><a href=/about>About</a></li></ul></nav><nav aria-label="Social links"><ul class=site-header__social-navigation><li><a class=social-icon style=--url:url(/assets/x.svg) href=https://x.com/edd_mann rel="external noopener" target=_blank>Twitter (X)</a></li><li><a class=social-icon style=--url:url(/assets/github.svg) href=https://github.com/eddmann rel="external noopener" target=_blank>GitHub</a></li></ul></nav></div></header><main class=l-wrapper><article><header class=l-page-title><h1 class=u-transition-between-pages style=--id:how-static-facades-and-ioc-are-used-in-laravel>How Static Facades and IoC are used in Laravel</h1><time datetime=2014-01-08T00:00:00Z class=published-at>Jan 8, 2014</time></header><main class=u-prose><p>When you first take a look at <a href=http://laravel.com/ rel="external noopener" target=_blank>Laravel</a> you may ask yourself, what is with all the static?
It is a valid question, as on the surface it can seem like the framework is heavily static method based.
However, this could be no further from the truth.
A deeper exploration reveals that the static calls we make really mask a great number of instance objects.
In this post I hope to provide a simple explanation as to what is really going on, and along the way build a basic implementation to practise these newfound findings.</p><h2 id=inversion-of-control-container>Inversion of Control Container</h2><p>A concept that gets thrown around a lot when the topic of discussion turns to Laravel is the <a href=http://en.wikipedia.org/wiki/Inversion_of_control rel="external noopener" target=_blank>Inversion of Control</a> (IoC) container.
Simply put, it provides you with a key-value store for resolving the instance of a class you wish to use.
The typical object-orientated flow of static assignment is then replaced with a builder object, which binds objects at run-time.
Though this may seem on the surface to over-complicate matters, removing the benefits of compile-time static analysis, it provides us with great control over how and what object instances are used.
Using this technique allows us to easily replace instances with other conforming implementations - a good example of this can be seen for mocking objects when testing.
Now that we have conceptualised the technique from a high level, I know that personally nothing beats a clean, focused example.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>App</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> $instances <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>set</span>($name, $instance)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>is_string</span>($instance)) {
</span></span><span style=display:flex><span>            $instance <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> $instance();
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>static</span><span style=color:#f92672>::</span>$instances[$name] <span style=color:#f92672>=</span> $instance;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>get</span>($name)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        $instance <span style=color:#f92672>=</span> <span style=color:#66d9ef>static</span><span style=color:#f92672>::</span>$instances[$name];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> ($instance <span style=color:#a6e22e>instanceof</span> <span style=color:#a6e22e>Closure</span>) {
</span></span><span style=display:flex><span>            $instance <span style=color:#f92672>=</span> $instance();
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> $instance;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>For brevity, the solution shown above uses a static implementation.
We are only going to require a single container for this example.
The two defined methods wrap the interaction with the associative array, allowing the user to either add or retrieve an instance (by name) from the container.
When adding an item, a name and instance (or means to create an instance) must be supplied.
When retrieving an instance, the key&rsquo;s value is checked to see if it is a closure or anonymous function.
If so, it is called before being returned.
This provides you with the flexibility of supplying the container with more complex requirements when creating an instance, including constructor arguments.
For simplicity, the option to provide a class name by string has been included.
Supplying a class name creates a new instance of the class (by way of an empty constructor), with the instance being shared between retrieval requests (similar to a singleton).
We can then use this implementation in the manner shown below.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>MessageInterface</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>greeting</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>EnglishMessage</span> <span style=color:#66d9ef>implements</span> <span style=color:#a6e22e>MessageInterface</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>greeting</span>() { <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;Hello!&#39;</span>; }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>App</span><span style=color:#f92672>::</span><span style=color:#a6e22e>set</span>(<span style=color:#e6db74>&#39;message&#39;</span>, <span style=color:#66d9ef>function</span>() { <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>EnglishMessage</span>(); });
</span></span><span style=display:flex><span><span style=color:#75715e>// or
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>App</span><span style=color:#f92672>::</span><span style=color:#a6e22e>set</span>(<span style=color:#e6db74>&#39;message&#39;</span>, <span style=color:#e6db74>&#39;EnglishMessage&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>echo</span> <span style=color:#a6e22e>App</span><span style=color:#f92672>::</span><span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;message&#39;</span>)<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>greeting</span>(); <span style=color:#75715e>// Hello!
</span></span></span></code></pre></div><p>It may seem like an over-complication to include an interface in this example.
However, the design choice will become clear in the following discussion.
We are now able to retrieve the desired class instance by name alone, ignoring any implementation details required to instantiate and return the instance.
This abstraction also allows us to define an alternative implementation, shown below with replacing the existing example instance.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>FrenchMessage</span> <span style=color:#66d9ef>implements</span> <span style=color:#a6e22e>MessageInterface</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>greeting</span>() { <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;Bonjour!&#39;</span>; }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>App</span><span style=color:#f92672>::</span><span style=color:#a6e22e>set</span>(<span style=color:#e6db74>&#39;message&#39;</span>, <span style=color:#e6db74>&#39;FrenchMessage&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>echo</span> <span style=color:#a6e22e>App</span><span style=color:#f92672>::</span><span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;message&#39;</span>)<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>greeting</span>(); <span style=color:#75715e>// Bonjour!
</span></span></span></code></pre></div><p>The same call to the message instance at run-time will now use the alternative &lsquo;FrenchMessage&rsquo; class instance.
No tedious code modification is required as the process occurs dynamically.
One issue that you may highlight, though, is the loss of succinct class declaration.
With the added requirement of having to retrieve the instance from the container before acting upon it, code can start to look very verbose.</p><h2 id=facades>Facades</h2><p>PHP provides us with a very elegant way of solving this problem, allowing us to define how missing class methods should be handled in code.
With this power, we are able to add the same level of indirection present in the IoC container, &lsquo;facading&rsquo; the verbose resolution with the clean static syntax.
Below is a simple implementation which addresses this requirement.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#66d9ef>abstract</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Facade</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>protected</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getName</span>()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Exception</span>(<span style=color:#e6db74>&#39;Facade does not implement getName method.&#39;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>function</span> __callStatic($method, $args)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        $instance <span style=color:#f92672>=</span> <span style=color:#a6e22e>App</span><span style=color:#f92672>::</span><span style=color:#a6e22e>get</span>(<span style=color:#66d9ef>static</span><span style=color:#f92672>::</span><span style=color:#a6e22e>getName</span>());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> ( <span style=color:#f92672>!</span> <span style=color:#a6e22e>method_exists</span>($instance, $method)) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Exception</span>(<span style=color:#a6e22e>get_called_class</span>() <span style=color:#f92672>.</span> <span style=color:#e6db74>&#39; does not implement &#39;</span> <span style=color:#f92672>.</span> $method <span style=color:#f92672>.</span> <span style=color:#e6db74>&#39; method.&#39;</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>call_user_func_array</span>([ $instance, $method ], $args);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>The example implementation above defines an abstract &lsquo;Facade&rsquo; class which provides the dynamic static invocation required by each facade.
There is a requirement for each facade created to override the &lsquo;getName&rsquo; method, simply returning the related name of the container instance.
As static methods cannot rightfully be made abstract, we instead throw an exception which informs the user of this restriction.
Being the only concrete method defined in the class, any resolved container instance with a method called &lsquo;getName&rsquo; will not be successfully called as it will not invoke <code>__callStatic</code>.
In a more developed implementation, this method name could be changed to something that would reduce the risk of conflicting with instance method names.
The other method that is defined is the <a href=http://www.php.net/manual/en/language.oop5.magic.php rel="external noopener" target=_blank>magic</a> <code>__callStatic</code> method, providing the ability to handle missing static method calls.
Using the name that is returned in the concrete facade class, we are able to retrieve the correct instance from the container.
From here, we simply check to see if the instance contains the method.
If this is not the case, we throw a suitable error for the user.
Finally, we call the method on the instance, passing in any arguments that were specified and return the result.
The example below expands on the previous message implementation to take advantage of the more elegant looking facade type.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Message</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>Facade</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>protected</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getName</span>() { <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;message&#39;</span>; }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>echo</span> <span style=color:#a6e22e>Message</span><span style=color:#f92672>::</span><span style=color:#a6e22e>greeting</span>(); <span style=color:#75715e>// Hello!
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>App</span><span style=color:#f92672>::</span><span style=color:#a6e22e>set</span>(<span style=color:#e6db74>&#39;message&#39;</span>, <span style=color:#e6db74>&#39;FrenchMessage&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>echo</span> <span style=color:#a6e22e>Message</span><span style=color:#f92672>::</span><span style=color:#a6e22e>greeting</span>(); <span style=color:#75715e>// Bonjour!
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>echo</span> <span style=color:#a6e22e>Message</span><span style=color:#f92672>::</span><span style=color:#a6e22e>goodbye</span>();
</span></span><span style=display:flex><span>} <span style=color:#66d9ef>catch</span> (<span style=color:#a6e22e>Exception</span> $ex) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>echo</span> $ex<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getMessage</span>();
</span></span><span style=display:flex><span>} <span style=color:#75715e>// Message does not implement goodbye method.
</span></span></span></code></pre></div><p>So now we have been able to create an implementation which has all the flexibility provided to us by dynamic class instantiation and invocation, while retaining the succinct properties of static classes.</p><h2 id=resources>Resources</h2><ul><li><a href=http://laravel.com/docs/ioc rel="external noopener" target=_blank>Laravel: IoC Container</a></li><li><a href=http://laravel.com/docs/facades rel="external noopener" target=_blank>Laravel: Facades</a></li><li><a href=http://martinfowler.com/articles/injection.html rel="external noopener" target=_blank>Inversion of Control Containers and the Dependency Injection pattern</a></li><li><a href=http://www.php.net/manual/en/language.oop5.magic.php rel="external noopener" target=_blank>PHP: Magic Methods</a></li></ul></main><footer class=post-footer><ul class="tags tags--large"><li><a href=/archive/tag/laravel>laravel</a></li><li><a href=/archive/tag/php>php</a></li></ul><div class=related><h3 class=related__title>Related Posts</h3><ul class=related__posts><li><a href=/posts/using-pythons-pygments-syntax-highlighter-in-php/>Using Python's Pygments Syntax Highlighter in PHP</a></li><li><a href=/posts/using-partial-application-in-php/>Using Partial Application in PHP</a></li><li><a href=/posts/simple-function-driven-development/>Simple Function Driven-Development</a></li><li><a href=/posts/installing-nginx-apache-mysql-php-5-5-lamp-stack-on-cent-os-6-4/>Installing Nginx/Apache, MySQL, PHP 5.5 (LAMP) stack on CentOS 6.4</a></li><li><a href=/posts/coalescing-operation-in-php/>Coalescing Operation in PHP (for Default Values)</a></li></ul></div></footer></article><div class=scroll-watcher></div></main><footer class="site-footer l-wrapper"><div>&copy; 2025, Edd Mann</div><button class=site-footer__theme-toggle type=button title="Toggle theme" aria-label="Toggle theme"><svg fill="currentcolor" viewBox="0 0 32 32" role="img"><title>Theme toggle icon</title><desc>A circle representing the moon for toggling theme</desc><path d="M16 .5C7.4.5.5 7.4.5 16S7.4 31.5 16 31.5 31.5 24.6 31.5 16 24.6.5 16 .5zm0 28.1V3.4C23 3.4 28.6 9 28.6 16S23 28.6 16 28.6z"/></svg></button></footer></body></html>