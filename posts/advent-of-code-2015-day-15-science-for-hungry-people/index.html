<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Advent of Code 2015 - Day 15 - Science for Hungry People - Edd Mann</title>
<meta name=description content="Solving the Advent of Code 2015 Day 15 puzzle using TypeScript."><meta name=author content="Edd Mann"><script async src="https://www.googletagmanager.com/gtag/js?id=G-ZPQ7WHNXH4"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-ZPQ7WHNXH4")}</script><meta itemprop=name content="Advent of Code 2015 - Day 15 - Science for Hungry People"><meta itemprop=description content="On the fifteenth day of Advent of Code 2015, we are tasked with finding the right balance of ingredients to make the perfect milk-dunking cookie recipe."><meta itemprop=datePublished content="2021-02-08T00:00:00+00:00"><meta itemprop=dateModified content="2021-02-08T00:00:00+00:00"><meta itemprop=wordCount content="707"><meta itemprop=keywords content="Advent-of-Code,Advent-of-Code-2015,Typescript"><meta property="og:url" content="https://eddmann.com/posts/advent-of-code-2015-day-15-science-for-hungry-people/"><meta property="og:site_name" content="Edd Mann"><meta property="og:title" content="Advent of Code 2015 - Day 15 - Science for Hungry People"><meta property="og:description" content="On the fifteenth day of Advent of Code 2015, we are tasked with finding the right balance of ingredients to make the perfect milk-dunking cookie recipe."><meta property="og:locale" content="en_GB"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-02-08T00:00:00+00:00"><meta property="article:modified_time" content="2021-02-08T00:00:00+00:00"><meta property="article:tag" content="Advent-of-Code"><meta property="article:tag" content="Advent-of-Code-2015"><meta property="article:tag" content="Typescript"><meta name=twitter:card content="summary"><meta name=twitter:title content="Advent of Code 2015 - Day 15 - Science for Hungry People"><meta name=twitter:description content="On the fifteenth day of Advent of Code 2015, we are tasked with finding the right balance of ingredients to make the perfect milk-dunking cookie recipe."><meta name=twitter:site content="@edd_mann"><link rel="preload stylesheet" as=style href=/css/style.min.a5107d712048e2bf498ca68b768b337bccdd6ce7b257419de1c0762b86ab1143.css integrity="sha256-pRB9cSBI4r9JjKaLdosze8zdbOeyV0Gd4cB2K4arEUM="><link rel=preload as=image href=/assets/x.svg><link rel=preload as=image href=/assets/github.svg><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://eddmann.com/posts/advent-of-code-2015-day-15-science-for-hungry-people/></head><body><header class="site-header wrapper"><a href=https://eddmann.com/><h3 class=site-header__title>Edd Mann
<span style=--url:url(/assets/code.svg)>Developer</span></h3></a><div class=site-header__mobile-navigation-button aria-label="Toggle mobile site navigation" aria-expanded=false aria-controls=site-navigation></div><div class=site-header__navigation id=site-navigation><nav aria-label="Primary navigation"><ul class=site-header__primary-navigation><li><a href=/archive>Archive</a></li><li><a href=/projects>Projects</a></li><li><a href=/about>About</a></li></ul></nav><nav aria-label="Social links"><ul class=site-header__social-navigation><li><a class=social-icon style=--url:url(/assets/x.svg) href=https://x.com/edd_mann rel="external noopener" target=_blank>Twitter (X)</a></li><li><a class=social-icon style=--url:url(/assets/github.svg) href=https://github.com/eddmann rel="external noopener" target=_blank>GitHub</a></li></ul></nav></div></header><main class=wrapper><article><header class=page-title><h1>Advent of Code 2015 - Day 15 - Science for Hungry People</h1><time class=post__time>Feb 8, 2021</time></header><main class=prose><p>On the fifteenth day of Advent of Code 2015, we are tasked with finding the right balance of ingredients to make the perfect milk-dunking cookie recipe.</p><h2 id=part-1>Part 1</h2><p>We are provided with a listing of the four available ingredients, along with five properties for each.
These properties are capacity, durability, flavour, texture, and calories.
Our resulting recipe leaves room for exactly 100 teaspoons of ingredients.</p><p>For part one, we are asked to find the ingredient mixture that has the highest total <em>cookie score</em>.
The total score of a cookie can be found by adding up each of the properties (negative totals become 0) and then multiplying together everything except calories.</p><p>We start by parsing the ingredients into a form we can work with going forward.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Property</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>number</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Ingredient</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>Property</span>[];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>parseIngredients</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>input</span>: <span style=color:#66d9ef>string</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>Ingredient</span>[] <span style=color:#f92672>=&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>input</span>.<span style=color:#a6e22e>split</span>(<span style=color:#e6db74>&#39;\n&#39;</span>).<span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>line</span> <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>line</span>.<span style=color:#a6e22e>match</span>(<span style=color:#e6db74>/(-?\d+)/g</span>).<span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>toInt</span>));
</span></span></code></pre></div><p>For this exercise, we are not too bothered with the names of the ingredients and properties, and as such, we can simply store all the given property values.
From here, we are required to iterate over all the possible combinations of teaspoon quantities per ingredient that sum up to the 100 teaspoons available.
Initially, I solved this with a hardcoded triple for-loop ðŸ˜¬, but upon reflection, I have decided to generalise the solution to cater for any arity of ingredients.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Quantity</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>number</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Mixture</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>Quantity</span>[];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span><span style=color:#f92672>*</span> <span style=color:#a6e22e>mixtures</span>(
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>teaspoons</span>: <span style=color:#66d9ef>Quantity</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>ingredients</span>: <span style=color:#66d9ef>number</span>
</span></span><span style=display:flex><span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>Generator</span>&lt;<span style=color:#f92672>Mixture</span>&gt; {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>ingredients</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>2</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>yield</span> [<span style=color:#a6e22e>teaspoons</span>];
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>quantity</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>quantity</span> <span style=color:#f92672>&lt;=</span> <span style=color:#a6e22e>teaspoons</span>; <span style=color:#a6e22e>quantity</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>mixture</span> <span style=color:#66d9ef>of</span> <span style=color:#a6e22e>mixtures</span>(
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>teaspoons</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>quantity</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>ingredients</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>    )) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>yield</span> [<span style=color:#a6e22e>quantity</span>, ...<span style=color:#a6e22e>mixture</span>];
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>The above implementation harnesses a Generator to recursively combine all the quantities of each ingredient that could be possible.
For comparison, I also decided to implement a solution that uses plain old arrays like so.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>mixtures</span> <span style=color:#f92672>=</span> (
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>teaspoons</span>: <span style=color:#66d9ef>Quantity</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>ingredients</span>: <span style=color:#66d9ef>number</span>
</span></span><span style=display:flex><span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>Mixture</span>[] <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>ingredients</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>2</span>) <span style=color:#66d9ef>return</span> [[<span style=color:#a6e22e>teaspoons</span>]];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> [...Array(<span style=color:#a6e22e>teaspoons</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>).<span style=color:#a6e22e>keys</span>()].<span style=color:#a6e22e>reduce</span>(
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>mixes</span>, <span style=color:#a6e22e>quantity</span>) <span style=color:#f92672>=&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>mixes</span>.<span style=color:#a6e22e>concat</span>(
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>mixtures</span>(
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>teaspoons</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>quantity</span>,
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>ingredients</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>        ).<span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>mixture</span> <span style=color:#f92672>=&gt;</span> [<span style=color:#a6e22e>quantity</span>, ...<span style=color:#a6e22e>mixture</span>])
</span></span><span style=display:flex><span>      ),
</span></span><span style=display:flex><span>    []
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><p>With the ability to now iterate over all the possible quantities of ingredients, we can now codify how to calculate the score of a given cookie.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>calcCookieScore</span> <span style=color:#f92672>=</span> (
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>ingredients</span>: <span style=color:#66d9ef>Ingredient</span>[],
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>mixture</span>: <span style=color:#66d9ef>Mixture</span>
</span></span><span style=display:flex><span>)<span style=color:#f92672>:</span> { <span style=color:#a6e22e>score</span>: <span style=color:#66d9ef>number</span>; <span style=color:#a6e22e>calories</span>: <span style=color:#66d9ef>number</span> } <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>properties</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>transpose</span>(<span style=color:#a6e22e>ingredients</span>).<span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>property</span> <span style=color:#f92672>=&gt;</span>
</span></span><span style=display:flex><span>    Math.<span style=color:#a6e22e>max</span>(
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>zip</span>(<span style=color:#a6e22e>property</span>, <span style=color:#a6e22e>mixture</span>).<span style=color:#a6e22e>reduce</span>((<span style=color:#a6e22e>sum</span>, [<span style=color:#a6e22e>p</span>, <span style=color:#a6e22e>m</span>]) <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>sum</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>p</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>m</span>, <span style=color:#ae81ff>0</span>),
</span></span><span style=display:flex><span>      <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    )
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>calories</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>properties</span>.<span style=color:#a6e22e>pop</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> { <span style=color:#a6e22e>score</span>: <span style=color:#66d9ef>properties.reduce</span>(<span style=color:#a6e22e>product</span>), <span style=color:#a6e22e>calories</span> };
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><p>Providing the ingredients and desired mixture, we first <code>transpose</code> the ingredients array (matrix) into rows of all the property values.
The function in question has been implemented like so.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>transpose</span> <span style=color:#f92672>=</span> &lt;<span style=color:#f92672>T</span>&gt;(<span style=color:#a6e22e>a</span>: <span style=color:#66d9ef>T</span>[][]) <span style=color:#f92672>=&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>a</span>[<span style=color:#ae81ff>0</span>].<span style=color:#a6e22e>map</span>((<span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>c</span>: <span style=color:#66d9ef>number</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>a</span>.<span style=color:#a6e22e>map</span>((<span style=color:#a6e22e>r</span>: <span style=color:#66d9ef>T</span>[]) <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>r</span>[<span style=color:#a6e22e>c</span>]));
</span></span></code></pre></div><p>We then <a href=/posts/advent-of-code-2015-day-13-knights-of-the-dinner-table/><code>zip</code></a> these properties with the desired mixture and apply the formula for calculating the score.
Finally, we <em>pop</em> the calories off the bottom and return the score (product of all the properties&rsquo; individual scores, excluding calories) and the calories themselves.</p><p>With these building blocks in place, we can then calculate all the possible scores and return the highest to answer part one ðŸŒŸ.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>RECIPE_TEASPOONS</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>100</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>part1</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>input</span>: <span style=color:#66d9ef>string</span>)<span style=color:#f92672>:</span> <span style=color:#66d9ef>number</span> <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>ingredients</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>parseIngredients</span>(<span style=color:#a6e22e>input</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>scores</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    ...<span style=color:#a6e22e>mixtures</span>(<span style=color:#a6e22e>RECIPE_TEASPOONS</span>, <span style=color:#a6e22e>ingredients</span>.<span style=color:#a6e22e>length</span>),
</span></span><span style=display:flex><span>  ].<span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>mixture</span> <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>calcCookieScore</span>(<span style=color:#a6e22e>ingredients</span>, <span style=color:#a6e22e>mixture</span>).<span style=color:#a6e22e>score</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>max</span>(<span style=color:#a6e22e>scores</span>);
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><p>Note: due to the size of the scores array that is produced, we are again required to use the <a href=/posts/advent-of-code-2015-day-13-knights-of-the-dinner-table/><code>max</code></a> function produced in a previous day&rsquo;s solution over <code>Math.max</code>.</p><h2 id=part-2>Part 2</h2><p>For part two, we are asked to determine what mixture produces the highest cookie score again, except this time the mixture&rsquo;s calories should equal 500.
In a similar manner to part one, we can calculate all the possible cookie scores; however, now we only return this score if the calories are equal to 500.
We can then locate the highest-scoring cookie from this partial listing to answer part two ðŸŒŸ.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>part2</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>input</span>: <span style=color:#66d9ef>string</span>)<span style=color:#f92672>:</span> <span style=color:#66d9ef>number</span> <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>ingredients</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>parseIngredients</span>(<span style=color:#a6e22e>input</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>scores</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    ...<span style=color:#a6e22e>mixtures</span>(<span style=color:#a6e22e>RECIPE_TEASPOONS</span>, <span style=color:#a6e22e>ingredients</span>.<span style=color:#a6e22e>length</span>),
</span></span><span style=display:flex><span>  ].<span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>mixture</span> <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>score</span>, <span style=color:#a6e22e>calories</span> } <span style=color:#f92672>=</span> <span style=color:#a6e22e>calcCookieScore</span>(<span style=color:#a6e22e>ingredients</span>, <span style=color:#a6e22e>mixture</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>calories</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>500</span> <span style=color:#f92672>?</span> <span style=color:#a6e22e>score</span> : <span style=color:#66d9ef>0</span>;
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>max</span>(<span style=color:#a6e22e>scores</span>);
</span></span><span style=display:flex><span>};
</span></span></code></pre></div></main><footer class=post__tags><a href=/archive/tag/advent-of-code>advent-of-code</a><a href=/archive/tag/advent-of-code-2015>advent-of-code-2015</a><a href=/archive/tag/typescript>typescript</a></footer></article><div class=scroll-watcher></div></main><footer class="site-footer wrapper"><div>&copy; 2025, Edd Mann</div></footer><script>(function(){document.querySelector(".site-header__mobile-navigation-button").addEventListener("click",e=>{document.documentElement.classList.toggle("mobile-navigation-open"),e.target.setAttribute("aria-expanded",e.target.getAttribute("aria-expanded")==="false"?"true":"false")});const n=document.querySelector(".site-header");let t=window.pageYOffset,e=!1;window.addEventListener("scroll",()=>{if(e)return;setTimeout(()=>{const s=window.pageYOffset;n.classList.toggle("is-sticky",s>0&&t>s),t=s,e=!1},500),e=!0})})()</script></body></html>