<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Binary Addition using Half and Full Adders within TypeScript - Edd Mann</title>
<meta name=description content="Discover how to implement binary addition in TypeScript using logic gates, half adders, and full adders for robust type safety and efficient computation."><meta name=author content="Edd Mann"><script async src="https://www.googletagmanager.com/gtag/js?id=G-ZPQ7WHNXH4"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-ZPQ7WHNXH4")}</script><meta itemprop=name content="Binary Addition using Half and Full Adders within TypeScript"><meta itemprop=description content="Recently, I watched an interesting talk about Binary Addition in the TypeScript Type System. I thought it would be fascinating to explore this concept in more depth. I wanted to pay close attention to how I could leverage the TypeScript type system to help ensure validity in the final implementation."><meta itemprop=datePublished content="2020-11-06T00:00:00+00:00"><meta itemprop=dateModified content="2020-11-06T00:00:00+00:00"><meta itemprop=wordCount content="855"><meta itemprop=keywords content="Typescript,Logic"><meta property="og:url" content="https://eddmann.com/posts/binary-addition-using-half-and-full-adders-within-typescript/"><meta property="og:site_name" content="Edd Mann"><meta property="og:title" content="Binary Addition using Half and Full Adders within TypeScript"><meta property="og:description" content="Recently, I watched an interesting talk about Binary Addition in the TypeScript Type System. I thought it would be fascinating to explore this concept in more depth. I wanted to pay close attention to how I could leverage the TypeScript type system to help ensure validity in the final implementation."><meta property="og:locale" content="en_GB"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-11-06T00:00:00+00:00"><meta property="article:modified_time" content="2020-11-06T00:00:00+00:00"><meta property="article:tag" content="Typescript"><meta property="article:tag" content="Logic"><meta name=twitter:card content="summary"><meta name=twitter:title content="Binary Addition using Half and Full Adders within TypeScript"><meta name=twitter:description content="Recently, I watched an interesting talk about Binary Addition in the TypeScript Type System. I thought it would be fascinating to explore this concept in more depth. I wanted to pay close attention to how I could leverage the TypeScript type system to help ensure validity in the final implementation."><meta name=twitter:site content="@edd_mann"><link rel="preload stylesheet" as=style href=/css/style.min.6349357a7c7c5fccfe48c11ed795a2d71fd809d82eefa5bc95dddd1002c18057.css integrity="sha256-Y0k1enx8X8z+SMEe15Wi1x/YCdgu76W8ld3dEALBgFc="><link rel=preload as=image href=/assets/x.svg><link rel=preload as=image href=/assets/github.svg><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://eddmann.com/posts/binary-addition-using-half-and-full-adders-within-typescript/></head><body><header class="site-header wrapper"><a href=https://eddmann.com/><h3 class=site-header__title>Edd Mann
<span style=--url:url(/assets/code.svg)>Developer</span></h3></a><div class=site-header__mobile-navigation-button aria-label="Toggle mobile site navigation" aria-expanded=false aria-controls=site-navigation></div><div class=site-header__navigation id=site-navigation><nav aria-label="Primary navigation"><ul class=site-header__primary-navigation><li><a href=/archive>Archive</a></li><li><a href=/projects>Projects</a></li><li><a href=/about>About</a></li></ul></nav><nav aria-label="Social links"><ul class=site-header__social-navigation><li><a class=social-icon style=--url:url(/assets/x.svg) href=https://x.com/edd_mann rel="external noopener" target=_blank>Twitter (X)</a></li><li><a class=social-icon style=--url:url(/assets/github.svg) href=https://github.com/eddmann rel="external noopener" target=_blank>GitHub</a></li></ul></nav></div></header><main class=wrapper><article><header class=page-title><h1>Binary Addition using Half and Full Adders within TypeScript</h1><time class=post__time>Nov 6, 2020</time></header><main class=prose><p>Recently, I watched an interesting talk about <a href="https://www.youtube.com/watch?v=7lyb22x9tcM" rel="external noopener" target=_blank>Binary Addition in the TypeScript Type System</a>.
I thought it would be fascinating to explore this concept in more depth.
I wanted to pay close attention to how I could leverage the TypeScript type system to help ensure validity in the final implementation.</p><h2 id=the-bit>The Bit</h2><p>Starting from basic principles and working our way up, we define the concept of a <code>Bit</code> and a fixed tuple of <code>Bits</code> using <a href=https://devblogs.microsoft.com/typescript/announcing-typescript-4-1-beta/#recursive-conditional-types rel="external noopener" target=_blank>Recursive Conditional Types</a> which will be available in TypeScript 4.1.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Bit</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Bits</span>&lt;<span style=color:#f92672>N</span> <span style=color:#a6e22e>extends</span> <span style=color:#a6e22e>number</span>&gt; <span style=color:#f92672>=</span> <span style=color:#a6e22e>N</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>N</span> <span style=color:#f92672>?</span> (<span style=color:#66d9ef>number</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>N</span> <span style=color:#f92672>?</span> <span style=color:#a6e22e>Bit</span>[] <span style=color:#f92672>:</span> <span style=color:#a6e22e>_Bits</span>&lt;<span style=color:#f92672>N</span>, <span style=color:#960050;background-color:#1e0010>[]</span>&gt;) <span style=color:#f92672>:</span> <span style=color:#66d9ef>never</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>_Bits</span>&lt;<span style=color:#f92672>N</span> <span style=color:#a6e22e>extends</span> <span style=color:#a6e22e>number</span>, <span style=color:#a6e22e>R</span> <span style=color:#a6e22e>extends</span> <span style=color:#a6e22e>Bit</span><span style=color:#960050;background-color:#1e0010>[]</span>&gt; <span style=color:#f92672>=</span> <span style=color:#a6e22e>R</span>[<span style=color:#e6db74>&#34;length&#34;</span>] <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>N</span> <span style=color:#f92672>?</span> <span style=color:#a6e22e>R</span> : <span style=color:#66d9ef>_Bits</span>&lt;<span style=color:#f92672>N</span>, <span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>Bit</span>, <span style=color:#a6e22e>...R</span><span style=color:#960050;background-color:#1e0010>]</span>&gt;;
</span></span></code></pre></div><p>From here, we create a simple factory function which, based on the desired bit width size, pads out a supplied Partial type with trailing zeros.
For this exercise, we will be storing the bits in <a href=https://en.wikipedia.org/wiki/Bit_numbering#Least_significant_bit rel="external noopener" target=_blank>Least Significant Bit</a> order.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>PartialBits</span>&lt;<span style=color:#f92672>N</span> <span style=color:#a6e22e>extends</span> <span style=color:#a6e22e>number</span>&gt; <span style=color:#f92672>=</span> <span style=color:#a6e22e>Partial</span>&lt;<span style=color:#f92672>Bits</span>&lt;<span style=color:#f92672>N</span>&gt;&gt;;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>Bits</span> <span style=color:#f92672>=</span> &lt;<span style=color:#f92672>N</span> <span style=color:#a6e22e>extends</span> <span style=color:#a6e22e>number</span>&gt;(<span style=color:#a6e22e>size</span>: <span style=color:#66d9ef>N</span>) <span style=color:#f92672>=&gt;</span> (<span style=color:#a6e22e>bits</span>: <span style=color:#66d9ef>PartialBits</span>&lt;<span style=color:#f92672>N</span>&gt;)<span style=color:#f92672>:</span> <span style=color:#a6e22e>Bits</span>&lt;<span style=color:#f92672>N</span>&gt; <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>result</span> <span style=color:#f92672>=</span> Array&lt;<span style=color:#f92672>Bit</span>&gt;(<span style=color:#a6e22e>size</span>) <span style=color:#66d9ef>as</span> <span style=color:#a6e22e>Bits</span>&lt;<span style=color:#f92672>N</span>&gt;;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>size</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>result</span>[<span style=color:#a6e22e>i</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>bits</span>[<span style=color:#a6e22e>i</span>] <span style=color:#f92672>||</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>result</span>;
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>Int8</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>Bits</span>(<span style=color:#ae81ff>8</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>Int16</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>Bits</span>(<span style=color:#ae81ff>16</span>);
</span></span></code></pre></div><p>In doing this, we are now leveraging the type system to ensure that any supplied bits do not exceed the allocated representation width.
This is highlighted in the examples below.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#a6e22e>Int8</span>([<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>]); <span style=color:#75715e>// valid
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>Int8</span>([<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>]); <span style=color:#75715e>// invalid
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>Int16</span>([<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>]); <span style=color:#75715e>// valid
</span></span></span></code></pre></div><h2 id=the-logic-gates>The Logic Gates</h2><p>So, to perform the final addition, we need to provide the tooling around being able to construct logic gates based on supplied bits.
We are able to achieve this using the approach laid out below.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>and</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>a</span>: <span style=color:#66d9ef>Bit</span>, <span style=color:#a6e22e>b</span>: <span style=color:#66d9ef>Bit</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>Bit</span> <span style=color:#f92672>=&gt;</span> (<span style=color:#a6e22e>a</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>b</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>?</span> <span style=color:#a6e22e>1</span> : <span style=color:#66d9ef>0</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>or</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>a</span>: <span style=color:#66d9ef>Bit</span>, <span style=color:#a6e22e>b</span>: <span style=color:#66d9ef>Bit</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>Bit</span> <span style=color:#f92672>=&gt;</span> (<span style=color:#a6e22e>a</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>b</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>?</span> <span style=color:#a6e22e>1</span> : <span style=color:#66d9ef>0</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>invert</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>a</span>: <span style=color:#66d9ef>Bit</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>Bit</span> <span style=color:#f92672>=&gt;</span> (<span style=color:#a6e22e>a</span> <span style=color:#f92672>?</span> <span style=color:#a6e22e>0</span> : <span style=color:#66d9ef>1</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>nand</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>a</span>: <span style=color:#66d9ef>Bit</span>, <span style=color:#a6e22e>b</span>: <span style=color:#66d9ef>Bit</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>Bit</span> <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>invert</span>(<span style=color:#a6e22e>and</span>(<span style=color:#a6e22e>a</span>, <span style=color:#a6e22e>b</span>));
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>nor</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>a</span>: <span style=color:#66d9ef>Bit</span>, <span style=color:#a6e22e>b</span>: <span style=color:#66d9ef>Bit</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>Bit</span> <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>invert</span>(<span style=color:#a6e22e>or</span>(<span style=color:#a6e22e>a</span>, <span style=color:#a6e22e>b</span>));
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>xor</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>a</span>: <span style=color:#66d9ef>Bit</span>, <span style=color:#a6e22e>b</span>: <span style=color:#66d9ef>Bit</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>Bit</span> <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>and</span>(<span style=color:#a6e22e>or</span>(<span style=color:#a6e22e>a</span>, <span style=color:#a6e22e>b</span>), <span style=color:#a6e22e>nand</span>(<span style=color:#a6e22e>a</span>, <span style=color:#a6e22e>b</span>));
</span></span></code></pre></div><h2 id=the-half-adder>The Half Adder</h2><p>The <a href=https://en.wikipedia.org/wiki/Adder_%28electronics%29#Half_adder rel="external noopener" target=_blank>Half Adder</a> is used to add two single bits A and B together, resulting in sum and carry outputs.
We can build such a circuit using the following three approaches – the simplest of which is shown first, comprising a single <code>XOR</code> and <code>AND</code> gate.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Addition</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>sum</span>: <span style=color:#66d9ef>Bit</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>carry</span>: <span style=color:#66d9ef>Bit</span>;
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>HalfAdder</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>a</span>: <span style=color:#66d9ef>Bit</span>, <span style=color:#a6e22e>b</span>: <span style=color:#66d9ef>Bit</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>Addition</span>;
</span></span></code></pre></div><h3 id=simplest-half-adder>Simplest Half-Adder</h3><p><a href=https://www.electronicshub.org/half-adder-and-full-adder-circuits/#Half_Adder rel="external noopener" target=_blank><picture><source type=image/webp srcset=/posts/binary-addition-using-half-and-full-adders-within-typescript/half-adder_hu_1821cdecffa43f6.webp><source type=image/jpeg srcset=/posts/binary-addition-using-half-and-full-adders-within-typescript/half-adder_hu_eb58c025d8d8fb49.jpg><img src=/posts/binary-addition-using-half-and-full-adders-within-typescript/half-adder_hu_eb58c025d8d8fb49.jpg alt="Simplest Half-Adder" loading=lazy></picture></a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>halfAdder</span>: <span style=color:#66d9ef>HalfAdder</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>a</span>, <span style=color:#a6e22e>b</span>) <span style=color:#f92672>=&gt;</span> ({
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>sum</span>: <span style=color:#66d9ef>xor</span>(<span style=color:#a6e22e>a</span>, <span style=color:#a6e22e>b</span>),
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>carry</span>: <span style=color:#66d9ef>and</span>(<span style=color:#a6e22e>a</span>, <span style=color:#a6e22e>b</span>),
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><h3 id=half-adder-using-only-nand-gates>Half-Adder using only NAND Gates</h3><p><a href=https://www.electronicshub.org/half-adder-and-full-adder-circuits/#Half_Adder_using_NAND_Gates rel="external noopener" target=_blank><picture><source type=image/webp srcset=/posts/binary-addition-using-half-and-full-adders-within-typescript/half-adder-nand_hu_c69b0551c5e31377.webp><source type=image/jpeg srcset=/posts/binary-addition-using-half-and-full-adders-within-typescript/half-adder-nand_hu_f43b5ed140eef5e6.jpg><img src=/posts/binary-addition-using-half-and-full-adders-within-typescript/half-adder-nand_hu_f43b5ed140eef5e6.jpg alt="Half-Adder using only NAND Gates" loading=lazy></picture></a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>halfAdderUsingNand</span>: <span style=color:#66d9ef>HalfAdder</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>a</span>, <span style=color:#a6e22e>b</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>ab</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>nand</span>(<span style=color:#a6e22e>a</span>, <span style=color:#a6e22e>b</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>sum</span>: <span style=color:#66d9ef>nand</span>(<span style=color:#a6e22e>nand</span>(<span style=color:#a6e22e>ab</span>, <span style=color:#a6e22e>a</span>), <span style=color:#a6e22e>nand</span>(<span style=color:#a6e22e>ab</span>, <span style=color:#a6e22e>b</span>)),
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>carry</span>: <span style=color:#66d9ef>nand</span>(<span style=color:#a6e22e>ab</span>, <span style=color:#a6e22e>ab</span>),
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><h3 id=half-adder-using-only-nor-gates>Half-Adder using only NOR Gates</h3><p><a href=https://www.electronicshub.org/half-adder-and-full-adder-circuits/#Half_Adder_using_NOR_Gates rel="external noopener" target=_blank><picture><source type=image/webp srcset=/posts/binary-addition-using-half-and-full-adders-within-typescript/half-adder-nor_hu_c9a99250ea54bc51.webp><source type=image/jpeg srcset=/posts/binary-addition-using-half-and-full-adders-within-typescript/half-adder-nor_hu_e03ab2eba99e9f3a.jpg><img src=/posts/binary-addition-using-half-and-full-adders-within-typescript/half-adder-nor_hu_e03ab2eba99e9f3a.jpg alt="Half-Adder using only NOR Gates" loading=lazy></picture></a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>halfAdderUsingNor</span>: <span style=color:#66d9ef>HalfAdder</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>a</span>, <span style=color:#a6e22e>b</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>carry</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>nor</span>(<span style=color:#a6e22e>nor</span>(<span style=color:#a6e22e>a</span>, <span style=color:#a6e22e>a</span>), <span style=color:#a6e22e>nor</span>(<span style=color:#a6e22e>b</span>, <span style=color:#a6e22e>b</span>));
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>sum</span>: <span style=color:#66d9ef>nor</span>(<span style=color:#a6e22e>carry</span>, <span style=color:#a6e22e>nor</span>(<span style=color:#a6e22e>a</span>, <span style=color:#a6e22e>b</span>)),
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>carry</span>,
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><h2 id=the-full-adder>The Full Adder</h2><p>On its own, a half adder is unable to perform the binary addition we hope to achieve.
To overcome this, we can use a <a href=https://en.wikipedia.org/wiki/Adder_%28electronics%29#Full_adder rel="external noopener" target=_blank>Full Adder</a> which is able to handle a subsequent third bit within the input – this being the carry from a previous operation.
This adder can be constructed by using two half adders as follows.</p><p><a href=https://www.electronicshub.org/half-adder-and-full-adder-circuits/#Full_Adder rel="external noopener" target=_blank><picture><source type=image/webp srcset=/posts/binary-addition-using-half-and-full-adders-within-typescript/full-adder_hu_2a02d9e734681a4b.webp><source type=image/jpeg srcset=/posts/binary-addition-using-half-and-full-adders-within-typescript/full-adder_hu_a324ae63d5dd3fbe.jpg><img src=/posts/binary-addition-using-half-and-full-adders-within-typescript/full-adder_hu_a324ae63d5dd3fbe.jpg alt="The Full Adder" loading=lazy></picture></a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>FullAdder</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>a</span>: <span style=color:#66d9ef>Bit</span>, <span style=color:#a6e22e>b</span>: <span style=color:#66d9ef>Bit</span>, <span style=color:#a6e22e>c</span>: <span style=color:#66d9ef>Bit</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>Addition</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>fullAdder</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>halfAdder</span>: <span style=color:#66d9ef>HalfAdder</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>FullAdder</span> <span style=color:#f92672>=&gt;</span> (<span style=color:#a6e22e>a</span>, <span style=color:#a6e22e>b</span>, <span style=color:#a6e22e>c</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>ab</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>halfAdder</span>(<span style=color:#a6e22e>a</span>, <span style=color:#a6e22e>b</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>abc</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>halfAdder</span>(<span style=color:#a6e22e>ab</span>.<span style=color:#a6e22e>sum</span>, <span style=color:#a6e22e>c</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>sum</span>: <span style=color:#66d9ef>abc.sum</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>carry</span>: <span style=color:#66d9ef>or</span>(<span style=color:#a6e22e>ab</span>.<span style=color:#a6e22e>carry</span>, <span style=color:#a6e22e>abc</span>.<span style=color:#a6e22e>carry</span>),
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><h2 id=binary-addition>Binary Addition</h2><p>With this tooling in place, we can then construct an addition function.
Based on a bit result width size, we supply partials of this bit width and in turn use the full adder to calculate the final result.
Leveraging the type system, we are able to ensure that we do not permit inputs that exceed the allocated return type.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>add</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>fullAdder</span>: <span style=color:#66d9ef>FullAdder</span>) <span style=color:#f92672>=&gt;</span> &lt;<span style=color:#f92672>N</span> <span style=color:#a6e22e>extends</span> <span style=color:#a6e22e>number</span>&gt;(<span style=color:#a6e22e>size</span>: <span style=color:#66d9ef>N</span>) <span style=color:#f92672>=&gt;</span> (
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>a</span>: <span style=color:#66d9ef>PartialBits</span>&lt;<span style=color:#f92672>N</span>&gt;,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>b</span>: <span style=color:#66d9ef>PartialBits</span>&lt;<span style=color:#f92672>N</span>&gt;
</span></span><span style=display:flex><span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>Bits</span>&lt;<span style=color:#f92672>N</span>&gt; <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>carry</span>: <span style=color:#66d9ef>Bit</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>result</span> <span style=color:#f92672>=</span> Array&lt;<span style=color:#f92672>Bit</span>&gt;(<span style=color:#a6e22e>size</span>) <span style=color:#66d9ef>as</span> <span style=color:#a6e22e>Bits</span>&lt;<span style=color:#f92672>N</span>&gt;;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>size</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>    ({ <span style=color:#a6e22e>sum</span>: <span style=color:#66d9ef>result</span>[<span style=color:#a6e22e>i</span>], <span style=color:#a6e22e>carry</span> } <span style=color:#f92672>=</span> <span style=color:#a6e22e>fullAdder</span>(<span style=color:#a6e22e>a</span>[<span style=color:#a6e22e>i</span>] <span style=color:#f92672>||</span> <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>b</span>[<span style=color:#a6e22e>i</span>] <span style=color:#f92672>||</span> <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>carry</span>));
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>result</span>;
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><p>Finally, we can test out this implementation as follows.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>addInt8</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>add</span>(<span style=color:#a6e22e>fullAdder</span>(<span style=color:#a6e22e>halfAdder</span>))(<span style=color:#ae81ff>8</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>addInt16</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>add</span>(<span style=color:#a6e22e>fullAdder</span>(<span style=color:#a6e22e>halfAdderUsingNand</span>))(<span style=color:#ae81ff>16</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>addInt8</span>(<span style=color:#a6e22e>Int8</span>([<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>]), <span style=color:#a6e22e>Int8</span>([<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>])); <span style=color:#75715e>// 01001000
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>addInt8</span>(<span style=color:#a6e22e>Int16</span>([<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>]), <span style=color:#a6e22e>Int8</span>([<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>])); <span style=color:#75715e>// invalid
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>addInt16</span>(<span style=color:#a6e22e>Int16</span>([<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>]), <span style=color:#a6e22e>Int8</span>([<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>])); <span style=color:#75715e>// 0011000001000000
</span></span></span></code></pre></div><p>Notice the type system again helping to enforce width rules with regard to bits in the second example.
If you are interested in experimenting with the demonstration, you can visit <a href="https://www.typescriptlang.org/play?ts=4.1.0-beta#code/C4TwDgpgBAQglsKBeKAGKAfKBGA3AKFElgQGcAeAOSggA9gIA7AE1KkYFcBbAIwgCcAfMijU6DFm2oB+KAApOvATXpNWoqLPjAA2gF0oALigB9bRUoAaKPsEBKI+wgA3AQSLQzZKionrFfPzWAEq+amzatiLBOgBEADZMAObAABaxBuLhGrKhxl7AFtY62tYAdBXBeoLu4NAACgCG-MBwjfHmPlmS7NyBwihNLW3x5J2UgjX4+ADGAPaMpIjmIl2qPQECgnKkcABeEMaUDkjCcjxkxkOt7eP2xnfIwgDe+FBQiYj8EKQc8YgoACC-H4jRAYwQ212BwcjQi3gmBDeUAAZnN+PJPlA4CJULhsVByFBoRB8XAANTkhyvd7vb6-f46OAGFAXQpMgwYLB45EAX2mdIgwA4-EYUHpf2ABF5SPmi0QAElGMAABwicxyFV2AhypZQJXAbAANnVZDkxu1011iEaLBEckaDwQ1h4TuAdjdT3kjWQSBQ2CgADJA1AeL7-ZocI5UJbrVB0fbHSRgC63R7k16HeGo1zQ9mA7IA8YYzqFnq4IxXC1E2nPadvZH0MZsLGy4hGLbmDXk6nk+ntF6K1XgA6WA6XXZW-L2AmUA63b3tP2EIPKwIR+jx6HJ6Xp7RZ96F6Haxn6525JvGhPrB2x1ft5bCHUoIDmMwEHAFiIacTuG6CO8MzNPwID-vgMrTB4UAABLtCir7MMoc5JqUx59l6CEfgssptlAqRwQhAjGLB8TwW+SHehOmY-r8XDGPu-BbjwdiWMiQEgqBUDnvezGsbyj5xvhpGEfwACquyMEklCdsRBHkRiyFUfWP5xo0YYoLezBMZagrCqKUA-u8tHGJpCjcTw1iNCx7DmROLHIoBwGcaZamWbxfLSjh05CWRiFiRJUnorJwnyYmSkvGxuHsSBIiMJucWMfeVk3puFkPgB4pCiKYqGb+dEzox0UgCliV2axtJQEV5VQBBEFPsQABifzxCJ3aoa6PaVWmGFvlhjBeXqKLNa1c4+SJwW+QI6ZNfELWhfWTHWDMJwRYBuFqSIY3ydpGWqTwMybXJfkOjwZS0UtOmZXpOUOXlxhqTMZ3cNVjkccYl6nVVXH7WURX2e8tUDTab72kNs3jVAM1zX5K2EmI6z+H0Ww7PshyiLDcjIkm1wjHc1UdTjtwIoI+DLoUVADKtHxCpVTl1mgGVYhK-wiMCoLgtoUKo7C8Lk4iAqogmchYjiKB4gSRIkmSlLUrdcjPHdmUMrozJLU5NUiGD0MCA6HKYNyLp67mqBqxxO58gL3zXUrkqeVa61vgaaooI0b5yFrIlyFtMN2JqU56q7zAGsaIiB+7w3bd7AjiRWUmdpO5pGgJZZzIkv2JM0cj+6nEBlPEcxJA6jvKiqchO3IOjYNYJs4NY2B6NZ5eV9XdcN+buo53nBdF0HyrGmXfdGhXVdoHXY+1xPI9Tw31hN1P4-15OlpAA" rel="external noopener" target=_blank>this TypeScript playground</a>.</p></main><footer class=post__tags><a href=/archive/tag/typescript>typescript</a><a href=/archive/tag/logic>logic</a></footer></article></main><footer class="site-footer wrapper"><div>&copy; 2025, Edd Mann</div></footer><script>(function(){document.querySelector(".site-header__mobile-navigation-button").addEventListener("click",e=>{document.documentElement.classList.toggle("mobile-navigation-open"),e.target.setAttribute("aria-expanded",e.target.getAttribute("aria-expanded")==="false"?"true":"false")});const n=document.querySelector(".site-header");let t=window.pageYOffset,e=!1;window.addEventListener("scroll",()=>{if(e)return;const s=window.pageYOffset;window.requestAnimationFrame(()=>{n.classList.toggle("is-sticky",t>s),t=s,e=!1}),e=!0})})()</script></body></html>