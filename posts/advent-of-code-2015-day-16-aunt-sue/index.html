<!doctype html>
<html lang="en">
    <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Solving the Advent of Code 2015 Day 16 puzzle using TypeScript">

    <title>
        
            Advent of Code 2015 - Day 16 - Aunt Sue &middot; Edd Mann
        
    </title>

    <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZPQ7WHNXH4"></script>
    <script>
       window.dataLayer = window.dataLayer || [];
       function gtag(){dataLayer.push(arguments);}
       gtag('js', new Date());
       gtag('config', 'G-ZPQ7WHNXH4');
    </script>

    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,700italic,400italic">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/styles.css">

    <link rel="shortcut icon" href="/favicon.ico">

    <link rel="alternate" href="/rss.xml" title="" type="application/rss+xml">

    
</head>

    <body>
        <div class="container content">
            <header class="masthead">
                <h3 class="masthead-title">
                    <a href="/" title="Home">Edd Mann</a>
                    <small><i class="fa fa-code"></i> Developer</small>
                </h3>
                <nav>
                    <a href="https://twitter.com/edd_mann"><i class="fa fa-twitter"></i></a>
                    <a href="https://github.com/eddmann"><i class="fa fa-github"></i></a>
                    <a href="mailto:the@eddmann.com"><i class="fa fa-envelope"></i></a>
                </nav>
                <div class="cf"></div>
            </header>

            <main>
                <article class="post">
    <h1 class="post-title">Advent of Code 2015 - Day 16 - Aunt Sue</h1>
    <time datetime="2021-02-09T00:00:00+00:00" class="post-date">09 Feb 2021</time>
    <p>On the sixteenth day of Advent of Code 2015 we are tasked with working out which Aunt Sue (there are 500!?) sent us a gift, so we can send them a thank you card.</p>



<h2 id="part-1">Part 1</h2>

<p>For part one we are provided with a list of all the Aunt Sues (identified 1-500) and <em>things</em> that we remember about each one.
We have been gifted a <em>My First Crime Scene Analysis Machine</em> so we are able to get readings from the provided wrapping paper.
To determine which Aunt Sue sent the gift we must compare these readings with all the properties we know about them.</p>

<p>To begin, we parse the input into a form with can subsequently work with.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">type</span> <span class="nx">Aunt</span> <span class="o">=</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span> <span class="nl">properties</span><span class="p">:</span> <span class="p">{</span> <span class="p">[</span><span class="na">name</span><span class="p">:</span> <span class="kr">string</span><span class="p">]:</span> <span class="kr">number</span> <span class="p">}</span> <span class="p">};</span>

<span class="kd">const</span> <span class="nx">parseAunts</span> <span class="o">=</span> <span class="p">(</span><span class="nx">input</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="nx">Aunt</span><span class="p">[]</span> <span class="o">=&gt;</span>
  <span class="nx">input</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">'</span><span class="se">\n</span><span class="dl">'</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span><span class="nx">line</span> <span class="o">=&gt;</span> <span class="p">({</span>
    <span class="na">id</span><span class="p">:</span> <span class="nx">toInt</span><span class="p">(</span><span class="nx">line</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/</span><span class="se">\d</span><span class="sr">+/</span><span class="p">)[</span><span class="mi">0</span><span class="p">]),</span>
    <span class="na">properties</span><span class="p">:</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">fromEntries</span><span class="p">(</span>
      <span class="p">[...</span><span class="nx">line</span><span class="p">.</span><span class="nx">matchAll</span><span class="p">(</span><span class="sr">/</span><span class="se">(\w</span><span class="sr">+</span><span class="se">)</span><span class="sr">: </span><span class="se">(\d</span><span class="sr">+</span><span class="se">)</span><span class="sr">/g</span><span class="p">)].</span><span class="nx">map</span><span class="p">(([</span><span class="nx">_</span><span class="p">,</span> <span class="nx">k</span><span class="p">,</span> <span class="nx">v</span><span class="p">])</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="nx">k</span><span class="p">,</span>
        <span class="nx">toInt</span><span class="p">(</span><span class="nx">v</span><span class="p">),</span>
      <span class="p">])</span>
    <span class="p">),</span>
  <span class="p">}));</span>
</code></pre></div></div>

<p>With each Aunts properties now parsed, we move on to creating several number-based comparator <a href="https://en.wikipedia.org/wiki/Currying">curried</a> functions which will come in handy going forward.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">type</span> <span class="nx">Comparator</span> <span class="o">=</span> <span class="p">(</span><span class="nx">value</span><span class="p">:</span> <span class="kr">number</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">boolean</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">equalTo</span> <span class="o">=</span> <span class="p">(</span><span class="nx">x</span><span class="p">:</span> <span class="kr">number</span><span class="p">):</span> <span class="nx">Comparator</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="nx">y</span><span class="p">:</span> <span class="kr">number</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">x</span> <span class="o">===</span> <span class="nx">y</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">lessThan</span> <span class="o">=</span> <span class="p">(</span><span class="nx">x</span><span class="p">:</span> <span class="kr">number</span><span class="p">):</span> <span class="nx">Comparator</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="nx">y</span><span class="p">:</span> <span class="kr">number</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">y</span> <span class="o">&lt;</span> <span class="nx">x</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">greaterThan</span> <span class="o">=</span> <span class="p">(</span><span class="nx">x</span><span class="p">:</span> <span class="kr">number</span><span class="p">):</span> <span class="nx">Comparator</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="nx">y</span><span class="p">:</span> <span class="kr">number</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">y</span> <span class="o">&gt;</span> <span class="nx">x</span><span class="p">;</span>
</code></pre></div></div>

<p>In doing this, we are then able to provide the supplied reading and comparator logic to a function which will find the given Aunt which matches all these conditions.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">findAuntWithReadings</span> <span class="o">=</span> <span class="p">(</span>
  <span class="nx">aunts</span><span class="p">:</span> <span class="nx">Aunt</span><span class="p">[],</span>
  <span class="nx">readings</span><span class="p">:</span> <span class="p">{</span> <span class="p">[</span><span class="nx">name</span><span class="p">:</span> <span class="kr">string</span><span class="p">]:</span> <span class="nx">Comparator</span> <span class="p">}</span>
<span class="p">):</span> <span class="nx">Aunt</span> <span class="o">=&gt;</span>
  <span class="nx">aunts</span><span class="p">.</span><span class="nx">find</span><span class="p">(({</span> <span class="nx">properties</span> <span class="p">})</span> <span class="o">=&gt;</span>
    <span class="nb">Object</span><span class="p">.</span><span class="nx">entries</span><span class="p">(</span><span class="nx">properties</span><span class="p">).</span><span class="nx">every</span><span class="p">(([</span><span class="nx">k</span><span class="p">,</span> <span class="nx">v</span><span class="p">])</span> <span class="o">=&gt;</span> <span class="nx">readings</span><span class="p">[</span><span class="nx">k</span><span class="p">](</span><span class="nx">v</span><span class="p">))</span>
  <span class="p">);</span>
</code></pre></div></div>

<p>The function above iterates over all the supplied Auntsâ€™ properties and returns the first one that meets all the readings critiera.
For part one we are asked to find the Aunt which matches the <em>exact</em> reading values - supplying these readings to the function above returns the desired Aunts identifier ðŸŒŸ.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">part1</span> <span class="o">=</span> <span class="p">(</span><span class="nx">input</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="kr">number</span> <span class="o">=&gt;</span>
  <span class="nx">findAuntWithReadings</span><span class="p">(</span><span class="nx">parseAunts</span><span class="p">(</span><span class="nx">input</span><span class="p">),</span> <span class="p">{</span>
    <span class="na">children</span><span class="p">:</span> <span class="nx">equalTo</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
    <span class="na">cats</span><span class="p">:</span> <span class="nx">equalTo</span><span class="p">(</span><span class="mi">7</span><span class="p">),</span>
    <span class="na">samoyeds</span><span class="p">:</span> <span class="nx">equalTo</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
    <span class="na">pomeranians</span><span class="p">:</span> <span class="nx">equalTo</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
    <span class="na">akitas</span><span class="p">:</span> <span class="nx">equalTo</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
    <span class="na">vizslas</span><span class="p">:</span> <span class="nx">equalTo</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
    <span class="na">goldfish</span><span class="p">:</span> <span class="nx">equalTo</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span>
    <span class="na">trees</span><span class="p">:</span> <span class="nx">equalTo</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
    <span class="na">cars</span><span class="p">:</span> <span class="nx">equalTo</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
    <span class="na">perfumes</span><span class="p">:</span> <span class="nx">equalTo</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
  <span class="p">}).</span><span class="nx">id</span><span class="p">;</span>
</code></pre></div></div>

<h2 id="part-2">Part 2</h2>

<p>For part two we are required to tweak the readings criteria and supply several greater/less-than comparators in place of the equality checks as so:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">part2</span> <span class="o">=</span> <span class="p">(</span><span class="nx">input</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="kr">number</span> <span class="o">=&gt;</span>
  <span class="nx">findAuntWithReadings</span><span class="p">(</span><span class="nx">parseAunts</span><span class="p">(</span><span class="nx">input</span><span class="p">),</span> <span class="p">{</span>
    <span class="na">children</span><span class="p">:</span> <span class="nx">equalTo</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
    <span class="na">cats</span><span class="p">:</span> <span class="nx">greaterThan</span><span class="p">(</span><span class="mi">7</span><span class="p">),</span>
    <span class="na">samoyeds</span><span class="p">:</span> <span class="nx">equalTo</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
    <span class="na">pomeranians</span><span class="p">:</span> <span class="nx">lessThan</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
    <span class="na">akitas</span><span class="p">:</span> <span class="nx">equalTo</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
    <span class="na">vizslas</span><span class="p">:</span> <span class="nx">equalTo</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
    <span class="na">goldfish</span><span class="p">:</span> <span class="nx">lessThan</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span>
    <span class="na">trees</span><span class="p">:</span> <span class="nx">greaterThan</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
    <span class="na">cars</span><span class="p">:</span> <span class="nx">equalTo</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
    <span class="na">perfumes</span><span class="p">:</span> <span class="nx">equalTo</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
  <span class="p">}).</span><span class="nx">id</span><span class="p">;</span>
</code></pre></div></div>

<p>With these amendments made we can use the same functions as implemented in part one to return the revised found Aunts identifier ðŸŒŸ.</p>

</article>

            </main>

            <footer class="footer">
                <img src="https://www.gravatar.com/avatar/c5c2978bb14d16460f73399c394b6acd?s=160">
                <ul>
                    <li>Developer at <a href="http://www.mybuilder.com/">MyBuilder</a></li>
                    <li><a href="http://threedevsandamaybe.com/">Three Devs and a Maybe</a> podcast co-host</li>
                    <li>All ramblings can be found in the <a href="/archive/">Archive</a></li>
                </ul>
                <div class="cf"></div>
            </footer>
        </div>
    </body>
</html>
