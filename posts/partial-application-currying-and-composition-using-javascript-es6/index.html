<!doctype html>
<html lang="en">
    <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Expressing Partial Application, Currying and Composition in a succinct manner using ES2015">

    <title>
        
            Partial Application (Currying) and Composition using JavaScript ES6 &middot; Edd Mann
        
    </title>

    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,700italic,400italic">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/styles.css">

    <link rel="shortcut icon" href="/favicon.ico">

    <link rel="alternate" href="/rss.xml" title="" type="application/rss+xml">

    <script>
        var _gaq=[['_setAccount','UA-32512081-1'],['_setDomainName','eddmann.com'],['_trackPageview']];
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = 'https://ssl.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>
</head>

    <body>
        <div class="container content">
            <header class="masthead">
                <h3 class="masthead-title">
                    <a href="/" title="Home">Edd Mann</a>
                    <small><i class="fa fa-code"></i> Developer</small>
                </h3>
                <nav>
                    <a href="https://twitter.com/edd_mann"><i class="fa fa-twitter"></i></a>
                    <a href="https://github.com/eddmann"><i class="fa fa-github"></i></a>
                    <a href="mailto:the@eddmann.com"><i class="fa fa-envelope"></i></a>
                </nav>
                <div class="cf"></div>
            </header>

            <main>
                <article class="post">
    <h1 class="post-title">Partial Application (Currying) and Composition using JavaScript ES6</h1>
    <time datetime="2015-04-15T00:00:00+00:00" class="post-date">15 Apr 2015</time>
    <p>Completion of a recent project sparked discussion surrounding JavaScript ES6 within the team, in part due to the welcome addition of <a href="http://webpack.github.io/">Webpack</a> into our stack.
<a href="http://en.wikipedia.org/wiki/ECMAScript">ECMAScript 6</a> is an upcoming standard which will eventually be used as a reference for all future JavaScript implementations (client and server-side).</p>



<p>At this time many of the popular browsers support a subset of the <a href="https://github.com/lukehoban/es6features">new features</a> present in the proposed standard.
This is great for experimentation but can be seen as an issue if you wish to target your currently supported browser list.
However, with the use of transpilers such as <a href="https://github.com/google/traceur-compiler">Traceur</a> or <a href="https://babeljs.io/">Babel</a> (formally 6to5), we can write code using the latest standards which in-turn gets automatically transformed into a representation compatible with ECMAScript 5 runtimes.</p>

<p>On a completely separate topic, as Sten’s <a href="https://tech.mybuilder.com/folds/">previous article</a> may have shown, the team is currently also very interested in Functional programming and the concepts that accompany it.
I too find this paradigm very interesting to investigate, and through recent completion of a <a href="https://frontendmasters.com/courses/functional-javascript/">Front-end masters course</a> on the subject I found a way to meld my desire to explore ES6 along with some of these functional concepts.</p>

<h2 id="partial-application-and-currying">Partial Application and Currying</h2>

<p>The ability to partially apply (or even more strictly <a href="http://en.wikipedia.org/wiki/Currying">curry</a>) functions is incredibly important within this paradigm, allowing us to reuse functions in many different ways.
There are many examples of implementing such behavior in JavaScript, all typically following an imperative mindset.
The implementation shown below instead uses recursion along with some of the new features present in ES6 to succinctly codify the definition of what partial application truly is.</p>

<!-- prettier-ignore -->
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">curry</span> <span class="o">=</span> <span class="p">(</span><span class="nx">fn</span><span class="p">,</span> <span class="p">...</span><span class="nx">args</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">_curry</span> <span class="o">=</span> <span class="p">(</span><span class="nx">args</span><span class="p">)</span> <span class="o">=&gt;</span>
    <span class="nx">args</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">length</span>
      <span class="p">?</span> <span class="p">(...</span><span class="nx">_args</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">_curry</span><span class="p">([...</span><span class="nx">args</span><span class="p">,</span> <span class="p">...</span><span class="nx">_args</span><span class="p">])</span>
      <span class="p">:</span> <span class="nx">fn</span><span class="p">(...</span><span class="nx">args</span><span class="p">);</span>

  <span class="k">return</span> <span class="nx">_curry</span><span class="p">(</span><span class="nx">args</span><span class="p">);</span>
<span class="p">};</span>
</code></pre></div></div>

<p>Reading the small example above you will first notice the use of the ‘var’ replacement <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/let">‘let’</a> keyword, which provides you with block-scoped binding and no implicit variable hoisting.
The variadic functions definition uses the new <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions">arrow syntax</a> along with the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parameters">rest operator</a> to collect any arguments that are supplied along with the function to eventually apply.
Following this, a private recursive function is called, which in its base-case applies all the collected arguments to the specified function and returns the result.
If this condition has not yet been met, a new function is instead returned with a call to the internal function, supplying it with the accumulated and new arguments using the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_operator">spread operator</a>.
This example also takes advantage of the arrow functions behaviour to return the result if only one statement has been defined, removing the need for unnecessary ‘return’ keywords.</p>

<h2 id="composition">Composition</h2>

<p>Another Functional building block is the ability to create new functionality by way of function composition.
In a similar manner to how we implemented partial application, we are also able to use ES6’s new features to aid us in creating a composition function.</p>

<!-- prettier-ignore -->
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">compose</span> <span class="o">=</span> <span class="p">(...</span><span class="nx">fns</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">fns</span><span class="p">.</span><span class="nx">reduce</span><span class="p">((</span><span class="nx">f</span><span class="p">,</span> <span class="nx">g</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(...</span><span class="nx">args</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">f</span><span class="p">(</span><span class="nx">g</span><span class="p">(...</span><span class="nx">args</span><span class="p">)));</span>
</code></pre></div></div>

<p>The one-line implementation shown above clearly highlights how explicit we are able to be when using the new arrow and rest-spread syntax.
In this example each supplied function is initially stored in an array using the ‘rest’ operator.
This value is subsequently reduced down to a single function by applying the result of the subject function with the accumulation of the others.
I feel this clearly shows how declarative we are now able to be in JavaScript, aided in part by these new ES6 features.</p>

</article>

            </main>

            <footer class="footer">
                <img src="https://www.gravatar.com/avatar/c5c2978bb14d16460f73399c394b6acd?s=160">
                <ul>
                    <li>Developer at <a href="http://www.mybuilder.com/">MyBuilder</a></li>
                    <li><a href="http://threedevsandamaybe.com/">Three Devs and a Maybe</a> podcast co-host</li>
                    <li>All ramblings can be found in the <a href="/archive/">Archive</a></li>
                </ul>
                <div class="cf"></div>
            </footer>
        </div>
    </body>
</html>
