<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Advent of Code 2016 - Day 2 - Bathroom Security - Edd Mann</title>
<meta name=description content="Solving the Advent of Code 2016 Day 2 puzzle using Python."><meta name=author content="Edd Mann"><script async src="https://www.googletagmanager.com/gtag/js?id=G-ZPQ7WHNXH4"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-ZPQ7WHNXH4")}</script><meta itemprop=name content="Advent of Code 2016 - Day 2 - Bathroom Security"><meta itemprop=description content="On the second day of Advent of Code 2016, we are asked to work out what a bathroom code is based on the supplied instructions."><meta itemprop=datePublished content="2021-03-24T00:00:00+00:00"><meta itemprop=dateModified content="2021-03-24T00:00:00+00:00"><meta itemprop=wordCount content="515"><meta itemprop=keywords content="Advent-of-Code,Advent-of-Code-2016,Python"><meta property="og:url" content="https://eddmann.com/posts/advent-of-code-2016-day-2-bathroom-security/"><meta property="og:site_name" content="Edd Mann"><meta property="og:title" content="Advent of Code 2016 - Day 2 - Bathroom Security"><meta property="og:description" content="On the second day of Advent of Code 2016, we are asked to work out what a bathroom code is based on the supplied instructions."><meta property="og:locale" content="en_GB"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-03-24T00:00:00+00:00"><meta property="article:modified_time" content="2021-03-24T00:00:00+00:00"><meta property="article:tag" content="Advent-of-Code"><meta property="article:tag" content="Advent-of-Code-2016"><meta property="article:tag" content="Python"><meta name=twitter:card content="summary"><meta name=twitter:title content="Advent of Code 2016 - Day 2 - Bathroom Security"><meta name=twitter:description content="On the second day of Advent of Code 2016, we are asked to work out what a bathroom code is based on the supplied instructions."><meta name=twitter:site content="@edd_mann"><link rel="preload stylesheet" as=style href=/css/style.min.0121a173d3063b9541f1f561a87125fd59dc1fac6110b21c15bba8bc141b70b1.css integrity="sha256-ASGhc9MGO5VB8fVhqHEl/VncH6xhELIcFbuovBQbcLE="><link rel=preload as=image href=/assets/x.svg><link rel=preload as=image href=/assets/github.svg><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://eddmann.com/posts/advent-of-code-2016-day-2-bathroom-security/></head><body><header class="site-header wrapper"><a href=https://eddmann.com/><h3 class=site-header__title>Edd Mann
<span style=--url:url(/assets/code.svg)>Developer</span></h3></a><div class=site-header__mobile-navigation-button aria-label="Toggle mobile site navigation" aria-expanded=false aria-controls=site-navigation></div><div class=site-header__navigation id=site-navigation><nav aria-label="Primary navigation"><ul class=site-header__primary-navigation><li><a href=/archive>Archive</a></li><li><a href=/projects>Projects</a></li><li><a href=/about>About</a></li></ul></nav><nav aria-label="Social links"><ul class=site-header__social-navigation><li><a class=social-icon style=--url:url(/assets/x.svg) href=https://x.com/edd_mann rel="external noopener" target=_blank>Twitter (X)</a></li><li><a class=social-icon style=--url:url(/assets/github.svg) href=https://github.com/eddmann rel="external noopener" target=_blank>GitHub</a></li></ul></nav></div></header><main class=wrapper><article><header class=page-title><h1>Advent of Code 2016 - Day 2 - Bathroom Security</h1><time class=post__time>Mar 24, 2021</time></header><main class=prose><p>On the second day of Advent of Code 2016, we are asked to work out what a bathroom code is based on the supplied instructions.</p><h2 id=part-1>Part 1</h2><p>For part one, we are required to follow our input (instructions <em>UDLR</em> per keycode) based on a <em>3x3 1-9</em> keypad.
We begin by generating a dictionary lookup of the supplied keypad based on <em>x, y</em> coordinates to their related key.
In a similar manner to how we used complex numbers to represent <em>x, y</em> coordinates in the previous solution, we will be doing the same here.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>generate_keypad</span>(input):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> {complex(x, y): key
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> y, line <span style=color:#f92672>in</span> enumerate(input<span style=color:#f92672>.</span>splitlines())
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> x, key <span style=color:#f92672>in</span> enumerate(line<span style=color:#f92672>.</span>split())
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> key <span style=color:#f92672>!=</span> <span style=color:#e6db74>&#39;.&#39;</span>}
</span></span></code></pre></div><p>To correctly handle any intentional whitespace going forward, we will represent this intent using a <code>.</code>.
From here, we can then create a function that will take in the keypad, along with the initial key position and instructions, and return the resulting keycode.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>DIRECTIONS <span style=color:#f92672>=</span> {<span style=color:#e6db74>&#39;U&#39;</span>: <span style=color:#ae81ff>0</span><span style=color:#f92672>+-</span><span style=color:#ae81ff>1</span>j, <span style=color:#e6db74>&#39;D&#39;</span>: <span style=color:#ae81ff>0</span><span style=color:#f92672>+</span><span style=color:#ae81ff>1</span>j, <span style=color:#e6db74>&#39;L&#39;</span>: <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span><span style=color:#f92672>+</span><span style=color:#ae81ff>0</span>j, <span style=color:#e6db74>&#39;R&#39;</span>: <span style=color:#ae81ff>1</span><span style=color:#f92672>+</span><span style=color:#ae81ff>0</span>j}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>calc_keycode</span>(keypad, initial_key, instructions):
</span></span><span style=display:flex><span>    pos <span style=color:#f92672>=</span> next(pos <span style=color:#66d9ef>for</span> pos, key <span style=color:#f92672>in</span> keypad<span style=color:#f92672>.</span>items() <span style=color:#66d9ef>if</span> key <span style=color:#f92672>==</span> initial_key)
</span></span><span style=display:flex><span>    code <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> instruction <span style=color:#f92672>in</span> instructions:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> direction <span style=color:#f92672>in</span> instruction:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> ((next_pos <span style=color:#f92672>:=</span> pos <span style=color:#f92672>+</span> DIRECTIONS[direction]) <span style=color:#f92672>in</span> keypad):
</span></span><span style=display:flex><span>                pos <span style=color:#f92672>=</span> next_pos
</span></span><span style=display:flex><span>        code <span style=color:#f92672>+=</span> keypad[pos]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> code
</span></span></code></pre></div><p>Using an <a href=https://www.python.org/dev/peps/pep-0572/ rel="external noopener" target=_blank>assignment expression</a>, we can succinctly express that we only wish to apply positional moves that are within the supplied keypad bounds.
Once we have exhausted the given code instruction directions, we append this to the resulting code.
Finally, we return the complete code to the caller.</p><p>With these building blocks in place, we can compose them together to produce the desired answer ðŸŒŸ.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>part1</span>(input):
</span></span><span style=display:flex><span>    keypad <span style=color:#f92672>=</span> generate_keypad(<span style=color:#e6db74>&#34;&#34;&#34;1 2 3
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                                4 5 6
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                                7 8 9&#34;&#34;&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> calc_keycode(keypad, initial_key<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;5&#34;</span>, instructions<span style=color:#f92672>=</span>input<span style=color:#f92672>.</span>splitlines())
</span></span></code></pre></div><h2 id=part-2>Part 2</h2><p>For part two, we are required to instead discern what the keycode will be based on a revised keypad.
Fortunately, based on the building blocks we already have in place, we can simply update the <code>generate_keypad</code> argument.
In doing so, we produce the answer we desire to complete part two ðŸŒŸ.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>part2</span>(input):
</span></span><span style=display:flex><span>    keypad <span style=color:#f92672>=</span> generate_keypad(<span style=color:#e6db74>&#34;&#34;&#34;. . 1 . .
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                                . 2 3 4 .
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                                5 6 7 8 9
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                                . A B C .
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                                . . D . .&#34;&#34;&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> calc_keycode(keypad, initial_key<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;5&#34;</span>, instructions<span style=color:#f92672>=</span>input<span style=color:#f92672>.</span>splitlines())
</span></span></code></pre></div><h2 id=alternative-solution>Alternative Solution</h2><p>Instead of representing the coordinate as a complex number, I additionally explored creating a more aptly modelled value object that managed this state in an immutable manner.
Using <a href=https://docs.python.org/3/library/dataclasses.html rel="external noopener" target=_blank>Data Classes</a> and the <code>__add__</code> dunder method, I was able to design the following:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#a6e22e>@dataclass</span>(frozen<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Point2D</span>:
</span></span><span style=display:flex><span>    x: int
</span></span><span style=display:flex><span>    y: int
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> __add__(self, other):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> isinstance(other, Point2D):
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> NotImplemented
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> Point2D(self<span style=color:#f92672>.</span>x <span style=color:#f92672>+</span> other<span style=color:#f92672>.</span>x, self<span style=color:#f92672>.</span>y <span style=color:#f92672>+</span> other<span style=color:#f92672>.</span>y)
</span></span></code></pre></div><p>The only other aspects of the original solution that required modification were in the instantiation of these objects.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>DIRECTIONS <span style=color:#f92672>=</span> {<span style=color:#e6db74>&#39;U&#39;</span>: Point2D(<span style=color:#ae81ff>0</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>), <span style=color:#e6db74>&#39;D&#39;</span>: Point2D(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>),
</span></span><span style=display:flex><span>              <span style=color:#e6db74>&#39;L&#39;</span>: Point2D(<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>), <span style=color:#e6db74>&#39;R&#39;</span>: Point2D(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>)}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>generate_keypad</span>(input):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> {Point2D(x, y): key
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> y, line <span style=color:#f92672>in</span> enumerate(input<span style=color:#f92672>.</span>splitlines())
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> x, key <span style=color:#f92672>in</span> enumerate(line<span style=color:#f92672>.</span>split())
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> key <span style=color:#f92672>!=</span> <span style=color:#e6db74>&#39;.&#39;</span>}
</span></span></code></pre></div><p>Providing such a model is preferred over <em>piggybacking</em> on complex numbers, as this clearly expresses its purpose and intent.</p></main><footer class=post__tags><a href=/archive/tag/advent-of-code>advent-of-code</a><a href=/archive/tag/advent-of-code-2016>advent-of-code-2016</a><a href=/archive/tag/python>python</a></footer></article></main><footer class="site-footer wrapper"><div>&copy; 2025, Edd Mann</div></footer><script>(function(){document.querySelector(".site-header__mobile-navigation-button").addEventListener("click",e=>{document.documentElement.classList.toggle("mobile-navigation-open"),e.target.setAttribute("aria-expanded",e.target.getAttribute("aria-expanded")==="false"?"true":"false")});const n=document.querySelector(".site-header");let t=window.pageYOffset,e=!1;window.addEventListener("scroll",()=>{if(e)return;setTimeout(()=>{const s=window.pageYOffset;n.classList.toggle("is-sticky",s>0&&t>s),t=s,e=!1},500),e=!0})})()</script></body></html>