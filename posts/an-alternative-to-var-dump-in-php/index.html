<!doctype html>
<html lang="en">
    <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Discover a custom alternative to PHP's var_dump function that improves HTML presentation, displays context details, and offers a die-after-dump feature for efficient debugging.">

    <title>
        
            An alternative to 'var_dump' in PHP &middot; Edd Mann
        
    </title>

    <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZPQ7WHNXH4"></script>
    <script>
       window.dataLayer = window.dataLayer || [];
       function gtag(){dataLayer.push(arguments);}
       gtag('js', new Date());
       gtag('config', 'G-ZPQ7WHNXH4');
    </script>

    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,700italic,400italic">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/styles.css">

    <link rel="shortcut icon" href="/favicon.ico">

    <link rel="alternate" href="/rss.xml" title="" type="application/rss+xml">

    
</head>

    <body>
        <div class="container content">
            <header class="masthead">
                <h3 class="masthead-title">
                    <a href="/" title="Home">Edd Mann</a>
                    <small><i class="fa fa-code"></i> Developer</small>
                </h3>
                <nav>
                    <a href="https://twitter.com/edd_mann"><i class="fa fa-twitter"></i></a>
                    <a href="https://github.com/eddmann"><i class="fa fa-github"></i></a>
                    <a href="mailto:the@eddmann.com"><i class="fa fa-envelope"></i></a>
                </nav>
                <div class="cf"></div>
            </header>

            <main>
                <article class="post">
    <h1 class="post-title">An alternative to 'var_dump' in PHP</h1>
    <time datetime="2012-09-10T00:00:00+00:00" class="post-date">10 Sep 2012</time>
    <p>Whilst working with PHP, I seem to use <code class="language-plaintext highlighter-rouge">var_dump</code> a ridiculous amount.
It’s a debugging must-have.
However, it does fall short in a few ways.
It does not take into consideration that the function is almost always displayed on an HTML page, and switching to the page source can be troublesome.
Due to these pitfalls, a host of projects such as <a href="http://krumo.sourceforge.net/">Krumo</a> and <a href="http://raveren.github.io/kint/">Kint</a> have emerged to cater for these needs.
In addition to these projects, if you have <a href="http://xdebug.org/">XDebug</a> installed, it will replace the default <code class="language-plaintext highlighter-rouge">var_dump</code> function with its own implementation that outputs the information with much-needed styling.</p>



<p>For me though, I do not need all the bells and whistles that these provide.
My base requirements are:</p>

<ul>
  <li>Better presentation on an HTML page, without the need to view the source.</li>
  <li>Output of the file, class, function, and line that called the function.</li>
  <li>The ability to end script execution immediately after outputting the information (for easier debugging).</li>
</ul>

<h2 id="the-code">The code…</h2>

<p>So, as a result of these requirements, I created the two simple functions below.
I am sure there are many similar implementations available online, but these two serve me well.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="n">dump</span><span class="p">()</span>
<span class="p">{</span>
  <span class="nv">$args</span> <span class="o">=</span> <span class="nb">func_get_args</span><span class="p">();</span>

  <span class="k">echo</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">&lt;pre style=</span><span class="se">\"</span><span class="s2">border:1px solid #ccc;padding:10px;"</span> <span class="mf">.</span>
       <span class="s2">"margin:10px;font:14px courier;background:whitesmoke;"</span> <span class="mf">.</span>
       <span class="s2">"display:block;border-radius:4px;</span><span class="se">\"</span><span class="s2">&gt;</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

  <span class="nv">$trace</span> <span class="o">=</span> <span class="nb">debug_backtrace</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
  <span class="nv">$offset</span> <span class="o">=</span> <span class="p">(</span><span class="o">@</span><span class="nv">$trace</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="s1">'function'</span><span class="p">]</span> <span class="o">===</span> <span class="s1">'dump_d'</span><span class="p">)</span> <span class="o">?</span> <span class="mi">2</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>

  <span class="k">echo</span> <span class="s2">"&lt;span style=</span><span class="se">\"</span><span class="s2">color:red</span><span class="se">\"</span><span class="s2">&gt;"</span> <span class="mf">.</span>
       <span class="o">@</span><span class="nv">$trace</span><span class="p">[</span><span class="mi">1</span><span class="o">+</span><span class="nv">$offset</span><span class="p">][</span><span class="s1">'class'</span><span class="p">]</span> <span class="mf">.</span> <span class="s2">"&lt;/span&gt;:"</span> <span class="mf">.</span>
       <span class="s2">"&lt;span style=</span><span class="se">\"</span><span class="s2">color:blue;</span><span class="se">\"</span><span class="s2">&gt;"</span> <span class="mf">.</span>
       <span class="o">@</span><span class="nv">$trace</span><span class="p">[</span><span class="mi">1</span><span class="o">+</span><span class="nv">$offset</span><span class="p">][</span><span class="s1">'function'</span><span class="p">]</span> <span class="mf">.</span> <span class="s2">"&lt;/span&gt;:"</span> <span class="mf">.</span>
       <span class="o">@</span><span class="nv">$trace</span><span class="p">[</span><span class="mi">0</span><span class="o">+</span><span class="nv">$offset</span><span class="p">][</span><span class="s1">'line'</span><span class="p">]</span> <span class="mf">.</span> <span class="s2">" "</span> <span class="mf">.</span>
       <span class="s2">"&lt;span style=</span><span class="se">\"</span><span class="s2">color:green;</span><span class="se">\"</span><span class="s2">&gt;"</span> <span class="mf">.</span>
       <span class="o">@</span><span class="nv">$trace</span><span class="p">[</span><span class="mi">0</span><span class="o">+</span><span class="nv">$offset</span><span class="p">][</span><span class="s1">'file'</span><span class="p">]</span> <span class="mf">.</span> <span class="s2">"&lt;/span&gt;</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="k">empty</span><span class="p">(</span><span class="nv">$args</span><span class="p">))</span> <span class="p">{</span>
    <span class="nb">call_user_func_array</span><span class="p">(</span><span class="s1">'var_dump'</span><span class="p">,</span> <span class="nv">$args</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="k">echo</span> <span class="s2">"&lt;/pre&gt;</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">function</span> <span class="n">dump_d</span><span class="p">()</span>
<span class="p">{</span>
  <span class="nb">call_user_func_array</span><span class="p">(</span><span class="s1">'dump'</span><span class="p">,</span> <span class="nb">func_get_args</span><span class="p">());</span>
  <span class="k">die</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="resources">Resources</h2>

<ul>
  <li><a href="http://gist.github.com/3692379">A Gist of the above implementation</a></li>
  <li><a href="http://raveren.github.io/kint/">Kint</a></li>
  <li><a href="http://krumo.sourceforge.net/">Krumo</a></li>
  <li><a href="http://xdebug.org/">XDebug</a></li>
</ul>

</article>

            </main>

            <footer class="footer">
                <img src="https://www.gravatar.com/avatar/c5c2978bb14d16460f73399c394b6acd?s=160">
                <ul>
                    <li>Developer at <a href="http://www.mybuilder.com/">MyBuilder</a></li>
                    <li><a href="http://threedevsandamaybe.com/">Three Devs and a Maybe</a> podcast co-host</li>
                    <li>All ramblings can be found in the <a href="/archive/">Archive</a></li>
                </ul>
                <div class="cf"></div>
            </footer>
        </div>
    </body>
</html>
