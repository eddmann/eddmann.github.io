<!doctype html>
<html lang="en">
    <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Solving the Advent of Code 2015 Day 20 puzzle using TypeScript">

    <title>Advent of Code 2015 - Day 20 - Infinite Elves and Infinite Houses &middot; Edd Mann</title>

    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,700italic,400italic">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/styles.css">

    <link rel="shortcut icon" href="/favicon.ico">

    <link rel="alternate" href="/rss.xml" title="" type="application/rss+xml">

    <script>
        var _gaq=[['_setAccount','UA-32512081-1'],['_setDomainName','eddmann.com'],['_trackPageview']];
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = 'https://ssl.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>
</head>

    <body>
        <div class="container content">
            <header class="masthead">
                <h3 class="masthead-title">
                    <a href="/" title="Home">Edd Mann</a>
                    <small><i class="fa fa-code"></i> Developer</small>
                </h3>
                <nav>
                    <a href="https://twitter.com/edd_mann"><i class="fa fa-twitter"></i></a>
                    <a href="https://github.com/eddmann"><i class="fa fa-github"></i></a>
                    <a href="mailto:the@eddmann.com"><i class="fa fa-envelope"></i></a>
                </nav>
                <div class="cf"></div>
            </header>

            <main>
                <article class="post">
    <h1 class="post-title">Advent of Code 2015 - Day 20 - Infinite Elves and Infinite Houses</h1>
    <time datetime="2021-02-13T00:00:00-06:00" class="post-date">13 Feb 2021</time>
    <p>On the twentieth day of Advent of Code 2015 we are asked to help work out how many presents the Elves will deliver to specific houses.</p>



<h3 id="part-1">Part 1</h3>

<p>To keep the Elves busy, Santa has them deliver some presents by hand, door-to-door.
He sends them down a street with infinite houses numbered sequentially: 1, 2, 3, 4, 5, and so on.
Each Elf is assigned a number, too, and delivers presents to houses based on that number.
There are infinitely many Elves, numbered starting with 1.
Each Elf delivers presents equal to ten times his or her number at each house.</p>

<p>For part one we are asked to determine what is the lowest house number which will receive at least <em>29000000 presents</em>.
To tackle this problem we could opt for a brute-force approach storing each house in-memory and iterating through each Elves deliveries.
However, upon closer inspection you will see that each house is visited by the Elves which share their factors.
As such, we can devise a <a href="https://rosettacode.org/wiki/Factors_of_an_integer">Factors function</a> which optimally determines which Elves visited a given house number.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">elvesWhoVisited</span> <span class="o">=</span> <span class="p">(</span><span class="nx">houseNo</span><span class="p">:</span> <span class="kr">number</span><span class="p">):</span> <span class="kr">number</span><span class="p">[]</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">elves</span> <span class="o">=</span> <span class="nx">houseNo</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">?</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="nx">houseNo</span><span class="p">]</span> <span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">];</span>

  <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">elf</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="nx">elf</span> <span class="o">&lt;=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">houseNo</span><span class="p">);</span> <span class="nx">elf</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">houseNo</span> <span class="o">%</span> <span class="nx">elf</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">elves</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">elf</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">elf</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">!==</span> <span class="nx">houseNo</span><span class="p">)</span> <span class="nx">elves</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">houseNo</span> <span class="o">/</span> <span class="nx">elf</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">elves</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div></div>

<p>With the ability to determine which Elves visited a given house we can increment through each house number (starting at 1) until we reach a house where-by the presents the Elves delivered (10 times their own number) is greater than the supplied input.
We can then return this house number to answer part one ðŸŒŸ.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">part1</span> <span class="o">=</span> <span class="p">(</span><span class="nx">input</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="kr">number</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">numOfPresents</span> <span class="o">=</span> <span class="nx">toInt</span><span class="p">(</span><span class="nx">input</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">presentsPerHouse</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>

  <span class="kd">let</span> <span class="nx">houseNo</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">while</span> <span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">elves</span> <span class="o">=</span> <span class="nx">elvesWhoVisited</span><span class="p">(</span><span class="nx">houseNo</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">elves</span><span class="p">.</span><span class="nx">reduce</span><span class="p">(</span><span class="nx">sum</span><span class="p">)</span> <span class="o">*</span> <span class="nx">presentsPerHouse</span> <span class="o">&gt;=</span> <span class="nx">numOfPresents</span><span class="p">)</span> <span class="k">break</span><span class="p">;</span>
    <span class="nx">houseNo</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">houseNo</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div></div>

<h3 id="part-2">Part 2</h3>

<p>For part two, there is an imposed limit on the amount of houses a given Elf can deliver presents to (which is now 50).
Along with this restriction, the total presents per house an Elf delvers is now 11.
We are asked to now determine what is the new lowest house number which will receive at least <em>29000000 presents</em>.</p>

<p>To achieve this we can borrow a lot of the logic implemented for part one; except now we must filter out only the Elves which have not exceeded the 50 house quota.
In doing this we can return the desired answer ðŸŒŸ.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">part2</span> <span class="o">=</span> <span class="p">(</span><span class="nx">input</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="kr">number</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">numOfPresents</span> <span class="o">=</span> <span class="nx">toInt</span><span class="p">(</span><span class="nx">input</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">presentsPerHouse</span> <span class="o">=</span> <span class="mi">11</span><span class="p">;</span>
  <span class="kd">const</span> <span class="nx">maxDeliveriesPerElf</span> <span class="o">=</span> <span class="mi">50</span><span class="p">;</span>

  <span class="kd">let</span> <span class="nx">houseNo</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">while</span> <span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">elves</span> <span class="o">=</span> <span class="nx">elvesWhoVisited</span><span class="p">(</span><span class="nx">houseNo</span><span class="p">).</span><span class="nx">filter</span><span class="p">(</span>
      <span class="nx">elf</span> <span class="o">=&gt;</span> <span class="nx">houseNo</span> <span class="o">/</span> <span class="nx">elf</span> <span class="o">&lt;=</span> <span class="nx">maxDeliveriesPerElf</span>
    <span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">elves</span><span class="p">.</span><span class="nx">reduce</span><span class="p">(</span><span class="nx">sum</span><span class="p">)</span> <span class="o">*</span> <span class="nx">presentsPerHouse</span> <span class="o">&gt;=</span> <span class="nx">numOfPresents</span><span class="p">)</span> <span class="k">break</span><span class="p">;</span>
    <span class="nx">houseNo</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">houseNo</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div></div>

</article>

            </main>

            <footer class="footer">
                <img src="https://www.gravatar.com/avatar/c5c2978bb14d16460f73399c394b6acd?s=160">
                <ul>
                    <li>Developer at <a href="http://www.mybuilder.com/">MyBuilder</a></li>
                    <li><a href="http://threedevsandamaybe.com/">Three Devs and a Maybe</a> podcast co-host</li>
                    <li>All ramblings can be found in the <a href="/archive/">Archive</a></li>
                </ul>
                <div class="cf"></div>
            </footer>
        </div>
    </body>
</html>
