<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Advent of Code 2015 - Day 3 - Perfectly Spherical Houses in a Vacuum - Edd Mann</title>
<meta name=description content="Solving the Advent of Code 2015 Day 3 puzzle using TypeScript."><meta name=author content="Edd Mann"><script async src="https://www.googletagmanager.com/gtag/js?id=G-ZPQ7WHNXH4"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-ZPQ7WHNXH4")}</script><meta itemprop=name content="Advent of Code 2015 - Day 3 - Perfectly Spherical Houses in a Vacuum"><meta itemprop=description content="On the third day of Advent of Code 2015, we are asked to help determine (based on supplied directions) how many houses Santa (and Robo-Santa) will deliver presents to."><meta itemprop=datePublished content="2021-01-27T00:00:00+00:00"><meta itemprop=dateModified content="2021-01-27T00:00:00+00:00"><meta itemprop=wordCount content="557"><meta itemprop=keywords content="Advent-of-Code,Advent-of-Code-2015,Typescript"><meta property="og:url" content="https://eddmann.com/posts/advent-of-code-2015-day-3-perfectly-spherical-houses-in-a-vacuum/"><meta property="og:site_name" content="Edd Mann"><meta property="og:title" content="Advent of Code 2015 - Day 3 - Perfectly Spherical Houses in a Vacuum"><meta property="og:description" content="On the third day of Advent of Code 2015, we are asked to help determine (based on supplied directions) how many houses Santa (and Robo-Santa) will deliver presents to."><meta property="og:locale" content="en_GB"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-01-27T00:00:00+00:00"><meta property="article:modified_time" content="2021-01-27T00:00:00+00:00"><meta property="article:tag" content="Advent-of-Code"><meta property="article:tag" content="Advent-of-Code-2015"><meta property="article:tag" content="Typescript"><meta name=twitter:card content="summary"><meta name=twitter:title content="Advent of Code 2015 - Day 3 - Perfectly Spherical Houses in a Vacuum"><meta name=twitter:description content="On the third day of Advent of Code 2015, we are asked to help determine (based on supplied directions) how many houses Santa (and Robo-Santa) will deliver presents to."><meta name=twitter:site content="@edd_mann"><link rel="preload stylesheet" as=style href=/css/style.min.0121a173d3063b9541f1f561a87125fd59dc1fac6110b21c15bba8bc141b70b1.css integrity="sha256-ASGhc9MGO5VB8fVhqHEl/VncH6xhELIcFbuovBQbcLE="><link rel=preload as=image href=/assets/x.svg><link rel=preload as=image href=/assets/github.svg><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://eddmann.com/posts/advent-of-code-2015-day-3-perfectly-spherical-houses-in-a-vacuum/></head><body><header class="site-header wrapper"><a href=https://eddmann.com/><h3 class=site-header__title>Edd Mann
<span style=--url:url(/assets/code.svg)>Developer</span></h3></a><div class=site-header__mobile-navigation-button aria-label="Toggle mobile site navigation" aria-expanded=false aria-controls=site-navigation></div><div class=site-header__navigation id=site-navigation><nav aria-label="Primary navigation"><ul class=site-header__primary-navigation><li><a href=/archive>Archive</a></li><li><a href=/projects>Projects</a></li><li><a href=/about>About</a></li></ul></nav><nav aria-label="Social links"><ul class=site-header__social-navigation><li><a class=social-icon style=--url:url(/assets/x.svg) href=https://x.com/edd_mann rel="external noopener" target=_blank>Twitter (X)</a></li><li><a class=social-icon style=--url:url(/assets/github.svg) href=https://github.com/eddmann rel="external noopener" target=_blank>GitHub</a></li></ul></nav></div></header><main class=wrapper><article><header class=page-title><h1>Advent of Code 2015 - Day 3 - Perfectly Spherical Houses in a Vacuum</h1><time class=post__time>Jan 27, 2021</time></header><main class=prose><p>On the third day of Advent of Code 2015, we are asked to help determine (based on supplied directions) how many houses Santa (and Robo-Santa) will deliver presents to.</p><h2 id=part-1>Part 1</h2><p>Based on a directional system that caters for <em>north (^), south (v), east (>), or west (&lt;)</em>, we are asked to navigate our way between houses (on a two-dimensional grid), recording how many receive presents along the way.
The first step is to parse the input data into a type-safe form.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>directions</span> <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#39;^&#39;</span>, <span style=color:#e6db74>&#39;v&#39;</span>, <span style=color:#e6db74>&#39;&lt;&#39;</span>, <span style=color:#e6db74>&#39;&gt;&#39;</span>] <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>const</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Direction</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>typeof</span> <span style=color:#a6e22e>directions</span>[<span style=color:#66d9ef>number</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>parseDirections</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>input</span>: <span style=color:#66d9ef>string</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>Direction</span>[] <span style=color:#f92672>=&gt;</span>
</span></span><span style=display:flex><span>  [...<span style=color:#a6e22e>input</span>].<span style=color:#a6e22e>filter</span>((<span style=color:#a6e22e>d</span>: <span style=color:#66d9ef>Direction</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>d</span> <span style=color:#66d9ef>is</span> <span style=color:#a6e22e>Direction</span> <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>directions</span>.<span style=color:#a6e22e>includes</span>(<span style=color:#a6e22e>d</span>));
</span></span></code></pre></div><p>This filters out any invalid directions, ensuring that the resulting values are within the defined <code>Direction</code> union type.
As before, we could have alternatively provided stricter parsing rules and thrown an exception upon an invalid direction occurrence, but for this input, the provided behaviour will suffice.</p><p>From here, we create a small function that iterates through the provided directions, storing each house <code>Position</code> (represented as X-Y coordinate tuples) encountered along the way.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Position</span> <span style=color:#f92672>=</span> [<span style=color:#a6e22e>x</span>: <span style=color:#66d9ef>number</span>, <span style=color:#a6e22e>y</span>: <span style=color:#66d9ef>number</span>];
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>coordinates</span><span style=color:#f92672>:</span> { [<span style=color:#a6e22e>K</span> <span style=color:#66d9ef>in</span> <span style=color:#a6e22e>Direction</span>]<span style=color:#f92672>:</span> <span style=color:#a6e22e>Position</span> } <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;^&#39;</span><span style=color:#f92672>:</span> [<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>v</span><span style=color:#f92672>:</span> [<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;&gt;&#39;</span><span style=color:#f92672>:</span> [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>],
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;&lt;&#39;</span><span style=color:#f92672>:</span> [<span style=color:#ae81ff>0</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>],
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>deliverPresents</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>directions</span>: <span style=color:#66d9ef>Direction</span>[])<span style=color:#f92672>:</span> <span style=color:#a6e22e>CompoundSet</span>&lt;<span style=color:#f92672>Position</span>&gt; <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>current</span>: <span style=color:#66d9ef>Position</span> <span style=color:#f92672>=</span> [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>];
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>houses</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>CompoundSet</span>&lt;<span style=color:#f92672>Position</span>&gt;([<span style=color:#a6e22e>current</span>]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>direction</span> <span style=color:#66d9ef>of</span> <span style=color:#a6e22e>directions</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>y</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>current</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>dx</span>, <span style=color:#a6e22e>dy</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>coordinates</span>[<span style=color:#a6e22e>direction</span>];
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>houses</span>.<span style=color:#a6e22e>add</span>((<span style=color:#a6e22e>current</span> <span style=color:#f92672>=</span> [<span style=color:#a6e22e>x</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>dx</span>, <span style=color:#a6e22e>y</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>dy</span>]));
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>houses</span>;
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><p>We are only interested in the presence of a house being visited as opposed to how many times we encounter said house, which lends itself well to the <code>Set</code> data structure.
JavaScript does support storing compound data types (such as <code>Position</code>) in a native <code>Set</code>; however, equality is based on reference as opposed to value semantics.
In many circumstances (such as this one), this is not the behaviour we desire, instead favouring equality based on value.
There is a proposal in JavaScript to add <a href=https://github.com/tc39/proposal-record-tuple rel="external noopener" target=_blank>Records and Tuples</a> to the language, but until this is made available, I decided to create a <a href=/posts/implementing-a-compound-set-in-typescript/>small <code>CompoundSet</code> implementation</a> that catered to this need.</p><p>To answer part one, we can now invoke this function, returning the resulting <code>Set</code>&rsquo;s size ðŸŒŸ.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>part1</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>input</span>: <span style=color:#66d9ef>string</span>)<span style=color:#f92672>:</span> <span style=color:#66d9ef>number</span> <span style=color:#f92672>=&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>deliverPresents</span>(<span style=color:#a6e22e>parseDirections</span>(<span style=color:#a6e22e>input</span>)).<span style=color:#a6e22e>size</span>;
</span></span></code></pre></div><h2 id=part-2>Part 2</h2><p>In part two, we are now asked to tally the total number of houses Santa and Robo-Santa would deliver presents to based on the supplied directions.
In this instance, the input directions are split (odd/even) between Santa and Robo-Santa.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>part2</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>input</span>: <span style=color:#66d9ef>string</span>)<span style=color:#f92672>:</span> <span style=color:#66d9ef>number</span> <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>directions</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>parseDirections</span>(<span style=color:#a6e22e>input</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>santa</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>directions</span>.<span style=color:#a6e22e>filter</span>((<span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>i</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>%</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>robot</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>directions</span>.<span style=color:#a6e22e>filter</span>((<span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>i</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>%</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>CompoundSet</span>([...<span style=color:#a6e22e>deliverPresents</span>(<span style=color:#a6e22e>santa</span>), ...<span style=color:#a6e22e>deliverPresents</span>(<span style=color:#a6e22e>robot</span>)])
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>size</span>;
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><p>To answer part two, I opted to initially split the directions into the two separate sub-direction listings.
This was easy to do with a filter as we are provided the current index position as the second argument within JavaScript.
The sub-problems have now taken the same shape as part one, and as such, we can use the above function again to determine which houses are delivered presents.
Finally, we merge the sub-problems back together, producing the union <code>Set</code> to determine the total size ðŸŒŸ.</p></main><footer class=post__tags><a href=/archive/tag/advent-of-code>advent-of-code</a><a href=/archive/tag/advent-of-code-2015>advent-of-code-2015</a><a href=/archive/tag/typescript>typescript</a></footer></article></main><footer class="site-footer wrapper"><div>&copy; 2025, Edd Mann</div></footer><script>(function(){document.querySelector(".site-header__mobile-navigation-button").addEventListener("click",e=>{document.documentElement.classList.toggle("mobile-navigation-open"),e.target.setAttribute("aria-expanded",e.target.getAttribute("aria-expanded")==="false"?"true":"false")});const n=document.querySelector(".site-header");let t=window.pageYOffset,e=!1;window.addEventListener("scroll",()=>{if(e)return;setTimeout(()=>{const s=window.pageYOffset;n.classList.toggle("is-sticky",s>0&&t>s),t=s,e=!1},500),e=!0})})()</script></body></html>