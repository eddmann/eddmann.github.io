<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Implementing Promise.all and Promise.race in JavaScript - Edd Mann</title>
<meta name=description content="Learn how to implement Promise.all and Promise.race in JavaScript, handling multiple asynchronous operations efficiently."><meta name=author content="Edd Mann"><script async src="https://www.googletagmanager.com/gtag/js?id=G-ZPQ7WHNXH4"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-ZPQ7WHNXH4")}</script><meta itemprop=name content="Implementing Promise.all and Promise.race in JavaScript"><meta itemprop=description content="Throughout the past couple of months, much of the JavaScript development I have been involved with has revolved around Promises. Promises are a simple abstraction to handle deferred and asynchronous computations. This lunchtime, I decided to see how one would go about implementing two concepts that are present in the Promise standard: all and race."><meta itemprop=datePublished content="2016-01-22T00:00:00+00:00"><meta itemprop=dateModified content="2016-01-22T00:00:00+00:00"><meta itemprop=wordCount content="378"><meta itemprop=keywords content="Javascript"><meta property="og:url" content="https://eddmann.com/posts/implementing-promise-all-and-promise-race-in-javascript/"><meta property="og:site_name" content="Edd Mann"><meta property="og:title" content="Implementing Promise.all and Promise.race in JavaScript"><meta property="og:description" content="Throughout the past couple of months, much of the JavaScript development I have been involved with has revolved around Promises. Promises are a simple abstraction to handle deferred and asynchronous computations. This lunchtime, I decided to see how one would go about implementing two concepts that are present in the Promise standard: all and race."><meta property="og:locale" content="en_GB"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2016-01-22T00:00:00+00:00"><meta property="article:modified_time" content="2016-01-22T00:00:00+00:00"><meta property="article:tag" content="Javascript"><meta name=twitter:card content="summary"><meta name=twitter:title content="Implementing Promise.all and Promise.race in JavaScript"><meta name=twitter:description content="Throughout the past couple of months, much of the JavaScript development I have been involved with has revolved around Promises. Promises are a simple abstraction to handle deferred and asynchronous computations. This lunchtime, I decided to see how one would go about implementing two concepts that are present in the Promise standard: all and race."><meta name=twitter:site content="@edd_mann"><link rel="preload stylesheet" as=style href=/css/style.min.6c18b9cbfe138a24784e64860eaa9d70076170f03c68d8be3b3f1ae99e51df9f.css integrity="sha256-bBi5y/4TiiR4TmSGDqqdcAdhcPA8aNi+Oz8a6Z5R358="><link rel=preload as=image href=/assets/x.svg><link rel=preload as=image href=/assets/github.svg><link rel=icon type=image/png sizes=32x32 href=/favicon-32x3x.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://eddmann.com/posts/implementing-promise-all-and-promise-race-in-javascript/></head><body><header class="site-header wrapper"><a href=https://eddmann.com/><h3 class=site-header__title>Edd Mann
<span style=--url:url(/assets/code.svg)>Developer</span></h3></a><div class=site-header__mobile-navigation-button aria-label="Toggle mobile site navigation" aria-expanded=false aria-controls=site-navigation></div><div class=site-header__navigation id=site-navigation><nav aria-label="Primary navigation"><ul class=site-header__primary-navigation><li><a href=/archive>Archive</a></li><li><a href=/projects>Projects</a></li><li><a href=/about>About</a></li></ul></nav><nav aria-label="Social links"><ul class=site-header__social-navigation><li><a class=social-icon style=--url:url(/assets/x.svg) href=https://x.com/edd_mann rel="external noopener" target=_blank>Twitter (X)</a></li><li><a class=social-icon style=--url:url(/assets/github.svg) href=https://github.com/eddmann rel="external noopener" target=_blank>GitHub</a></li></ul></nav></div></header><main class=wrapper><article><header class=page-title><h1>Implementing Promise.all and Promise.race in JavaScript</h1><time class=post__time>Jan 22, 2016</time></header><main class=prose><p>Throughout the past couple of months, much of the JavaScript development I have been involved with has revolved around <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise rel="external noopener" target=_blank>Promises</a>.
Promises are a simple abstraction to handle deferred and asynchronous computations.
This lunchtime, I decided to see how one would go about implementing two concepts that are present in the Promise standard: <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/all rel="external noopener" target=_blank><code>all</code></a> and <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/race rel="external noopener" target=_blank><code>race</code></a>.</p><h2 id=promiseall>Promise.all</h2><p>This function is used to compose multiple supplied promises into a single returned promise that provides the resulting values in array form.
Looking at the implementation documented below, you can see how relatively easy it is to compose these promises together, adding logic in between resolutions to accumulate the final value returned.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>all</span> <span style=color:#f92672>=</span> (...<span style=color:#a6e22e>promises</span>) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>results</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>merged</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>promises</span>.<span style=color:#a6e22e>reduce</span>(
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>acc</span>, <span style=color:#a6e22e>p</span>) =&gt; <span style=color:#a6e22e>acc</span>.<span style=color:#a6e22e>then</span>(() =&gt; <span style=color:#a6e22e>p</span>).<span style=color:#a6e22e>then</span>(<span style=color:#a6e22e>r</span> =&gt; <span style=color:#a6e22e>results</span>.<span style=color:#a6e22e>push</span>(<span style=color:#a6e22e>r</span>)),
</span></span><span style=display:flex><span>    Promise.<span style=color:#a6e22e>resolve</span>(<span style=color:#66d9ef>null</span>)
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>merged</span>.<span style=color:#a6e22e>then</span>(() =&gt; <span style=color:#a6e22e>results</span>);
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><p>We can use this solution in a couple of contrived examples, initially highlighting the &lsquo;happy path&rsquo; of three separate promises being resolved before moving on to handling the case where a promise is rejected.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>p1</span> <span style=color:#f92672>=</span> Promise.<span style=color:#a6e22e>resolve</span>(<span style=color:#e6db74>&#39;foo&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>p2</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;bar&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>p3</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Promise((<span style=color:#a6e22e>res</span>, <span style=color:#a6e22e>rej</span>) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>setTimeout</span>(<span style=color:#a6e22e>res</span>, <span style=color:#ae81ff>100</span>, <span style=color:#e6db74>&#39;baz&#39;</span>);
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>all</span>(<span style=color:#a6e22e>p1</span>, <span style=color:#a6e22e>p2</span>, <span style=color:#a6e22e>p3</span>).<span style=color:#a6e22e>then</span>(([<span style=color:#a6e22e>a1</span>, <span style=color:#a6e22e>a2</span>, <span style=color:#a6e22e>a3</span>]) =&gt; <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>a1</span>, <span style=color:#a6e22e>a2</span>, <span style=color:#a6e22e>a3</span>));
</span></span><span style=display:flex><span><span style=color:#75715e>// &#34;foo&#34; &#34;bar&#34; &#34;baz&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>p4</span> <span style=color:#f92672>=</span> Promise.<span style=color:#a6e22e>reject</span>(<span style=color:#e6db74>&#39;qux&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>all</span>(<span style=color:#a6e22e>p1</span>, <span style=color:#a6e22e>p2</span>, <span style=color:#a6e22e>p3</span>, <span style=color:#a6e22e>p4</span>)
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>then</span>(([<span style=color:#a6e22e>a1</span>, <span style=color:#a6e22e>a2</span>, <span style=color:#a6e22e>a3</span>]) =&gt; <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>a1</span>, <span style=color:#a6e22e>a2</span>, <span style=color:#a6e22e>a3</span>))
</span></span><span style=display:flex><span>  .<span style=color:#66d9ef>catch</span>(<span style=color:#a6e22e>e</span> =&gt; <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>e</span>));
</span></span><span style=display:flex><span><span style=color:#75715e>// &#34;qux&#34;
</span></span></span></code></pre></div><h2 id=promiserace>Promise.race</h2><p>Following on from the <code>all</code> implementation, we can implement the <code>race</code> function that is also present in the standard.
This function returns the first completed (resolved or rejected) promise from a supplied collection.
Wrapping the supplied promises within a new promise whose resolved and rejected functions are called based on their actions allows you to see how the race condition works.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>race</span> <span style=color:#f92672>=</span> (...<span style=color:#a6e22e>promises</span>) =&gt;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>new</span> Promise((<span style=color:#a6e22e>res</span>, <span style=color:#a6e22e>rej</span>) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>promises</span>.<span style=color:#a6e22e>forEach</span>(<span style=color:#a6e22e>p</span> =&gt; <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>then</span>(<span style=color:#a6e22e>res</span>).<span style=color:#66d9ef>catch</span>(<span style=color:#a6e22e>rej</span>));
</span></span><span style=display:flex><span>  });
</span></span></code></pre></div><p>We can highlight this implementation in an example, first depicting the &lsquo;happy path&rsquo;, followed by a rejection which is returned due to &lsquo;winning the race&rsquo;.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>p1</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Promise((<span style=color:#a6e22e>res</span>, <span style=color:#a6e22e>rej</span>) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>setTimeout</span>(<span style=color:#a6e22e>res</span>, <span style=color:#ae81ff>100</span>, <span style=color:#e6db74>&#39;foo&#39;</span>);
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>p2</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Promise((<span style=color:#a6e22e>res</span>, <span style=color:#a6e22e>rej</span>) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>setTimeout</span>(<span style=color:#a6e22e>res</span>, <span style=color:#ae81ff>200</span>, <span style=color:#e6db74>&#39;bar&#39;</span>);
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>race</span>(<span style=color:#a6e22e>p1</span>, <span style=color:#a6e22e>p2</span>).<span style=color:#a6e22e>then</span>(<span style=color:#a6e22e>a</span> =&gt; <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>a</span>)); <span style=color:#75715e>// &#34;foo&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>p3</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Promise((<span style=color:#a6e22e>res</span>, <span style=color:#a6e22e>rej</span>) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>setTimeout</span>(<span style=color:#a6e22e>rej</span>, <span style=color:#ae81ff>50</span>, <span style=color:#e6db74>&#39;baz&#39;</span>);
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>race</span>(<span style=color:#a6e22e>p1</span>, <span style=color:#a6e22e>p2</span>, <span style=color:#a6e22e>p3</span>)
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>then</span>(<span style=color:#a6e22e>a</span> =&gt; <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>a</span>))
</span></span><span style=display:flex><span>  .<span style=color:#66d9ef>catch</span>(<span style=color:#a6e22e>e</span> =&gt; <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>e</span>)); <span style=color:#75715e>// &#34;baz&#34;
</span></span></span></code></pre></div></main><footer class=post__tags><a href=/archive/tag/javascript>javascript</a></footer></article></main><footer class="site-footer wrapper"><div>&copy; 2025, Edd Mann</div></footer><script>(function(){document.querySelector(".site-header__mobile-navigation-button").addEventListener("click",e=>{document.documentElement.classList.toggle("mobile-navigation-open"),e.target.setAttribute("aria-expanded",e.target.getAttribute("aria-expanded")==="false"?"true":"false")});const n=document.querySelector(".site-header");let t=window.pageYOffset,e=!1;window.addEventListener("scroll",()=>{if(e)return;const s=window.pageYOffset;window.requestAnimationFrame(()=>{n.classList.toggle("is-sticky",t>s),t=s,e=!1}),e=!0})})()</script></body></html>