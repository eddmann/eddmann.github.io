<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Advent of Code 2015 - Day 6 - Probably a Fire Hazard - Edd Mann</title>
<meta name=description content="Solving the Advent of Code 2015 Day 6 puzzle using TypeScript."><meta name=author content="Edd Mann"><script async src="https://www.googletagmanager.com/gtag/js?id=G-ZPQ7WHNXH4"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-ZPQ7WHNXH4")}</script><meta itemprop=name content="Advent of Code 2015 - Day 6 - Probably a Fire Hazard"><meta itemprop=description content="On the sixth day of Advent of Code 2015, we are tasked with trying to win the holiday house decorating contest - by designing the best light sequence ðŸ’¡."><meta itemprop=datePublished content="2021-01-30T00:00:00+00:00"><meta itemprop=dateModified content="2021-01-30T00:00:00+00:00"><meta itemprop=wordCount content="1069"><meta itemprop=keywords content="Advent-of-Code,Advent-of-Code-2015,Typescript"><meta property="og:url" content="https://eddmann.com/posts/advent-of-code-2015-day-6-probably-a-fire-hazard/"><meta property="og:site_name" content="Edd Mann"><meta property="og:title" content="Advent of Code 2015 - Day 6 - Probably a Fire Hazard"><meta property="og:description" content="On the sixth day of Advent of Code 2015, we are tasked with trying to win the holiday house decorating contest - by designing the best light sequence ðŸ’¡."><meta property="og:locale" content="en_GB"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-01-30T00:00:00+00:00"><meta property="article:modified_time" content="2021-01-30T00:00:00+00:00"><meta property="article:tag" content="Advent-of-Code"><meta property="article:tag" content="Advent-of-Code-2015"><meta property="article:tag" content="Typescript"><meta name=twitter:card content="summary"><meta name=twitter:title content="Advent of Code 2015 - Day 6 - Probably a Fire Hazard"><meta name=twitter:description content="On the sixth day of Advent of Code 2015, we are tasked with trying to win the holiday house decorating contest - by designing the best light sequence ðŸ’¡."><meta name=twitter:site content="@edd_mann"><link rel=stylesheet href=/css/style.min.3182afb340a83ee2b29f9b972282f896d25ab9c363ef5462a251fa004875db3e.css integrity="sha256-MYKvs0CoPuKyn5uXIoL4ltJaucNj71RiolH6AEh12z4="><link rel=preload as=image href=/assets/x.svg><link rel=preload as=image href=/assets/github.svg><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://eddmann.com/posts/advent-of-code-2015-day-6-probably-a-fire-hazard/><script>(function(){document.documentElement.setAttribute("data-theme",localStorage.getItem("theme")||window.matchMedia("(prefers-color-scheme: dark)").matches&&"dark"||"light")})()</script><script src=/script.min.7b3001f959164202b0ed43cdde230bfa9d8f579831cc5e4f9853519364eb2fbe.js integrity="sha256-ezAB+VkWQgKw7UPN3iML+p2PV5gxzF5PmFNRk2TrL74=" defer></script></head><body><header class="site-header l-wrapper"><a href=https://eddmann.com/><h3 class=site-header__title>Edd Mann
<span style=--url:url(/assets/code.svg)>Developer</span></h3></a><button class=site-header__mobile-navigation-button type=button title="Toggle mobile site navigation" aria-label="Toggle mobile site navigation" aria-expanded=false aria-controls=site-navigation></button><div class=site-header__navigation id=site-navigation><nav aria-label="Primary navigation"><ul class=site-header__primary-navigation><li><a href=/archive>Archive</a></li><li><a href=/projects>Projects</a></li><li><a href=/about>About</a></li></ul></nav><nav aria-label="Social links"><ul class=site-header__social-navigation><li><a class=social-icon style=--url:url(/assets/x.svg) href=https://x.com/edd_mann rel="external noopener" target=_blank>Twitter (X)</a></li><li><a class=social-icon style=--url:url(/assets/github.svg) href=https://github.com/eddmann rel="external noopener" target=_blank>GitHub</a></li></ul></nav></div></header><main class=l-wrapper><article><header class=l-page-title><h1 class=u-transition-between-pages style=--id:advent-of-code-2015-day-6-probably-a-fire-hazard>Advent of Code 2015 - Day 6 - Probably a Fire Hazard</h1><time datetime=2021-01-30T00:00:00Z class=post__time>Jan 30, 2021</time></header><main class=u-prose><p>On the sixth day of Advent of Code 2015, we are tasked with trying to win the holiday house decorating contest - by designing the best light sequence ðŸ’¡.</p><h2 id=part-1>Part 1</h2><p>We are first told that the lights are configured in a <em>1000x1000 grid</em> and that, based on instructions that Santa has provided, we should operate each light in different ways.
Like before, we start off by parsing the provided instructions (actions and grid position ranges) into a form we can enact going forward.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Light</span> <span style=color:#f92672>=</span> { <span style=color:#a6e22e>row</span>: <span style=color:#66d9ef>number</span>; <span style=color:#a6e22e>col</span>: <span style=color:#66d9ef>number</span> };
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Range</span> <span style=color:#f92672>=</span> { <span style=color:#66d9ef>from</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Light</span>; <span style=color:#a6e22e>to</span>: <span style=color:#66d9ef>Light</span> };
</span></span><span style=display:flex><span><span style=color:#66d9ef>enum</span> <span style=color:#a6e22e>Action</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>On</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>Off</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>Toggle</span>,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Instruction</span> <span style=color:#f92672>=</span> [<span style=color:#a6e22e>Action</span>, <span style=color:#a6e22e>Range</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>parseInstructions</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>input</span>: <span style=color:#66d9ef>string</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>Instruction</span>[] <span style=color:#f92672>=&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>input</span>.<span style=color:#a6e22e>split</span>(<span style=color:#e6db74>&#39;\n&#39;</span>).<span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>line</span> <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> [, <span style=color:#a6e22e>action</span>, <span style=color:#a6e22e>fr</span>, <span style=color:#a6e22e>fc</span>, <span style=color:#a6e22e>tr</span>, <span style=color:#a6e22e>tc</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>line</span>.<span style=color:#a6e22e>match</span>(
</span></span><span style=display:flex><span>      <span style=color:#e6db74>/(.+) (\d+),(\d+) through (\d+),(\d+)/</span>
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> [
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>action</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;turn on&#39;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>?</span> <span style=color:#a6e22e>Action.On</span>
</span></span><span style=display:flex><span>        : <span style=color:#66d9ef>action</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;turn off&#39;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>?</span> <span style=color:#a6e22e>Action.Off</span>
</span></span><span style=display:flex><span>        : <span style=color:#66d9ef>Action.Toggle</span>,
</span></span><span style=display:flex><span>      {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>from</span><span style=color:#f92672>:</span> { <span style=color:#a6e22e>row</span>: <span style=color:#66d9ef>toInt</span>(<span style=color:#a6e22e>fr</span>), <span style=color:#a6e22e>col</span>: <span style=color:#66d9ef>toInt</span>(<span style=color:#a6e22e>fc</span>) },
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>to</span><span style=color:#f92672>:</span> { <span style=color:#a6e22e>row</span>: <span style=color:#66d9ef>toInt</span>(<span style=color:#a6e22e>tr</span>), <span style=color:#a6e22e>col</span>: <span style=color:#66d9ef>toInt</span>(<span style=color:#a6e22e>tc</span>) },
</span></span><span style=display:flex><span>      },
</span></span><span style=display:flex><span>    ];
</span></span><span style=display:flex><span>  });
</span></span></code></pre></div><p>We initially define a couple of types to help map the domain problem into our code solution.
Using a Regular Expression, we are able to translate every instruction line into the given action and grid position range (<code>from</code>, <code>to</code>).
I have opted for using a ternary operator in such a way that it can provide three choices.
I would usually shy away from doing this in <em>professional code</em> due to readability and possible errors.</p><p>With the instructions now parsed, we can look into solving the first part of today&rsquo;s problem.
For this, we will be using a two-dimensional array, which I have decided to define as a generic function for creation in both parts.
Providing the size and default value allows us to build a type-safe array, which the client can then use.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>create2DArray</span> <span style=color:#f92672>=</span> &lt;<span style=color:#f92672>T</span>&gt;(<span style=color:#a6e22e>rows</span>: <span style=color:#66d9ef>number</span>, <span style=color:#a6e22e>cols</span>: <span style=color:#66d9ef>number</span>, <span style=color:#a6e22e>defaultValue</span>: <span style=color:#66d9ef>T</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>T</span>[][] <span style=color:#f92672>=&gt;</span>
</span></span><span style=display:flex><span>  Array.<span style=color:#66d9ef>from</span>(Array(<span style=color:#a6e22e>rows</span>), () <span style=color:#f92672>=&gt;</span> Array(<span style=color:#a6e22e>cols</span>).<span style=color:#a6e22e>fill</span>(<span style=color:#a6e22e>defaultValue</span>));
</span></span></code></pre></div><p>Based on the three actions (<code>On</code>, <code>Off</code>, and <code>Toggle</code>), we are required to iterate through the instructions and manipulate the specified lights (based on a given range) using a double <code>for</code> loop like so:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>part1</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>input</span>: <span style=color:#66d9ef>string</span>)<span style=color:#f92672>:</span> <span style=color:#66d9ef>number</span> <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>lights</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>create2DArray</span>(<span style=color:#ae81ff>1000</span>, <span style=color:#ae81ff>1000</span>, <span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>action</span>, { <span style=color:#66d9ef>from</span>, <span style=color:#a6e22e>to</span> }] <span style=color:#66d9ef>of</span> <span style=color:#a6e22e>parseInstructions</span>(<span style=color:#a6e22e>input</span>)) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>row</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>from</span>.<span style=color:#a6e22e>row</span>; <span style=color:#a6e22e>row</span> <span style=color:#f92672>&lt;=</span> <span style=color:#a6e22e>to</span>.<span style=color:#a6e22e>row</span>; <span style=color:#a6e22e>row</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>col</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>from</span>.<span style=color:#a6e22e>col</span>; <span style=color:#a6e22e>col</span> <span style=color:#f92672>&lt;=</span> <span style=color:#a6e22e>to</span>.<span style=color:#a6e22e>col</span>; <span style=color:#a6e22e>col</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>lights</span>[<span style=color:#a6e22e>row</span>][<span style=color:#a6e22e>col</span>] <span style=color:#f92672>=</span>
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>action</span> <span style=color:#f92672>===</span> <span style=color:#a6e22e>Action</span>.<span style=color:#a6e22e>On</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>?</span> <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>:</span> <span style=color:#a6e22e>action</span> <span style=color:#f92672>===</span> <span style=color:#a6e22e>Action</span>.<span style=color:#a6e22e>Off</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>?</span> <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>:</span> <span style=color:#f92672>!</span><span style=color:#a6e22e>lights</span>[<span style=color:#a6e22e>row</span>][<span style=color:#a6e22e>col</span>];
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>lights</span>.<span style=color:#a6e22e>flat</span>().<span style=color:#a6e22e>filter</span>(Boolean).<span style=color:#a6e22e>length</span>;
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><p>Once we have followed the instructions, we can flatten the two-dimensional array into a single dimension and tally up all the lights that are still lit to reach the desired answer ðŸŒŸ.</p><p>Alternatively, we could replace the two-dimensional array with a more performant <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array rel="external noopener" target=_blank><code>UInt8Array</code></a> one-dimensional array.
In doing so, we lose the ability to express the light state as a <code>Boolean</code> and instead map these states to <code>1</code> or <code>0</code> accordingly.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>part1</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>input</span>: <span style=color:#66d9ef>string</span>)<span style=color:#f92672>:</span> <span style=color:#66d9ef>number</span> <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>lights</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Uint8Array</span>(<span style=color:#ae81ff>1000</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>1000</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>action</span>, { <span style=color:#66d9ef>from</span>, <span style=color:#a6e22e>to</span> }] <span style=color:#66d9ef>of</span> <span style=color:#a6e22e>parseInstructions</span>(<span style=color:#a6e22e>input</span>)) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>row</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>from</span>.<span style=color:#a6e22e>row</span>; <span style=color:#a6e22e>row</span> <span style=color:#f92672>&lt;=</span> <span style=color:#a6e22e>to</span>.<span style=color:#a6e22e>row</span>; <span style=color:#a6e22e>row</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>col</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>from</span>.<span style=color:#a6e22e>col</span>; <span style=color:#a6e22e>col</span> <span style=color:#f92672>&lt;=</span> <span style=color:#a6e22e>to</span>.<span style=color:#a6e22e>col</span>; <span style=color:#a6e22e>col</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>lights</span>[<span style=color:#ae81ff>1000</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>row</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>col</span>] <span style=color:#f92672>=</span>
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>action</span> <span style=color:#f92672>===</span> <span style=color:#a6e22e>Action</span>.<span style=color:#a6e22e>On</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>?</span> <span style=color:#a6e22e>1</span>
</span></span><span style=display:flex><span>            : <span style=color:#66d9ef>action</span> <span style=color:#f92672>===</span> <span style=color:#a6e22e>Action</span>.<span style=color:#a6e22e>Off</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>?</span> <span style=color:#a6e22e>0</span>
</span></span><span style=display:flex><span>            : <span style=color:#66d9ef>1</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>lights</span>[<span style=color:#ae81ff>1000</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>row</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>col</span>];
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>lights</span>.<span style=color:#a6e22e>reduce</span>(<span style=color:#a6e22e>sum</span>);
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><p>Accessing the desired row and column is now achieved using a small formula <code>1000 * row + col</code>.
To toggle the light state, we use the <code>1 - n</code> trick to flip the state between <code>1</code> and <code>0</code>.
Finally, we can sum up all the lights that are on with a single reduction, thanks to the values we are now storing (integers) and using a one-dimensional array.</p><h2 id=part-2>Part 2</h2><p>In part two, we are required to iterate through the provided instructions again, but instead of just turning the light on or off, we now control their brightness.
As such, we now wish to store integer values in our two-dimensional array.
Thanks to the help of <a href=https://www.typescriptlang.org/docs/handbook/generics.html rel="external noopener" target=_blank>Generics</a> and the supplied default value, this is made type-safe.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>part2</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>input</span>: <span style=color:#66d9ef>string</span>)<span style=color:#f92672>:</span> <span style=color:#66d9ef>number</span> <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>lights</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>create2DArray</span>(<span style=color:#ae81ff>1000</span>, <span style=color:#ae81ff>1000</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>action</span>, { <span style=color:#66d9ef>from</span>, <span style=color:#a6e22e>to</span> }] <span style=color:#66d9ef>of</span> <span style=color:#a6e22e>parseInstructions</span>(<span style=color:#a6e22e>input</span>)) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>row</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>from</span>.<span style=color:#a6e22e>row</span>; <span style=color:#a6e22e>row</span> <span style=color:#f92672>&lt;=</span> <span style=color:#a6e22e>to</span>.<span style=color:#a6e22e>row</span>; <span style=color:#a6e22e>row</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>col</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>from</span>.<span style=color:#a6e22e>col</span>; <span style=color:#a6e22e>col</span> <span style=color:#f92672>&lt;=</span> <span style=color:#a6e22e>to</span>.<span style=color:#a6e22e>col</span>; <span style=color:#a6e22e>col</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>lights</span>[<span style=color:#a6e22e>row</span>][<span style=color:#a6e22e>col</span>] <span style=color:#f92672>=</span> Math.<span style=color:#a6e22e>max</span>(
</span></span><span style=display:flex><span>          <span style=color:#ae81ff>0</span>,
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>lights</span>[<span style=color:#a6e22e>row</span>][<span style=color:#a6e22e>col</span>] <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>            (<span style=color:#a6e22e>action</span> <span style=color:#f92672>===</span> <span style=color:#a6e22e>Action</span>.<span style=color:#a6e22e>On</span> <span style=color:#f92672>?</span> <span style=color:#a6e22e>1</span> : <span style=color:#66d9ef>action</span> <span style=color:#f92672>===</span> <span style=color:#a6e22e>Action</span>.<span style=color:#a6e22e>Off</span> <span style=color:#f92672>?</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>1</span> : <span style=color:#66d9ef>2</span>)
</span></span><span style=display:flex><span>        );
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>lights</span>.<span style=color:#a6e22e>flat</span>().<span style=color:#a6e22e>reduce</span>(<span style=color:#a6e22e>sum</span>);
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><p>Following a very similar form to part one, the only code that has really changed is the action we wish to enact based on the given instruction&rsquo;s light range.
Having iterated through the provided instructions, we can again flatten the grid and return the light brightness sum to reach our desired answer ðŸŒŸ.</p><p>Following suit with part one&rsquo;s alternative implementation, we can again opt to use a <code>Uint8Array</code> instead and use a small mathematical formula to locate a given row and column.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>part2</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>input</span>: <span style=color:#66d9ef>string</span>)<span style=color:#f92672>:</span> <span style=color:#66d9ef>number</span> <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>lights</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Uint8Array</span>(<span style=color:#ae81ff>1000</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>1000</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>action</span>, { <span style=color:#66d9ef>from</span>, <span style=color:#a6e22e>to</span> }] <span style=color:#66d9ef>of</span> <span style=color:#a6e22e>parseInstructions</span>(<span style=color:#a6e22e>input</span>)) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>row</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>from</span>.<span style=color:#a6e22e>row</span>; <span style=color:#a6e22e>row</span> <span style=color:#f92672>&lt;=</span> <span style=color:#a6e22e>to</span>.<span style=color:#a6e22e>row</span>; <span style=color:#a6e22e>row</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>col</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>from</span>.<span style=color:#a6e22e>col</span>; <span style=color:#a6e22e>col</span> <span style=color:#f92672>&lt;=</span> <span style=color:#a6e22e>to</span>.<span style=color:#a6e22e>col</span>; <span style=color:#a6e22e>col</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>lights</span>[<span style=color:#ae81ff>1000</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>row</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>col</span>] <span style=color:#f92672>=</span> Math.<span style=color:#a6e22e>max</span>(
</span></span><span style=display:flex><span>          <span style=color:#ae81ff>0</span>,
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>lights</span>[<span style=color:#ae81ff>1000</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>row</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>col</span>] <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>            (<span style=color:#a6e22e>action</span> <span style=color:#f92672>===</span> <span style=color:#a6e22e>Action</span>.<span style=color:#a6e22e>On</span> <span style=color:#f92672>?</span> <span style=color:#a6e22e>1</span> : <span style=color:#66d9ef>action</span> <span style=color:#f92672>===</span> <span style=color:#a6e22e>Action</span>.<span style=color:#a6e22e>Off</span> <span style=color:#f92672>?</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>1</span> : <span style=color:#66d9ef>2</span>)
</span></span><span style=display:flex><span>        );
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>lights</span>.<span style=color:#a6e22e>reduce</span>(<span style=color:#a6e22e>sum</span>);
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><p>The benefits of using this approach are for performance, as the interpreter is able to determine the type and size of the array up-front.
In the case of the two-dimensional array, we produce this array somewhat dynamically, and the engine is not able to be sure of what exact type we will be storing throughout its lifetime (as JavaScript arrays are heterogeneous).</p><p>Upon review, due to how similar both part one and two were, we could have possibly distilled the logic for iterating through an instruction set and applying a given action into a more generalised higher-order function.
In doing so, it could have abstracted away how we stored the lighting grid and how we produced the desired resulting sum.
As the callee, we could then just supply different actions (possibly of the type <code>(Light) => Light</code>) to form the basis of each part&rsquo;s concrete solution.</p></main><footer class=post__tags><a href=/archive/tag/advent-of-code>advent-of-code</a><a href=/archive/tag/advent-of-code-2015>advent-of-code-2015</a><a href=/archive/tag/typescript>typescript</a></footer></article><div class="related-posts u-prose"><h3>Related Posts</h3><ul><li><a href=/posts/advent-of-code-2015-day-5-doesnt-he-have-intern-elves-for-this/>Advent of Code 2015 - Day 5 - Doesn't He Have Intern-Elves For This?</a></li><li><a href=/posts/advent-of-code-2015-day-4-the-ideal-stocking-stuffer/>Advent of Code 2015 - Day 4 - The Ideal Stocking Stuffer</a></li><li><a href=/posts/advent-of-code-2015-day-3-perfectly-spherical-houses-in-a-vacuum/>Advent of Code 2015 - Day 3 - Perfectly Spherical Houses in a Vacuum</a></li><li><a href=/posts/advent-of-code-2015-day-2-i-was-told-there-would-be-no-math/>Advent of Code 2015 - Day 2 - I Was Told There Would Be No Math</a></li><li><a href=/posts/advent-of-code-2015-day-1-not-quite-lisp/>Advent of Code 2015 - Day 1 - Not Quite Lisp</a></li></ul></div><div class=scroll-watcher></div></main><footer class="site-footer l-wrapper"><div>&copy; 2025, Edd Mann</div><button class=site-footer__theme-toggle type=button title="Toggle theme" aria-label="Toggle theme"><svg fill="currentcolor" viewBox="0 0 32 32" role="img"><title>Theme toggle icon</title><desc>A circle representing the moon for toggling theme</desc><path d="M16 .5C7.4.5.5 7.4.5 16S7.4 31.5 16 31.5 31.5 24.6 31.5 16 24.6.5 16 .5zm0 28.1V3.4C23 3.4 28.6 9 28.6 16S23 28.6 16 28.6z"/></svg></button></footer></body></html>