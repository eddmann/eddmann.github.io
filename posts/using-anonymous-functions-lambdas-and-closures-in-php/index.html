<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Using Anonymous Functions (Lambdas) and Closures in PHP - Edd Mann</title>
<meta name=description content="Learn how to harness the power of anonymous functions and closures in PHP with clear examples on lambdas, dynamic methods, and validation libraries."><meta name=author content="Edd Mann"><script async src="https://www.googletagmanager.com/gtag/js?id=G-ZPQ7WHNXH4"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-ZPQ7WHNXH4")}</script><meta itemprop=name content="Using Anonymous Functions (Lambdas) and Closures in PHP"><meta itemprop=description content="Having spent some significant time with more functional-oriented languages such as Scala, I have been keen to explore and take advantage of some of these concepts in my current day-to-day language (PHP). Delving into the subject, however, seems to highlight some confusion between the two concepts discussed. An anonymous function (also known as a lambda), originating from the Lambda calculus, is a function that has no assigned name and can be considered a value in itself. Functions of this category are first-class value types, on a par with integers, booleans, etc., allowing you to pass them as arguments or return them from functions (also known as higher-order functions). A closure, on the other hand, is a function that captures the state of the surrounding context or environment upon definition, retaining these references even if the variable falls out of lexical scope. Neither depends on the other at an implementation level; however, you typically see the two used in conjunction."><meta itemprop=datePublished content="2014-03-17T00:00:00+00:00"><meta itemprop=dateModified content="2014-03-17T00:00:00+00:00"><meta itemprop=wordCount content="959"><meta itemprop=keywords content="Php,Functional-Programming"><meta property="og:url" content="https://eddmann.com/posts/using-anonymous-functions-lambdas-and-closures-in-php/"><meta property="og:site_name" content="Edd Mann"><meta property="og:title" content="Using Anonymous Functions (Lambdas) and Closures in PHP"><meta property="og:description" content="Having spent some significant time with more functional-oriented languages such as Scala, I have been keen to explore and take advantage of some of these concepts in my current day-to-day language (PHP). Delving into the subject, however, seems to highlight some confusion between the two concepts discussed. An anonymous function (also known as a lambda), originating from the Lambda calculus, is a function that has no assigned name and can be considered a value in itself. Functions of this category are first-class value types, on a par with integers, booleans, etc., allowing you to pass them as arguments or return them from functions (also known as higher-order functions). A closure, on the other hand, is a function that captures the state of the surrounding context or environment upon definition, retaining these references even if the variable falls out of lexical scope. Neither depends on the other at an implementation level; however, you typically see the two used in conjunction."><meta property="og:locale" content="en_GB"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2014-03-17T00:00:00+00:00"><meta property="article:modified_time" content="2014-03-17T00:00:00+00:00"><meta property="article:tag" content="Php"><meta property="article:tag" content="Functional-Programming"><meta name=twitter:card content="summary"><meta name=twitter:title content="Using Anonymous Functions (Lambdas) and Closures in PHP"><meta name=twitter:description content="Having spent some significant time with more functional-oriented languages such as Scala, I have been keen to explore and take advantage of some of these concepts in my current day-to-day language (PHP). Delving into the subject, however, seems to highlight some confusion between the two concepts discussed. An anonymous function (also known as a lambda), originating from the Lambda calculus, is a function that has no assigned name and can be considered a value in itself. Functions of this category are first-class value types, on a par with integers, booleans, etc., allowing you to pass them as arguments or return them from functions (also known as higher-order functions). A closure, on the other hand, is a function that captures the state of the surrounding context or environment upon definition, retaining these references even if the variable falls out of lexical scope. Neither depends on the other at an implementation level; however, you typically see the two used in conjunction."><meta name=twitter:site content="@edd_mann"><link rel="preload stylesheet" as=style href=/css/style.min.6c18b9cbfe138a24784e64860eaa9d70076170f03c68d8be3b3f1ae99e51df9f.css integrity="sha256-bBi5y/4TiiR4TmSGDqqdcAdhcPA8aNi+Oz8a6Z5R358="><link rel=preload as=image href=/assets/x.svg><link rel=preload as=image href=/assets/github.svg><link rel=icon type=image/png sizes=32x32 href=/favicon-32x3x.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://eddmann.com/posts/using-anonymous-functions-lambdas-and-closures-in-php/></head><body><header class="site-header wrapper"><a href=https://eddmann.com/><h3 class=site-header__title>Edd Mann
<span style=--url:url(/assets/code.svg)>Developer</span></h3></a><div class=site-header__mobile-navigation-button aria-label="Toggle mobile site navigation" aria-expanded=false aria-controls=site-navigation></div><div class=site-header__navigation id=site-navigation><nav aria-label="Primary navigation"><ul class=site-header__primary-navigation><li><a href=/archive>Archive</a></li><li><a href=/projects>Projects</a></li><li><a href=/about>About</a></li></ul></nav><nav aria-label="Social links"><ul class=site-header__social-navigation><li><a class=social-icon style=--url:url(/assets/x.svg) href=https://x.com/edd_mann rel="external noopener" target=_blank>Twitter (X)</a></li><li><a class=social-icon style=--url:url(/assets/github.svg) href=https://github.com/eddmann rel="external noopener" target=_blank>GitHub</a></li></ul></nav></div></header><main class=wrapper><article><header class=page-title><h1>Using Anonymous Functions (Lambdas) and Closures in PHP</h1><time class=post__time>Mar 17, 2014</time></header><main class=prose><p>Having spent some significant time with more functional-oriented languages such as Scala, I have been keen to explore and take advantage of some of these concepts in my current day-to-day language (PHP).
Delving into the subject, however, seems to highlight some confusion between the two concepts discussed.
An anonymous function (also known as a lambda), originating from the <a href=http://en.wikipedia.org/wiki/Lambda_calculus rel="external noopener" target=_blank>Lambda calculus</a>, is a function that has no assigned name and can be considered a value in itself.
Functions of this category are first-class value types, on a par with integers, booleans, etc., allowing you to pass them as arguments or return them from functions (also known as higher-order functions).
A closure, on the other hand, is a function that captures the state of the surrounding context or environment upon definition, retaining these references even if the variable falls out of lexical scope.
Neither depends on the other at an implementation level; however, you typically see the two used in conjunction.</p><p>Below is an example of a trivial addition lambda and its use-case.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span>$add <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span>($a, $b)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> $a <span style=color:#f92672>+</span> $b;
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>get_class</span>($add); <span style=color:#75715e>// Closure
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>$add(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>); <span style=color:#75715e>// 3
</span></span></span></code></pre></div><p>Upon inspection of the resulting instance&rsquo;s class type, it may appear incorrect.
However, in PHP it can be a little confusing to disambiguate between the differences of lambdas and closures, as both create an object of the type <code>Closure</code>.
Initially, this was an implementation detail that could change in future releases; however, as time has passed, this fact can now be relied upon.
Below is an example of using a closure to implement increment functionality.
Note the inclusion of the <code>use</code> keyword, which allows us to distinguish between the two concepts in code.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>inc</span>($step <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    $inc <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>function</span>() <span style=color:#66d9ef>use</span> (<span style=color:#f92672>&amp;</span>$inc, $step)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> $inc <span style=color:#f92672>+=</span> $step;
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$inc <span style=color:#f92672>=</span> <span style=color:#a6e22e>inc</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>get_class</span>($inc); <span style=color:#75715e>// Closure
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>$inc(); <span style=color:#75715e>// 1
</span></span></span></code></pre></div><p>In the above case, we create a regular function that is supplied with the desired incremental step.
When called, a new closure is returned that keeps a referential hold on the <code>$inc</code> value and the specified step.
The <code>$inc</code> and <code>$step</code> variables are local function variables that are bound or closed over the returned closure to retain the reference.</p><h2 id=validation-library-example>Validation Library Example</h2><p>Although these trivial examples serve well in an post context, a concrete use-case may better illustrate the power of these two concepts.
Combined, the two provide you with the ability to allow clients to easily extend a defined implementation by supplying their own behaviour, without the overhead of using object-oriented inheritance.</p><p>To provide a real-life use-case, I have abstracted the dynamic method implementation into a trait that can then be reused.
Simply put, the following example allows a user to register a lambda or closure with the specified instance, which is invoked if no concrete method of the same name exists within the class.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#66d9ef>trait</span> <span style=color:#a6e22e>DynamicMethod</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> $methods <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>register</span>($name, <span style=color:#a6e22e>Closure</span> $closure)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>methods</span>[$name] <span style=color:#f92672>=</span> $closure<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>bindTo</span>($this, <span style=color:#a6e22e>get_class</span>());
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> __call($name, <span style=color:#66d9ef>array</span> $args)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>isset</span>($this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>methods</span>[$name])) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>call_user_func_array</span>($this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>methods</span>[$name], $args);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>BadFunctionCallException</span>(<span style=color:#e6db74>&#34;&#39;</span><span style=color:#e6db74>$name</span><span style=color:#e6db74>&#39; does not exist.&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>The use of object binding (using <code>bindTo</code>) allows us (similarly to JavaScript) to provide the function with a context, ensuring that <code>$this</code> and <code>static</code> access the correct environment.
Below is an example validation library that uses the trait above, allowing the client to expand the rules available on an instance basis (this works well with a singleton IoC).
Note the use of the validation <code>isRuleName</code> pattern, and the ability to validate the negation of a specified rule.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Validate</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>use</span> <span style=color:#a6e22e>DynamicMethod</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> $subject, $rules;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>check</span>($subject)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>subject</span> <span style=color:#f92672>=</span> $subject;
</span></span><span style=display:flex><span>        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>rules</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> $this;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>is</span>(<span style=color:#75715e>/* $rules... */</span>)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>rules</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>array_merge</span>($this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>rules</span>, <span style=color:#a6e22e>func_get_args</span>());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> $this;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>valid</span>()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>foreach</span> ($this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>rules</span> <span style=color:#66d9ef>as</span> $rule) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>list</span>($bool, $name) <span style=color:#f92672>=</span> <span style=color:#66d9ef>static</span><span style=color:#f92672>::</span><span style=color:#a6e22e>process</span>($rule);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> ($bool <span style=color:#f92672>!=</span> <span style=color:#a6e22e>call_user_func_array</span>([ $this, $name ], [])) {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>process</span>($rule)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        $bool <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>strpos</span>($rule, <span style=color:#e6db74>&#39;!&#39;</span>) <span style=color:#f92672>===</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>            $rule <span style=color:#f92672>=</span> <span style=color:#a6e22e>substr</span>($rule, <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>            $bool <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        $rule <span style=color:#f92672>=</span> <span style=color:#a6e22e>str_replace</span>(<span style=color:#e6db74>&#39; &#39;</span>, <span style=color:#e6db74>&#39;&#39;</span>, <span style=color:#a6e22e>ucwords</span>(<span style=color:#a6e22e>str_replace</span>(<span style=color:#e6db74>&#39;_&#39;</span>, <span style=color:#e6db74>&#39; &#39;</span>, $rule)));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> [ $bool, <span style=color:#e6db74>&#39;is&#39;</span> <span style=color:#f92672>.</span> $rule ];
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>isPresent</span>()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#f92672>!!</span> $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>subject</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>isAlpha</span>()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>preg_match</span>(<span style=color:#e6db74>&#39;/^[A-z]+$/&#39;</span>, $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>subject</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>isNumber</span>()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>preg_match</span>(<span style=color:#e6db74>&#39;/^[0-9]+$/&#39;</span>, $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>subject</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$v <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Validate</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$v<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>check</span>(<span style=color:#e6db74>&#39;1234&#39;</span>)
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>is</span>(<span style=color:#e6db74>&#39;present&#39;</span>, <span style=color:#e6db74>&#39;number&#39;</span>, <span style=color:#e6db74>&#39;!alpha&#39;</span>)
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>valid</span>(); <span style=color:#75715e>// bool(true)
</span></span></span></code></pre></div><p>The library above provides a very minimalist set of validation rules from which any real-world use-case would soon demand more.
Typically, the object-oriented approach would be adopted, and you would continue to extend the class definition with your own custom validators.
However, with the inclusion of the <code>DynamicMethod</code> trait, we are able to simply extend the functionality through the use of functions.
Below is an example of creating email validation functionality by registering a lambda with the instance.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span>$v<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>register</span>(<span style=color:#e6db74>&#39;isEmail&#39;</span>, <span style=color:#66d9ef>function</span>()
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>filter_var</span>($this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>subject</span>, <span style=color:#a6e22e>FILTER_VALIDATE_EMAIL</span>);
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$v<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>check</span>(<span style=color:#e6db74>&#39;joe@bloggs.com&#39;</span>)
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>is</span>(<span style=color:#e6db74>&#39;present&#39;</span>, <span style=color:#e6db74>&#39;email&#39;</span>, <span style=color:#e6db74>&#39;!number&#39;</span>)
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>valid</span>(); <span style=color:#75715e>// bool(true)
</span></span></span></code></pre></div><p>As you can see, we are able to access the instance variables and environment in a similar manner to methods that are defined in the class itself.
We are also able to run the validation check in a similar manner.
We can then expand on this example by using a closure which utilises the current state of the <code>$domains</code> array to not only run the previous check, but also to ensure that the domain is present in a specified permit list.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span>$domains <span style=color:#f92672>=</span> [ <span style=color:#e6db74>&#39;bloggs.com&#39;</span>, <span style=color:#e6db74>&#39;bloggs.co.uk&#39;</span> ];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$v<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>register</span>(<span style=color:#e6db74>&#39;isPermittedEmail&#39;</span>, <span style=color:#66d9ef>function</span>() <span style=color:#66d9ef>use</span> ($domains)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> ($this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>isEmail</span>()) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>list</span>($name, $domain) <span style=color:#f92672>=</span> <span style=color:#a6e22e>explode</span>(<span style=color:#e6db74>&#39;@&#39;</span>, $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>subject</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>in_array</span>($domain, $domains);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$v<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>check</span>(<span style=color:#e6db74>&#39;joe@bloggs.co.uk&#39;</span>)
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>is</span>(<span style=color:#e6db74>&#39;present&#39;</span>, <span style=color:#e6db74>&#39;permitted_email&#39;</span>)
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>valid</span>(); <span style=color:#75715e>// bool(true)
</span></span></span></code></pre></div><p>Looking at the example library above, I hope that you are able to notice some of the strengths that come from utilising these concepts.</p></main><footer class=post__tags><a href=/archive/tag/php>php</a><a href=/archive/tag/functional-programming>functional-programming</a></footer></article></main><footer class="site-footer wrapper"><div>&copy; 2025, Edd Mann</div></footer><script>(function(){document.querySelector(".site-header__mobile-navigation-button").addEventListener("click",e=>{document.documentElement.classList.toggle("mobile-navigation-open"),e.target.setAttribute("aria-expanded",e.target.getAttribute("aria-expanded")==="false"?"true":"false")});const n=document.querySelector(".site-header");let t=window.pageYOffset,e=!1;window.addEventListener("scroll",()=>{if(e)return;const s=window.pageYOffset;window.requestAnimationFrame(()=>{n.classList.toggle("is-sticky",t>s),t=s,e=!1}),e=!0})})()</script></body></html>