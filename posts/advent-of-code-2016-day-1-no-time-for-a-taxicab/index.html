<!doctype html>
<html lang="en">
    <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Solving the Advent of Code 2016 Day 1 puzzle using Python">

    <title>Advent of Code 2016 - Day 1 - No Time for a Taxicab &middot; Edd Mann</title>

    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,700italic,400italic">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/styles.css">

    <link rel="shortcut icon" href="/favicon.ico">

    <link rel="alternate" href="/rss.xml" title="" type="application/rss+xml">

    <script>
        var _gaq=[['_setAccount','UA-32512081-1'],['_setDomainName','eddmann.com'],['_trackPageview']];
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = 'https://ssl.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>
</head>

    <body>
        <div class="container content">
            <header class="masthead">
                <h3 class="masthead-title">
                    <a href="/" title="Home">Edd Mann</a>
                    <small><i class="fa fa-code"></i> Developer</small>
                </h3>
                <nav>
                    <a href="https://twitter.com/edd_mann"><i class="fa fa-twitter"></i></a>
                    <a href="https://github.com/eddmann"><i class="fa fa-github"></i></a>
                    <a href="mailto:the@eddmann.com"><i class="fa fa-envelope"></i></a>
                </nav>
                <div class="cf"></div>
            </header>

            <main>
                <article class="post">
    <h1 class="post-title">Advent of Code 2016 - Day 1 - No Time for a Taxicab</h1>
    <time datetime="2021-03-23T00:00:00+00:00" class="post-date">23 Mar 2021</time>
    <p>Having enjoyed documenting my progress in completing the Advent of Code 2015 advent calendar in TypeScript, I have decided to do the same for 2016.
However, for this year I wish to instead explore Python.</p>



<p>I have decided on Python as Iâ€™ve been very impressed with how consise and expressive some of the solutions for the 2015 calendar I have seen on the AoC subreddit have been.</p>

<h3 id="part-1">Part 1</h3>

<p>The initial problem for the 2016 calendar requires us to navigate our way from our â€˜airdroppedâ€™ location to Easter Bunny HQ.
In doing so we are required to work out how many blocks away the location is (using <a href="https://en.wikipedia.org/wiki/Taxicab_geometry">Manhattan distance</a>).</p>

<p>We begin by parsing the provided directions into tuples of the form <code class="language-plaintext highlighter-rouge">(direction, steps)</code>.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">parse_instructions</span><span class="p">(</span><span class="nb">input</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">[[</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">:])]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">input</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="s">', '</span><span class="p">)]</span>
</code></pre></div></div>

<p>With the instructions now parsed we can (from our starting postion of <code class="language-plaintext highlighter-rouge">0,0</code>) navigate our way to the final destiation.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">COMPASS</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span>


<span class="k">def</span> <span class="nf">part1</span><span class="p">(</span><span class="nb">input</span><span class="p">):</span>
    <span class="nb">dir</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">pos</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">turn</span><span class="p">,</span> <span class="n">steps</span> <span class="ow">in</span> <span class="n">parse_instructions</span><span class="p">(</span><span class="nb">input</span><span class="p">):</span>
        <span class="nb">dir</span> <span class="o">=</span> <span class="p">(</span><span class="nb">dir</span> <span class="o">+</span> <span class="p">(</span><span class="mi">1</span> <span class="k">if</span> <span class="n">turn</span> <span class="o">==</span> <span class="s">'R'</span> <span class="k">else</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">COMPASS</span><span class="p">)</span>
        <span class="n">pos</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">p</span><span class="p">,</span> <span class="n">d</span><span class="p">:</span> <span class="n">p</span> <span class="o">+</span> <span class="n">d</span> <span class="o">*</span> <span class="n">steps</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">COMPASS</span><span class="p">[</span><span class="nb">dir</span><span class="p">]))</span>

    <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">abs</span><span class="p">,</span> <span class="n">pos</span><span class="p">))</span>
</code></pre></div></div>

<p>We are able to calculate what the revised directional cordinates which need to be applied to the current position upon each instruction using the provided <code class="language-plaintext highlighter-rouge">COMPASS</code> lookup table.
Once we have applied all the moves we return the <em>Manhattan distance</em> of the final position to return the desired answer ðŸŒŸ.</p>

<h3 id="part-2">Part 2</h3>

<p>For part two we are required to instead now work out what the first position that we see twice is.
This can be achieved storing the <em>seen</em> positions within a Set and short-circuiting the instruction application upon seeing a position again ðŸŒŸ.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">part2</span><span class="p">(</span><span class="nb">input</span><span class="p">):</span>
    <span class="nb">dir</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">pos</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">seen</span> <span class="o">=</span> <span class="p">{</span><span class="n">pos</span><span class="p">}</span>

    <span class="k">for</span> <span class="n">turn</span><span class="p">,</span> <span class="n">steps</span> <span class="ow">in</span> <span class="n">parse_instructions</span><span class="p">(</span><span class="nb">input</span><span class="p">):</span>
        <span class="nb">dir</span> <span class="o">=</span> <span class="p">(</span><span class="nb">dir</span> <span class="o">+</span> <span class="p">(</span><span class="mi">1</span> <span class="k">if</span> <span class="n">turn</span> <span class="o">==</span> <span class="s">'R'</span> <span class="k">else</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">COMPASS</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">steps</span><span class="p">):</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">operator</span><span class="p">.</span><span class="n">add</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">COMPASS</span><span class="p">[</span><span class="nb">dir</span><span class="p">]))</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">pos</span> <span class="ow">in</span> <span class="n">seen</span><span class="p">):</span>
                <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">abs</span><span class="p">,</span> <span class="n">pos</span><span class="p">))</span>
            <span class="n">seen</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>

    <span class="k">raise</span> <span class="nb">Exception</span><span class="p">(</span><span class="s">'No repeated position'</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="alternative-solutions">Alternative Solutions</h3>

<p>Like the 2015 calendar, I found that for the first couple of days solutions I had the time to devise several different ways in which to solve the problem.</p>

<p>Having a chance to explore the Python standard library I was able to take advantage of <a href="https://docs.python.org/3/library/collections.html#collections.deque"><em>Deque</em></a> which is a double-ended queue implementation.
This allows me to efficently <a href="https://docs.python.org/3/library/collections.html#collections.deque.rotate"><em>rotate</em></a> the queued items in a very succient mannor.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">part1</span><span class="p">(</span><span class="nb">input</span><span class="p">):</span>
    <span class="nb">dir</span> <span class="o">=</span> <span class="n">collections</span><span class="p">.</span><span class="n">deque</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)])</span>
    <span class="n">pos</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">turn</span><span class="p">,</span> <span class="n">steps</span> <span class="ow">in</span> <span class="n">parse_instructions</span><span class="p">(</span><span class="nb">input</span><span class="p">):</span>
        <span class="nb">dir</span><span class="p">.</span><span class="n">rotate</span><span class="p">(</span><span class="mi">1</span> <span class="k">if</span> <span class="n">turn</span> <span class="o">==</span> <span class="s">'R'</span> <span class="k">else</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">pos</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">p</span><span class="p">,</span> <span class="n">d</span><span class="p">:</span> <span class="n">p</span> <span class="o">+</span> <span class="n">d</span> <span class="o">*</span> <span class="n">steps</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="nb">dir</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>

    <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">abs</span><span class="p">,</span> <span class="n">pos</span><span class="p">))</span>
</code></pre></div></div>

<p>Having explored storing the positonal state (x and y cordinates) in tuples several times I was very excitied to see that instead we could take advantage of <a href="https://docs.python.org/3/library/cmath.html">Complex numbers</a> and model them in this form instead.
Using this method we were able to get away from the directional lookup table concept and instead just apply left and right rotations using multiplication directly.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">TURNS</span> <span class="o">=</span> <span class="p">{</span><span class="s">'R'</span><span class="p">:</span> <span class="mi">0</span><span class="o">+</span><span class="mf">1j</span><span class="p">,</span> <span class="s">'L'</span><span class="p">:</span> <span class="mi">0</span><span class="o">-</span><span class="mf">1j</span><span class="p">}</span>


<span class="k">def</span> <span class="nf">manhattan_distance</span><span class="p">(</span><span class="n">pos</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">pos</span><span class="p">.</span><span class="n">real</span><span class="p">))</span> <span class="o">+</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">pos</span><span class="p">.</span><span class="n">imag</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">part1</span><span class="p">(</span><span class="nb">input</span><span class="p">):</span>
    <span class="nb">dir</span> <span class="o">=</span> <span class="mi">1</span><span class="o">+</span><span class="mf">0j</span>
    <span class="n">pos</span> <span class="o">=</span> <span class="mi">0</span><span class="o">+</span><span class="mf">0j</span>

    <span class="k">for</span> <span class="n">turn</span><span class="p">,</span> <span class="n">steps</span> <span class="ow">in</span> <span class="n">parse_instructions</span><span class="p">(</span><span class="nb">input</span><span class="p">):</span>
        <span class="nb">dir</span> <span class="o">*=</span> <span class="n">TURNS</span><span class="p">[</span><span class="n">turn</span><span class="p">]</span>
        <span class="n">pos</span> <span class="o">+=</span> <span class="nb">dir</span> <span class="o">*</span> <span class="n">steps</span>

    <span class="k">return</span> <span class="n">manhattan_distance</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
</code></pre></div></div>

<p>This is by far my favourite way in which to solve this problem, and highlights some of the powerful features that Python has to offer.
I look forward to continuing on with my journey in solving the 2016 calendar in future posts.</p>

</article>

            </main>

            <footer class="footer">
                <img src="https://www.gravatar.com/avatar/c5c2978bb14d16460f73399c394b6acd?s=160">
                <ul>
                    <li>Developer at <a href="http://www.mybuilder.com/">MyBuilder</a></li>
                    <li><a href="http://threedevsandamaybe.com/">Three Devs and a Maybe</a> podcast co-host</li>
                    <li>All ramblings can be found in the <a href="/archive/">Archive</a></li>
                </ul>
                <div class="cf"></div>
            </footer>
        </div>
    </body>
</html>
