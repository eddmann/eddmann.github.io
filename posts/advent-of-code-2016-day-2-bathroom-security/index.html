<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Advent of Code 2016 - Day 2 - Bathroom Security - Edd Mann</title>
<meta name=description content="Solving the Advent of Code 2016 Day 2 puzzle using Python."><meta name=author content="Edd Mann"><script async src="https://www.googletagmanager.com/gtag/js?id=G-ZPQ7WHNXH4"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-ZPQ7WHNXH4")}</script><meta itemprop=name content="Advent of Code 2016 - Day 2 - Bathroom Security"><meta itemprop=description content="On the second day of Advent of Code 2016, we are asked to work out what a bathroom code is based on the supplied instructions."><meta itemprop=datePublished content="2021-03-24T00:00:00+00:00"><meta itemprop=dateModified content="2021-03-24T00:00:00+00:00"><meta itemprop=wordCount content="515"><meta itemprop=keywords content="Advent-of-Code,Advent-of-Code-2016,Python"><meta property="og:url" content="https://eddmann.com/posts/advent-of-code-2016-day-2-bathroom-security/"><meta property="og:site_name" content="Edd Mann"><meta property="og:title" content="Advent of Code 2016 - Day 2 - Bathroom Security"><meta property="og:description" content="On the second day of Advent of Code 2016, we are asked to work out what a bathroom code is based on the supplied instructions."><meta property="og:locale" content="en_GB"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-03-24T00:00:00+00:00"><meta property="article:modified_time" content="2021-03-24T00:00:00+00:00"><meta property="article:tag" content="Advent-of-Code"><meta property="article:tag" content="Advent-of-Code-2016"><meta property="article:tag" content="Python"><meta name=twitter:card content="summary"><meta name=twitter:title content="Advent of Code 2016 - Day 2 - Bathroom Security"><meta name=twitter:description content="On the second day of Advent of Code 2016, we are asked to work out what a bathroom code is based on the supplied instructions."><meta name=twitter:site content="@edd_mann"><link rel=stylesheet href=/css/style.min.4c8b66c005db4efc68625e4ceed190f2dc110d342d05ffb19ba924cc13c3ef15.css integrity="sha256-TItmwAXbTvxoYl5M7tGQ8twRDTQtBf+xm6kkzBPD7xU="><link rel=preload as=image href=/assets/x.svg crossorigin=anonymous><link rel=preload as=image href=/assets/github.svg crossorigin=anonymous><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://eddmann.com/posts/advent-of-code-2016-day-2-bathroom-security/><script>document.documentElement.setAttribute("data-theme",localStorage.getItem("theme")||window.matchMedia("(prefers-color-scheme: dark)").matches&&"dark"||"light")</script><script src=/script.min.da71ac9c7b8bd4e644618df0ab735aed1393aad3cb5e5c57e5adc300fe7c8209.js integrity="sha256-2nGsnHuL1OZEYY3wq3Na7ROTqtPLXlxX5a3DAP58ggk=" defer></script></head><body><header class="site-header l-wrapper"><a href=https://eddmann.com/><h3 class=site-header__title>Edd Mann
<span style=--url:url(/assets/code.svg)>Developer</span></h3></a><button class=site-header__mobile-navigation-button type=button title="Toggle mobile site navigation" aria-label="Toggle mobile site navigation" aria-expanded=false aria-controls=site-navigation></button><div class=site-header__navigation id=site-navigation><nav aria-label="Primary navigation"><ul class=site-header__primary-navigation><li><a href=/archive>Archive</a></li><li><a href=/projects>Projects</a></li><li><a href=/about>About</a></li></ul></nav><nav aria-label="Social links"><ul class=site-header__social-navigation><li><a class=social-icon style=--url:url(/assets/x.svg) href=https://x.com/edd_mann rel="external noopener" target=_blank>Twitter (X)</a></li><li><a class=social-icon style=--url:url(/assets/github.svg) href=https://github.com/eddmann rel="external noopener" target=_blank>GitHub</a></li></ul></nav></div></header><main class=l-wrapper><article><header class=l-page-title><h1 class=u-transition-between-pages style=--id:advent-of-code-2016-day-2-bathroom-security>Advent of Code 2016 - Day 2 - Bathroom Security</h1><time datetime=2021-03-24T00:00:00Z class=published-at>Mar 24, 2021</time></header><main class=u-prose><p>On the second day of Advent of Code 2016, we are asked to work out what a bathroom code is based on the supplied instructions.</p><h2 id=part-1>Part 1</h2><p>For part one, we are required to follow our input (instructions <em>UDLR</em> per keycode) based on a <em>3x3 1-9</em> keypad.
We begin by generating a dictionary lookup of the supplied keypad based on <em>x, y</em> coordinates to their related key.
In a similar manner to how we used complex numbers to represent <em>x, y</em> coordinates in the previous solution, we will be doing the same here.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>generate_keypad</span>(input):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> {complex(x, y): key
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> y, line <span style=color:#f92672>in</span> enumerate(input<span style=color:#f92672>.</span>splitlines())
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> x, key <span style=color:#f92672>in</span> enumerate(line<span style=color:#f92672>.</span>split())
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> key <span style=color:#f92672>!=</span> <span style=color:#e6db74>&#39;.&#39;</span>}
</span></span></code></pre></div><p>To correctly handle any intentional whitespace going forward, we will represent this intent using a <code>.</code>.
From here, we can then create a function that will take in the keypad, along with the initial key position and instructions, and return the resulting keycode.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>DIRECTIONS <span style=color:#f92672>=</span> {<span style=color:#e6db74>&#39;U&#39;</span>: <span style=color:#ae81ff>0</span><span style=color:#f92672>+-</span><span style=color:#ae81ff>1</span>j, <span style=color:#e6db74>&#39;D&#39;</span>: <span style=color:#ae81ff>0</span><span style=color:#f92672>+</span><span style=color:#ae81ff>1</span>j, <span style=color:#e6db74>&#39;L&#39;</span>: <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span><span style=color:#f92672>+</span><span style=color:#ae81ff>0</span>j, <span style=color:#e6db74>&#39;R&#39;</span>: <span style=color:#ae81ff>1</span><span style=color:#f92672>+</span><span style=color:#ae81ff>0</span>j}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>calc_keycode</span>(keypad, initial_key, instructions):
</span></span><span style=display:flex><span>    pos <span style=color:#f92672>=</span> next(pos <span style=color:#66d9ef>for</span> pos, key <span style=color:#f92672>in</span> keypad<span style=color:#f92672>.</span>items() <span style=color:#66d9ef>if</span> key <span style=color:#f92672>==</span> initial_key)
</span></span><span style=display:flex><span>    code <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> instruction <span style=color:#f92672>in</span> instructions:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> direction <span style=color:#f92672>in</span> instruction:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> ((next_pos <span style=color:#f92672>:=</span> pos <span style=color:#f92672>+</span> DIRECTIONS[direction]) <span style=color:#f92672>in</span> keypad):
</span></span><span style=display:flex><span>                pos <span style=color:#f92672>=</span> next_pos
</span></span><span style=display:flex><span>        code <span style=color:#f92672>+=</span> keypad[pos]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> code
</span></span></code></pre></div><p>Using an <a href=https://www.python.org/dev/peps/pep-0572/ rel="external noopener" target=_blank>assignment expression</a>, we can succinctly express that we only wish to apply positional moves that are within the supplied keypad bounds.
Once we have exhausted the given code instruction directions, we append this to the resulting code.
Finally, we return the complete code to the caller.</p><p>With these building blocks in place, we can compose them together to produce the desired answer ðŸŒŸ.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>part1</span>(input):
</span></span><span style=display:flex><span>    keypad <span style=color:#f92672>=</span> generate_keypad(<span style=color:#e6db74>&#34;&#34;&#34;1 2 3
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                                4 5 6
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                                7 8 9&#34;&#34;&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> calc_keycode(keypad, initial_key<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;5&#34;</span>, instructions<span style=color:#f92672>=</span>input<span style=color:#f92672>.</span>splitlines())
</span></span></code></pre></div><h2 id=part-2>Part 2</h2><p>For part two, we are required to instead discern what the keycode will be based on a revised keypad.
Fortunately, based on the building blocks we already have in place, we can simply update the <code>generate_keypad</code> argument.
In doing so, we produce the answer we desire to complete part two ðŸŒŸ.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>part2</span>(input):
</span></span><span style=display:flex><span>    keypad <span style=color:#f92672>=</span> generate_keypad(<span style=color:#e6db74>&#34;&#34;&#34;. . 1 . .
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                                . 2 3 4 .
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                                5 6 7 8 9
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                                . A B C .
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                                . . D . .&#34;&#34;&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> calc_keycode(keypad, initial_key<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;5&#34;</span>, instructions<span style=color:#f92672>=</span>input<span style=color:#f92672>.</span>splitlines())
</span></span></code></pre></div><h2 id=alternative-solution>Alternative Solution</h2><p>Instead of representing the coordinate as a complex number, I additionally explored creating a more aptly modelled value object that managed this state in an immutable manner.
Using <a href=https://docs.python.org/3/library/dataclasses.html rel="external noopener" target=_blank>Data Classes</a> and the <code>__add__</code> dunder method, I was able to design the following:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#a6e22e>@dataclass</span>(frozen<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Point2D</span>:
</span></span><span style=display:flex><span>    x: int
</span></span><span style=display:flex><span>    y: int
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> __add__(self, other):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> isinstance(other, Point2D):
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> NotImplemented
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> Point2D(self<span style=color:#f92672>.</span>x <span style=color:#f92672>+</span> other<span style=color:#f92672>.</span>x, self<span style=color:#f92672>.</span>y <span style=color:#f92672>+</span> other<span style=color:#f92672>.</span>y)
</span></span></code></pre></div><p>The only other aspects of the original solution that required modification were in the instantiation of these objects.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>DIRECTIONS <span style=color:#f92672>=</span> {<span style=color:#e6db74>&#39;U&#39;</span>: Point2D(<span style=color:#ae81ff>0</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>), <span style=color:#e6db74>&#39;D&#39;</span>: Point2D(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>),
</span></span><span style=display:flex><span>              <span style=color:#e6db74>&#39;L&#39;</span>: Point2D(<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>), <span style=color:#e6db74>&#39;R&#39;</span>: Point2D(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>)}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>generate_keypad</span>(input):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> {Point2D(x, y): key
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> y, line <span style=color:#f92672>in</span> enumerate(input<span style=color:#f92672>.</span>splitlines())
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> x, key <span style=color:#f92672>in</span> enumerate(line<span style=color:#f92672>.</span>split())
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> key <span style=color:#f92672>!=</span> <span style=color:#e6db74>&#39;.&#39;</span>}
</span></span></code></pre></div><p>Providing such a model is preferred over <em>piggybacking</em> on complex numbers, as this clearly expresses its purpose and intent.</p></main><footer class=post-footer><ul class="tags tags--large"><li><a href=/archive/tag/advent-of-code>advent-of-code</a></li><li><a href=/archive/tag/advent-of-code-2016>advent-of-code-2016</a></li><li><a href=/archive/tag/python>python</a></li></ul><div class=related><h3 class=related__title>Related Posts</h3><ul class=related__posts><li><a href=/posts/advent-of-code-2016-day-1-no-time-for-a-taxicab/>Advent of Code 2016 - Day 1 - No Time for a Taxicab</a></li><li><a href=/posts/advent-of-code-2015-day-25-let-it-snow/>Advent of Code 2015 - Day 25 - Let It Snow</a></li><li><a href=/posts/advent-of-code-2015-day-24-it-hangs-in-the-balance/>Advent of Code 2015 - Day 24 - It Hangs in the Balance</a></li><li><a href=/posts/advent-of-code-2015-day-23-opening-the-turing-lock/>Advent of Code 2015 - Day 23 - Opening the Turing Lock</a></li><li><a href=/posts/advent-of-code-2015-day-22-wizard-simulator-20xx/>Advent of Code 2015 - Day 22 - Wizard Simulator 20XX</a></li></ul></div></footer></article><div class="podcast-ad u-overlay-wrapper"><div class=podcast-ad__artwork><img src=https://compiledconversations.com/album-art.jpg alt="Compiled Conversations podcast album art" class=podcast-ad__artwork-image></div><div class=podcast-ad__content><h3 class=podcast-ad__title>Compiled Conversations</h3><p class=podcast-ad__description>Podcast I host, featuring conversations with the people shaping software and technology.</p><div class=podcast-ad__link>Check out the show</a></div><a class=u-overlay href=https://compiledconversations.com target=_blank>Listen to Compiled Conversations</a></div><div class=scroll-watcher></div></main><footer class="site-footer l-wrapper"><div>&copy; 2025, Edd Mann</div><button class=site-footer__theme-toggle type=button title="Toggle theme" aria-label="Toggle theme"><svg fill="currentcolor" viewBox="0 0 32 32" role="img"><title>Theme toggle icon</title><desc>A circle representing the moon for toggling theme</desc><path d="M16 .5C7.4.5.5 7.4.5 16S7.4 31.5 16 31.5 31.5 24.6 31.5 16 24.6.5 16 .5zm0 28.1V3.4C23 3.4 28.6 9 28.6 16S23 28.6 16 28.6z"/></svg></button></footer></body></html>