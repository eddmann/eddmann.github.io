<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Self-Signed SSL Certificates with Nginx and Apache - Edd Mann</title>
<meta name=description content="Master the process of creating self-signed SSL certificates on CentOS for secure development environments using Nginx and Apache."><meta name=author content="Edd Mann"><script async src="https://www.googletagmanager.com/gtag/js?id=G-ZPQ7WHNXH4"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-ZPQ7WHNXH4")}</script><meta itemprop=name content="Self-Signed SSL Certificates with Nginx and Apache"><meta itemprop=description content="Since having the opportunity to discuss web application security (part 1, part 2) recently on the podcast, I thought it was a good time to have a deeper look into SSL/TLS (Transport Layer Security). There are plenty of good resources online discussing the technical side of the topic. However, at a high level, point-to-point encryption and server identification are the two problems it attempts to solve."><meta itemprop=datePublished content="2014-04-05T00:00:00+00:00"><meta itemprop=dateModified content="2014-04-05T00:00:00+00:00"><meta itemprop=wordCount content="442"><meta itemprop=keywords content="Ssl,Nginx,Apache"><meta property="og:url" content="https://eddmann.com/posts/self-signed-ssl-certificates-with-nginx-and-apache/"><meta property="og:site_name" content="Edd Mann"><meta property="og:title" content="Self-Signed SSL Certificates with Nginx and Apache"><meta property="og:description" content="Since having the opportunity to discuss web application security (part 1, part 2) recently on the podcast, I thought it was a good time to have a deeper look into SSL/TLS (Transport Layer Security). There are plenty of good resources online discussing the technical side of the topic. However, at a high level, point-to-point encryption and server identification are the two problems it attempts to solve."><meta property="og:locale" content="en_GB"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2014-04-05T00:00:00+00:00"><meta property="article:modified_time" content="2014-04-05T00:00:00+00:00"><meta property="article:tag" content="Ssl"><meta property="article:tag" content="Nginx"><meta property="article:tag" content="Apache"><meta name=twitter:card content="summary"><meta name=twitter:title content="Self-Signed SSL Certificates with Nginx and Apache"><meta name=twitter:description content="Since having the opportunity to discuss web application security (part 1, part 2) recently on the podcast, I thought it was a good time to have a deeper look into SSL/TLS (Transport Layer Security). There are plenty of good resources online discussing the technical side of the topic. However, at a high level, point-to-point encryption and server identification are the two problems it attempts to solve."><meta name=twitter:site content="@edd_mann"><link rel="preload stylesheet" as=style href=/css/style.min.a5107d712048e2bf498ca68b768b337bccdd6ce7b257419de1c0762b86ab1143.css integrity="sha256-pRB9cSBI4r9JjKaLdosze8zdbOeyV0Gd4cB2K4arEUM="><link rel=preload as=image href=/assets/x.svg><link rel=preload as=image href=/assets/github.svg><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://eddmann.com/posts/self-signed-ssl-certificates-with-nginx-and-apache/></head><body><header class="site-header wrapper"><a href=https://eddmann.com/><h3 class=site-header__title>Edd Mann
<span style=--url:url(/assets/code.svg)>Developer</span></h3></a><div class=site-header__mobile-navigation-button aria-label="Toggle mobile site navigation" aria-expanded=false aria-controls=site-navigation></div><div class=site-header__navigation id=site-navigation><nav aria-label="Primary navigation"><ul class=site-header__primary-navigation><li><a href=/archive>Archive</a></li><li><a href=/projects>Projects</a></li><li><a href=/about>About</a></li></ul></nav><nav aria-label="Social links"><ul class=site-header__social-navigation><li><a class=social-icon style=--url:url(/assets/x.svg) href=https://x.com/edd_mann rel="external noopener" target=_blank>Twitter (X)</a></li><li><a class=social-icon style=--url:url(/assets/github.svg) href=https://github.com/eddmann rel="external noopener" target=_blank>GitHub</a></li></ul></nav></div></header><main class=wrapper><article><header class=page-title><h1>Self-Signed SSL Certificates with Nginx and Apache</h1><time class=post__time>Apr 5, 2014</time></header><main class=prose><p>Since having the opportunity to discuss web application security (<a href=https://threedevsandamaybe.com/web-application-security-part-1/ rel="external noopener" target=_blank>part 1</a>, <a href=https://threedevsandamaybe.com/web-application-security-part-2/ rel="external noopener" target=_blank>part 2</a>) recently on the podcast, I thought it was a good time to have a deeper look into SSL/TLS (Transport Layer Security).
There are plenty of good resources online discussing the <a href="http://www.youtube.com/watch?v=iQsKdtjwtYI" rel="external noopener" target=_blank>technical side</a> of the topic.
However, at a high level, point-to-point encryption and server identification are the two problems it attempts to solve.</p><p>Self-signed SSL certificates are an inexpensive (free) means of taking advantage of point-to-point encryption on non-production, development server setups.
The caveat to this is that visiting browsers will warn the user that the certificate should not be trusted, as it has been self-signed.
If you require a trusted certificate for a production application, you are required to purchase a certificate from a reputable CA (Certificate Authority) to verify your identity.</p><h2 id=creating-the-self-signed-certificate>Creating the Self-Signed Certificate</h2><p>The examples in this post will be directed at a CentOS setup; however, they should not differ much for other distributions.
First, we are required to create a private key to sign the certificate that will be used for visiting users.
I have decided to use strong encryption (4096 bits, although this can be lowered) and make the certificate valid for one year from creation.
In order to allow the command to run in non-interactive mode, I have supplied the required certificate details using the &lsquo;subj&rsquo; option.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ openssl req -newkey rsa:4096 -days <span style=color:#ae81ff>365</span> -nodes -x509 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    -subj <span style=color:#e6db74>&#34;/C=GB/ST=London/L=Fulham/O=Local/OU=Development/CN=local.dev/emailAddress=email@local.dev&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    -keyout local.dev.key <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    -out local.dev.crt
</span></span></code></pre></div><p>We can now move the certificate and private key to the desired location and tighten up file permissions on the two files.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ cp local.dev.crt /etc/ssl/certs/
</span></span><span style=display:flex><span>$ cp local.dev.key /etc/ssl/private/
</span></span><span style=display:flex><span>$ chmod <span style=color:#ae81ff>600</span> /etc/ssl/certs/local.dev.crt /etc/ssl/private/local.dev.key
</span></span></code></pre></div><h2 id=apache-configuration>Apache Configuration</h2><p>Now that we have generated the private key and certificate, we must next make sure that the SSL module is present and enabled in the Apache installation.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ yum install mod_ssl
</span></span></code></pre></div><p>With the prerequisites out of the way, we are now able to access via port 443 (HTTPS) using the generated certificate.</p><pre tabindex=0><code class=language-conf data-lang=conf>&lt;VirtualHost *:443&gt;

    SSLEngine On
    SSLCertificateFile /etc/ssl/certs/local.dev.crt
    SSLCertificateKeyFile /etc/ssl/private/local.dev.key

    # ...

&lt;/VirtualHost&gt;
</code></pre><p>Optionally, we can also force all traffic to be transmitted over HTTPS by redirecting HTTP requests to use the secure connection.</p><pre tabindex=0><code class=language-conf data-lang=conf>&lt;VirtualHost *:80&gt;

   Redirect permanent / https://www.example.com/

   # ...

&lt;/VirtualHost&gt;
</code></pre><h2 id=nginx-configuration>Nginx Configuration</h2><p>Using a similar process as the Apache configuration, we can configure Nginx to use the generated certificate when accessed over port 443.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-nginx data-lang=nginx><span style=display:flex><span><span style=color:#66d9ef>server</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>listen</span> <span style=color:#ae81ff>443</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>ssl</span> <span style=color:#66d9ef>on</span>;
</span></span><span style=display:flex><span>    <span style=color:#f92672>ssl_certificate</span> <span style=color:#e6db74>/etc/ssl/certs/local.dev.crt</span>;
</span></span><span style=display:flex><span>    <span style=color:#f92672>ssl_certificate_key</span> <span style=color:#e6db74>/etc/ssl/private/local.dev.key</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Alternatively, if you wish for all traffic to be transmitted via HTTPS, we can set up a permanent redirect on port 80.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-nginx data-lang=nginx><span style=display:flex><span><span style=color:#66d9ef>server</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>listen</span> <span style=color:#ae81ff>80</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>return</span> <span style=color:#ae81ff>301</span> <span style=color:#e6db74>https://</span>$host$request_uri;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></main><footer class=post__tags><a href=/archive/tag/ssl>ssl</a><a href=/archive/tag/nginx>nginx</a><a href=/archive/tag/apache>apache</a></footer></article><div class=scroll-watcher></div></main><footer class="site-footer wrapper"><div>&copy; 2025, Edd Mann</div></footer><script>(function(){document.querySelector(".site-header__mobile-navigation-button").addEventListener("click",e=>{document.documentElement.classList.toggle("mobile-navigation-open"),e.target.setAttribute("aria-expanded",e.target.getAttribute("aria-expanded")==="false"?"true":"false")});const n=document.querySelector(".site-header");let t=window.pageYOffset,e=!1;window.addEventListener("scroll",()=>{if(e)return;setTimeout(()=>{const s=window.pageYOffset;n.classList.toggle("is-sticky",s>0&&t>s),t=s,e=!1},500),e=!0})})()</script></body></html>