<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Advent of Code 2015 - Day 20 - Infinite Elves and Infinite Houses - Edd Mann</title>
<meta name=description content="Solving the Advent of Code 2015 Day 20 puzzle using TypeScript."><meta name=author content="Edd Mann"><script async src="https://www.googletagmanager.com/gtag/js?id=G-ZPQ7WHNXH4"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-ZPQ7WHNXH4")}</script><meta itemprop=name content="Advent of Code 2015 - Day 20 - Infinite Elves and Infinite Houses"><meta itemprop=description content="On the twentieth day of Advent of Code 2015, we are asked to help work out how many presents the Elves will deliver to specific houses."><meta itemprop=datePublished content="2021-02-13T00:00:00+00:00"><meta itemprop=dateModified content="2021-02-13T00:00:00+00:00"><meta itemprop=wordCount content="482"><meta itemprop=keywords content="Advent-of-Code,Advent-of-Code-2015,Typescript"><meta property="og:url" content="https://eddmann.com/posts/advent-of-code-2015-day-20-infinite-elves-and-infinite-houses/"><meta property="og:site_name" content="Edd Mann"><meta property="og:title" content="Advent of Code 2015 - Day 20 - Infinite Elves and Infinite Houses"><meta property="og:description" content="On the twentieth day of Advent of Code 2015, we are asked to help work out how many presents the Elves will deliver to specific houses."><meta property="og:locale" content="en_GB"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-02-13T00:00:00+00:00"><meta property="article:modified_time" content="2021-02-13T00:00:00+00:00"><meta property="article:tag" content="Advent-of-Code"><meta property="article:tag" content="Advent-of-Code-2015"><meta property="article:tag" content="Typescript"><meta name=twitter:card content="summary"><meta name=twitter:title content="Advent of Code 2015 - Day 20 - Infinite Elves and Infinite Houses"><meta name=twitter:description content="On the twentieth day of Advent of Code 2015, we are asked to help work out how many presents the Elves will deliver to specific houses."><meta name=twitter:site content="@edd_mann"><link rel="preload stylesheet" as=style href=/css/style.min.6c18b9cbfe138a24784e64860eaa9d70076170f03c68d8be3b3f1ae99e51df9f.css integrity="sha256-bBi5y/4TiiR4TmSGDqqdcAdhcPA8aNi+Oz8a6Z5R358="><link rel=preload as=image href=/assets/x.svg><link rel=preload as=image href=/assets/github.svg><link rel=icon type=image/png sizes=32x32 href=/favicon-32x3x.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://eddmann.com/posts/advent-of-code-2015-day-20-infinite-elves-and-infinite-houses/></head><body><header class="site-header wrapper"><a href=https://eddmann.com/><h3 class=site-header__title>Edd Mann
<span style=--url:url(/assets/code.svg)>Developer</span></h3></a><div class=site-header__mobile-navigation-button aria-label="Toggle mobile site navigation" aria-expanded=false aria-controls=site-navigation></div><div class=site-header__navigation id=site-navigation><nav aria-label="Primary navigation"><ul class=site-header__primary-navigation><li><a href=/archive>Archive</a></li><li><a href=/projects>Projects</a></li><li><a href=/about>About</a></li></ul></nav><nav aria-label="Social links"><ul class=site-header__social-navigation><li><a class=social-icon style=--url:url(/assets/x.svg) href=https://x.com/edd_mann rel="external noopener" target=_blank>Twitter (X)</a></li><li><a class=social-icon style=--url:url(/assets/github.svg) href=https://github.com/eddmann rel="external noopener" target=_blank>GitHub</a></li></ul></nav></div></header><main class=wrapper><article><header class=page-title><h1>Advent of Code 2015 - Day 20 - Infinite Elves and Infinite Houses</h1><time class=post__time>Feb 13, 2021</time></header><main class=prose><p>On the twentieth day of Advent of Code 2015, we are asked to help work out how many presents the Elves will deliver to specific houses.</p><h2 id=part-1>Part 1</h2><p>To keep the Elves busy, Santa has them deliver some presents by hand, door-to-door.
He sends them down a street with infinite houses numbered sequentially: 1, 2, 3, 4, 5, and so on.
Each Elf is assigned a number, too, and delivers presents to houses based on that number.
There are infinitely many Elves, numbered starting with 1.
Each Elf delivers presents equal to ten times his or her number at each house.</p><p>For part one, we are asked to determine what is the lowest house number that will receive at least <em>29,000,000 presents</em>.
To tackle this problem, we could opt for a brute-force approach, storing each house in memory and iterating through each Elf&rsquo;s deliveries.
However, upon closer inspection, we see that each house is visited by the Elves that share its factors.
As such, we can devise a <a href=https://rosettacode.org/wiki/Factors_of_an_integer rel="external noopener" target=_blank>Factors function</a> which optimally determines which Elves visited a given house number.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>elvesWhoVisited</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>houseNo</span>: <span style=color:#66d9ef>number</span>)<span style=color:#f92672>:</span> <span style=color:#66d9ef>number</span>[] <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>elves</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>houseNo</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>?</span> [<span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>houseNo</span>] <span style=color:#f92672>:</span> [<span style=color:#ae81ff>1</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>elf</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>; <span style=color:#a6e22e>elf</span> <span style=color:#f92672>&lt;=</span> Math.<span style=color:#a6e22e>sqrt</span>(<span style=color:#a6e22e>houseNo</span>); <span style=color:#a6e22e>elf</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>houseNo</span> <span style=color:#f92672>%</span> <span style=color:#a6e22e>elf</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>elves</span>.<span style=color:#a6e22e>push</span>(<span style=color:#a6e22e>elf</span>);
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>elf</span> <span style=color:#f92672>**</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>!==</span> <span style=color:#a6e22e>houseNo</span>) <span style=color:#a6e22e>elves</span>.<span style=color:#a6e22e>push</span>(<span style=color:#a6e22e>houseNo</span> <span style=color:#f92672>/</span> <span style=color:#a6e22e>elf</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>elves</span>;
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><p>With the ability to determine which Elves visited a given house, we can increment through each house number (starting at 1) until we reach a house where the presents the Elves delivered (10 times their own number) is greater than the supplied input.
We can then return this house number to answer part one ðŸŒŸ.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>part1</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>input</span>: <span style=color:#66d9ef>string</span>)<span style=color:#f92672>:</span> <span style=color:#66d9ef>number</span> <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>numOfPresents</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>toInt</span>(<span style=color:#a6e22e>input</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>presentsPerHouse</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>10</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>houseNo</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>while</span> (<span style=color:#66d9ef>true</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>elves</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>elvesWhoVisited</span>(<span style=color:#a6e22e>houseNo</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>elves</span>.<span style=color:#a6e22e>reduce</span>(<span style=color:#a6e22e>sum</span>) <span style=color:#f92672>*</span> <span style=color:#a6e22e>presentsPerHouse</span> <span style=color:#f92672>&gt;=</span> <span style=color:#a6e22e>numOfPresents</span>) <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>houseNo</span> <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>houseNo</span>;
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><h2 id=part-2>Part 2</h2><p>For part two, there is an imposed limit on the number of houses a given Elf can deliver presents to, which is now 50.
Along with this restriction, the total presents per house an Elf delivers is now 11.
We are now asked to determine what the new lowest house number is that will receive at least <em>29,000,000 presents</em>.</p><p>To achieve this, we can borrow a lot of the logic implemented for part one, except now we must filter out only the Elves that have not exceeded the 50-house quota.
In doing this, we can return the desired answer ðŸŒŸ.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>part2</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>input</span>: <span style=color:#66d9ef>string</span>)<span style=color:#f92672>:</span> <span style=color:#66d9ef>number</span> <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>numOfPresents</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>toInt</span>(<span style=color:#a6e22e>input</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>presentsPerHouse</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>11</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>maxDeliveriesPerElf</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>50</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>houseNo</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>while</span> (<span style=color:#66d9ef>true</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>elves</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>elvesWhoVisited</span>(<span style=color:#a6e22e>houseNo</span>).<span style=color:#a6e22e>filter</span>(
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>elf</span> <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>houseNo</span> <span style=color:#f92672>/</span> <span style=color:#a6e22e>elf</span> <span style=color:#f92672>&lt;=</span> <span style=color:#a6e22e>maxDeliveriesPerElf</span>
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>elves</span>.<span style=color:#a6e22e>reduce</span>(<span style=color:#a6e22e>sum</span>) <span style=color:#f92672>*</span> <span style=color:#a6e22e>presentsPerHouse</span> <span style=color:#f92672>&gt;=</span> <span style=color:#a6e22e>numOfPresents</span>) <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>houseNo</span> <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>houseNo</span>;
</span></span><span style=display:flex><span>};
</span></span></code></pre></div></main><footer class=post__tags><a href=/archive/tag/advent-of-code>advent-of-code</a><a href=/archive/tag/advent-of-code-2015>advent-of-code-2015</a><a href=/archive/tag/typescript>typescript</a></footer></article></main><footer class="site-footer wrapper"><div>&copy; 2025, Edd Mann</div></footer><script>(function(){document.querySelector(".site-header__mobile-navigation-button").addEventListener("click",e=>{document.documentElement.classList.toggle("mobile-navigation-open"),e.target.setAttribute("aria-expanded",e.target.getAttribute("aria-expanded")==="false"?"true":"false")});const n=document.querySelector(".site-header");let t=window.pageYOffset,e=!1;window.addEventListener("scroll",()=>{if(e)return;const s=window.pageYOffset;window.requestAnimationFrame(()=>{n.classList.toggle("is-sticky",t>s),t=s,e=!1}),e=!0})})()</script></body></html>