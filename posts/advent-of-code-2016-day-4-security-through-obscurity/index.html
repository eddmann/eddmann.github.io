<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Advent of Code 2016 - Day 4 - Security Through Obscurity - Edd Mann</title>
<meta name=description content="Solving the Advent of Code 2016 Day 4 puzzle using Python."><meta name=author content="Edd Mann"><script async src="https://www.googletagmanager.com/gtag/js?id=G-ZPQ7WHNXH4"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-ZPQ7WHNXH4")}</script><meta itemprop=name content="Advent of Code 2016 - Day 4 - Security Through Obscurity"><meta itemprop=description content="On the fourth day of Advent of Code 2016, we are asked to validate and decrypt a listing of room names."><meta itemprop=datePublished content="2021-03-26T00:00:00+00:00"><meta itemprop=dateModified content="2021-03-26T00:00:00+00:00"><meta itemprop=wordCount content="461"><meta itemprop=keywords content="Advent-of-Code,Advent-of-Code-2016,Python"><meta property="og:url" content="https://eddmann.com/posts/advent-of-code-2016-day-4-security-through-obscurity/"><meta property="og:site_name" content="Edd Mann"><meta property="og:title" content="Advent of Code 2016 - Day 4 - Security Through Obscurity"><meta property="og:description" content="On the fourth day of Advent of Code 2016, we are asked to validate and decrypt a listing of room names."><meta property="og:locale" content="en_GB"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-03-26T00:00:00+00:00"><meta property="article:modified_time" content="2021-03-26T00:00:00+00:00"><meta property="article:tag" content="Advent-of-Code"><meta property="article:tag" content="Advent-of-Code-2016"><meta property="article:tag" content="Python"><meta name=twitter:card content="summary"><meta name=twitter:title content="Advent of Code 2016 - Day 4 - Security Through Obscurity"><meta name=twitter:description content="On the fourth day of Advent of Code 2016, we are asked to validate and decrypt a listing of room names."><meta name=twitter:site content="@edd_mann"><link rel="preload stylesheet" as=style href=/css/style.min.6c18b9cbfe138a24784e64860eaa9d70076170f03c68d8be3b3f1ae99e51df9f.css integrity="sha256-bBi5y/4TiiR4TmSGDqqdcAdhcPA8aNi+Oz8a6Z5R358="><link rel=preload as=image href=/assets/x.svg><link rel=preload as=image href=/assets/github.svg><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://eddmann.com/posts/advent-of-code-2016-day-4-security-through-obscurity/></head><body><header class="site-header wrapper"><a href=https://eddmann.com/><h3 class=site-header__title>Edd Mann
<span style=--url:url(/assets/code.svg)>Developer</span></h3></a><div class=site-header__mobile-navigation-button aria-label="Toggle mobile site navigation" aria-expanded=false aria-controls=site-navigation></div><div class=site-header__navigation id=site-navigation><nav aria-label="Primary navigation"><ul class=site-header__primary-navigation><li><a href=/archive>Archive</a></li><li><a href=/projects>Projects</a></li><li><a href=/about>About</a></li></ul></nav><nav aria-label="Social links"><ul class=site-header__social-navigation><li><a class=social-icon style=--url:url(/assets/x.svg) href=https://x.com/edd_mann rel="external noopener" target=_blank>Twitter (X)</a></li><li><a class=social-icon style=--url:url(/assets/github.svg) href=https://github.com/eddmann rel="external noopener" target=_blank>GitHub</a></li></ul></nav></div></header><main class=wrapper><article><header class=page-title><h1>Advent of Code 2016 - Day 4 - Security Through Obscurity</h1><time class=post__time>Mar 26, 2021</time></header><main class=prose><p>On the fourth day of Advent of Code 2016, we are asked to validate and decrypt a listing of room names.</p><h2 id=part-1>Part 1</h2><p>The input consists of a listing of encrypted room names, each with a sector ID and accompanying checksum.
For part one, we are required to filter down to only the valid rooms (based on their checksum) and return the sum of these sector IDs.
A room is <em>real</em> (not a decoy) if the checksum is the five most common letters in the encrypted name, in order, with ties broken by alphabetisation.</p><p>We will begin by parsing each room entry into a tuple, consisting of the room name (without any <code>-</code>), sector ID (as an integer), and checksum.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>parse_rooms</span>(input):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> [(name<span style=color:#f92672>.</span>replace(<span style=color:#e6db74>&#39;-&#39;</span>, <span style=color:#e6db74>&#39;&#39;</span>), int(id), checksum)
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> (name, id, checksum) <span style=color:#f92672>in</span> re<span style=color:#f92672>.</span>findall(<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;([a-z\-]+)(\d+)\[([a-z]+)\]&#39;</span>, input)]
</span></span></code></pre></div><p>With the rooms now parsed, we can continue on to validating if a subject room is real or a decoy.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>is_real_room</span>(name, checksum):
</span></span><span style=display:flex><span>    generated <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;&#39;</span><span style=color:#f92672>.</span>join(c <span style=color:#66d9ef>for</span> c, _ <span style=color:#f92672>in</span> sorted(
</span></span><span style=display:flex><span>        Counter(name)<span style=color:#f92672>.</span>most_common(), key<span style=color:#f92672>=</span><span style=color:#66d9ef>lambda</span> o: (<span style=color:#f92672>-</span>o[<span style=color:#ae81ff>1</span>], o[<span style=color:#ae81ff>0</span>])))
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> generated<span style=color:#f92672>.</span>startswith(checksum)
</span></span></code></pre></div><p>The function above uses the <a href=https://docs.python.org/3/library/collections.html#collections.Counter rel="external noopener" target=_blank>Counter collection</a> provided within Python to tally up the letter occurrences present in the room name.
From here, we then sort the listing, initially based on occurrence <code>-o[1]</code>, and then ties based on alphabetisation <code>o[0]</code>.
As we have generated the checksum for the entire room name, we only wish to assert that this value starts with the provided checksum.</p><p>Finally, we can combine these two functions together to <em>filter-map</em> the listing down to the valid room sector IDs.
The sum of these sector IDs can then be returned to result in the desired answer ðŸŒŸ.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>part1</span>(input):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> sum(id <span style=color:#66d9ef>for</span> (name, id, checksum) <span style=color:#f92672>in</span> parse_rooms(input)
</span></span><span style=display:flex><span>               <span style=color:#66d9ef>if</span> is_real_room(name, checksum))
</span></span></code></pre></div><h2 id=part-2>Part 2</h2><p>For part two, we are required to now deduce the sector ID for the decoded room name that contains <em>northpole</em>.
The encrypted room names have been constructed using a <a href=https://en.wikipedia.org/wiki/Caesar_cipher rel="external noopener" target=_blank>Caesar cipher</a>, based on cycling each letter forward through the alphabet a number of times equal to the room&rsquo;s sector ID.
This can be achieved using Python&rsquo;s string character translation support like so.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>decode</span>(name, id):
</span></span><span style=display:flex><span>    az <span style=color:#f92672>=</span> string<span style=color:#f92672>.</span>ascii_lowercase
</span></span><span style=display:flex><span>    shift <span style=color:#f92672>=</span> id <span style=color:#f92672>%</span> len(az)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> name<span style=color:#f92672>.</span>translate(str<span style=color:#f92672>.</span>maketrans(az, az[shift:] <span style=color:#f92672>+</span> az[:shift]))
</span></span></code></pre></div><p>Alternatively, we could also achieve the same result by calculating the resulting ASCII character number per letter, like so.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>decode</span>(name, id):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;&#39;</span><span style=color:#f92672>.</span>join(chr(((ord(c) <span style=color:#f92672>-</span> ord(<span style=color:#e6db74>&#39;a&#39;</span>)) <span style=color:#f92672>+</span> id) <span style=color:#f92672>%</span> <span style=color:#ae81ff>26</span> <span style=color:#f92672>+</span> ord(<span style=color:#e6db74>&#39;a&#39;</span>)) <span style=color:#66d9ef>for</span> c <span style=color:#f92672>in</span> name)
</span></span></code></pre></div><p>Using this new function, we can now iterate through the rooms, decoding each name as we go, until we finally land on the one that includes <em>northpole</em>.
From here, we can return this room&rsquo;s sector ID and answer the second part of today&rsquo;s problem ðŸŒŸ.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>part2</span>(input):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> next(id <span style=color:#66d9ef>for</span> (name, id, _) <span style=color:#f92672>in</span> parse_rooms(input)
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> <span style=color:#e6db74>&#39;northpole&#39;</span> <span style=color:#f92672>in</span> decode(name, id))
</span></span></code></pre></div></main><footer class=post__tags><a href=/archive/tag/advent-of-code>advent-of-code</a><a href=/archive/tag/advent-of-code-2016>advent-of-code-2016</a><a href=/archive/tag/python>python</a></footer></article></main><footer class="site-footer wrapper"><div>&copy; 2025, Edd Mann</div></footer><script>(function(){document.querySelector(".site-header__mobile-navigation-button").addEventListener("click",e=>{document.documentElement.classList.toggle("mobile-navigation-open"),e.target.setAttribute("aria-expanded",e.target.getAttribute("aria-expanded")==="false"?"true":"false")});const n=document.querySelector(".site-header");let t=window.pageYOffset,e=!1;window.addEventListener("scroll",()=>{if(e)return;const s=window.pageYOffset;window.requestAnimationFrame(()=>{n.classList.toggle("is-sticky",t>s),t=s,e=!1}),e=!0})})()</script></body></html>