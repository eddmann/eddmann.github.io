<!doctype html>
<html lang="en">
    <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="This post details my experience building a Progressive Web Application (PWA) in React and TypeScript to calculate running pace, time, and distance. It explores key PWA features, including offline support, installation, and a native app-like experience across devices.">

    <title>
        
            Building a Running Calculator PWA in React and TypeScript &middot; Edd Mann
        
    </title>

    <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZPQ7WHNXH4"></script>
    <script>
       window.dataLayer = window.dataLayer || [];
       function gtag(){dataLayer.push(arguments);}
       gtag('js', new Date());
       gtag('config', 'G-ZPQ7WHNXH4');
    </script>

    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,700italic,400italic">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/styles.css">

    <link rel="shortcut icon" href="/favicon.ico">

    <link rel="alternate" href="/rss.xml" title="" type="application/rss+xml">

    
</head>

    <body>
        <div class="container content">
            <header class="masthead">
                <h3 class="masthead-title">
                    <a href="/" title="Home">Edd Mann</a>
                    <small><i class="fa fa-code"></i> Developer</small>
                </h3>
                <nav>
                    <a href="https://twitter.com/edd_mann"><i class="fa fa-twitter"></i></a>
                    <a href="https://github.com/eddmann"><i class="fa fa-github"></i></a>
                    <a href="mailto:the@eddmann.com"><i class="fa fa-envelope"></i></a>
                </nav>
                <div class="cf"></div>
            </header>

            <main>
                <article class="post">
    <h1 class="post-title">Building a Running Calculator PWA in React and TypeScript</h1>
    <time datetime="2023-10-31T00:00:00+00:00" class="post-date">31 Oct 2023</time>
    <p>I have been an avid runner for many years now, but I still get confused by imperial and metric measurements.
On top of this, the number of times I seek out a random website to perform some form of pace/distance calculation is too often to count.
What I wanted was a desktop and mobile application that could perform pace, distance, and time calculations, along with imperial/metric conversions - <em>a swiss-army knife of running calculators</em>.
In this post, I would like to document my experience building a <a href="https://web.dev/articles/what-are-pwas">Progressive Web Application</a> (PWA) that does just this, providing a native app-like experience across iOS, Android, and Desktop.</p>



<p><a href="https://eddmann.com/running-calculator/">
  <img src="/uploads/building-a-running-calculator-pwa-in-react-and-typescript/app-icon.png" style="max-width:150px;border-radius:20%;margin:0 auto;" alt="App Icon" />
</a></p>

<p>Progressive Web Applications provide a means of leveraging the browser and web technologies to enable a <em>native app</em>-like mobile and desktop experience.
They use the conventional web stack that web developers are familiar with: HTML, JavaScript, and CSS.
This, in turn, allows you to deploy at the same frequency and ease as you would a conventional website, but without the headaches of app store submissions.</p>

<h2 id="the-app">The App</h2>

<div style="display:flex;gap:0.5rem;flex-direction:row;margin:1rem 0 0;">
  <div>
    <img src="/uploads/building-a-running-calculator-pwa-in-react-and-typescript/ios-pace.png" alt="Pace" />
  </div>
  <div>
    <img src="/uploads/building-a-running-calculator-pwa-in-react-and-typescript/ios-distance.png" alt="Distance" />
  </div>
  <div>
    <img src="/uploads/building-a-running-calculator-pwa-in-react-and-typescript/ios-time.png" alt="Time" />
  </div>
</div>

<p>The resulting application has been built using React, TypeScript, CSS-in-JS (<a href="https://styled-components.com/">styled-components</a>), and bundled with <a href="https://vitejs.dev/">Vite</a>.
I have leveraged the <a href="https://vite-pwa-org.netlify.app/">Vite PWA plugin</a> to abstract away generating the required Service Worker, Web App Manifest, and icon assets to <a href="https://developer.mozilla.org/en-US/docs/Web/Progressive_web_apps/Tutorials/js13kGames/Installable_PWAs#requirements">meet PWA requirements</a>.
Under the hood, Google‚Äôs <a href="https://developer.chrome.com/docs/workbox/">Workbox</a> project is used to handle managing cached assets for offline use and updating the registered Service Worker.</p>

<p>When initially researching PWA development, you might naively assume it is just a case of adding a Web App Manifest and Service Worker to your project, serving the content over HTTPS, and you‚Äôre done‚Ä¶ not quite.
Below, I will discuss the different areas I needed to consider, which led to the final result shown above.</p>

<h2 id="appification">App‚Äôification</h2>

<div style="display:flex;gap:1rem;align-items:center;margin:1rem 0 0;">
  <div>
    <video style="width:100%;" controls="" muted="">
      <source src="/uploads/building-a-running-calculator-pwa-in-react-and-typescript/ios-install.mp4" type="video/mp4" />
    </video>
  </div>
  <div>
    <video style="width:100%" controls="" muted="">
      <source src="/uploads/building-a-running-calculator-pwa-in-react-and-typescript/android-install.mp4" type="video/mp4" />
    </video>
  </div>
</div>

<h3 id="look-and-feel">Look and Feel</h3>

<p>A large area of research and development was making the user experience <em>look and feel</em> like a native application typically found on both mobile and desktop devices.
A lot of time was spent essentially <em>‚Äòde-webifying‚Äô</em> the web application to align with user expectations of a native app experience.
This included disabling page zooming capabilities, user text selection, and document overflow scrolling.
These were all fortunately achievable using CSS, with a small dose of browser-specific prefixes (Safari‚Ä¶).
I did, however, have to resort to some JavaScript to disable touch body scroll when the soft keyboard appears on mobile for focused input fields.
Although this process required trial and error, the learnings garnered can be applied going forward to other app-like web experiences and PWAs I wish to develop.</p>

<h3 id="mobile">Mobile</h3>

<p>When the iPhone was initially released, Steve Jobs touted an innovative new way to create web applications <em>‚Äúthat look exactly and behave exactly like native apps‚Äù</em> during the launch‚Äôs <a href="https://www.youtube.com/watch?v=ZlE7dzoD6GA">one more thing</a> section.
However, the momentum soon dwindled with the release of a native SDK several months later - and the subsequent popularity and revenue of the App Store have not made Apple regret that decision.
This has led to much of my PWA development experience feeling like a constant struggle to make things work on iOS‚Ä¶ (and this is coming from an Apple fanboy).
iOS is still <a href="https://firt.dev/notes/pwa-ios/">way behind</a> the fantastic web capability support present on Android.
For instance, it has only recently added <a href="https://developer.mozilla.org/en-US/docs/Web/API/Push_API">Web Push</a> capabilities since iOS 16.4.</p>

<p>Below are several key pain points I encountered while developing this PWA on iOS.</p>

<h4 id="splash-screens">Splash Screens</h4>

<p>The number of splash screen assets required for full iOS device support is mind-blowing.
Not only do you need to supply numerous assets upfront, but iOS also requires custom Safari-specific meta-tag workarounds to register different splash screen variants.
This is in stark contrast to Android, where the system can use an existing icon provided by the Web App Manifest.</p>

<h4 id="orientation">Orientation</h4>

<p>iOS lacks support for the Web App Manifest <a href="https://developer.mozilla.org/en-US/docs/Web/Manifest/orientation">orientation</a> property, which allows you to specify whether the PWA supports portrait and/or landscape modes.
Instead, you must cater for both orientations or display crude CSS-based ‚ÄòNot supported in this orientation‚Äô messages to the user.</p>

<h4 id="installation-prompt">Installation Prompt</h4>

<p>Most annoyingly, iOS lacks native <a href="https://web.dev/learn/pwa/installation-prompt">installation prompts</a>, whereas Android and Chrome desktop devices fully support them.
It does not support the <code class="language-plaintext highlighter-rouge">beforeinstallprompt</code> event, meaning that to install a PWA, users must manually visit Safari, open the bottom menu bar, and select ‚ÄòAdd to Home Screen‚Äô ü§¶.
Third-party browsers (e.g. Chrome), although required to use the Safari web engine, do not support installing PWAs.
This severely hinders PWA adoption compared to the seamless experience iOS provides for App Store installations.
Android, on the other hand, offers a great user experience, leveraging screenshots found in the Web App Manifest to aid installation.
It even packages the application as a <a href="https://developer.chrome.com/docs/android/trusted-web-activity/">Trusted Web Activity</a>, treating the PWA as a standard Android application rather than a mere Safari <em>bookmark</em>.
You can see how the two experiences differ by watching the videos above.</p>

<h3 id="desktop">Desktop</h3>

<div style="display:flex;gap:1rem;flex-direction:row;align-items:center;">
  <div>
    <img src="/uploads/building-a-running-calculator-pwa-in-react-and-typescript/desktop-wide-pace.png" alt="Desktop (wide)" />
  </div>
  <div>
    <img src="/uploads/building-a-running-calculator-pwa-in-react-and-typescript/desktop-narrow-pace.png" alt="Desktop (narrow)" />
  </div>
</div>

<p>In contrast to mobile development, making the app feel native on desktop required less attention.
Since PWAs are only supported in Google Chrome (and variants such as Microsoft Edge), the scope of browsers that needed catering was limited.
What is great about this approach is that there is no need to wrap your application in an <a href="https://www.electronjs.org/">Electron</a>/<a href="https://tauri.app/">Tauri</a> wrapper if the APIs supplied by Google Chrome meet your needs.</p>

<video style="width:100%" controls="" muted="">
  <source src="/uploads/building-a-running-calculator-pwa-in-react-and-typescript/desktop-install.mp4" type="video/mp4" />
</video>

<h2 id="conclusion">Conclusion</h2>

<p>I am very happy with the PWA I have built over the past week or so.
Although the application itself is simple, it has allowed me to explore many fundamental aspects of PWA development that need to considered when building web applications that should look and feel native.
iOS support, although lacking behind Android considerably, at least provides a native look and feel once it has been installed on to the device.
Going forward, I would like to explore how I can use projects such as <a href="https://www.pwabuilder.com/">PWABuilder</a> to package the PWA for submission to the Google Play and Apple App Store, helping to address some of the discussed shortcomings.</p>

</article>

            </main>

            <footer class="footer">
                <img src="https://www.gravatar.com/avatar/c5c2978bb14d16460f73399c394b6acd?s=160">
                <ul>
                    <li>Developer at <a href="http://www.mybuilder.com/">MyBuilder</a></li>
                    <li><a href="http://threedevsandamaybe.com/">Three Devs and a Maybe</a> podcast co-host</li>
                    <li>All ramblings can be found in the <a href="/archive/">Archive</a></li>
                </ul>
                <div class="cf"></div>
            </footer>
        </div>
    </body>
</html>
