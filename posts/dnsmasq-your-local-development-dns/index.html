<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>DNSMasq, your local development DNS - Edd Mann</title>
<meta name=description content="Learn how DNSMasq can simplify local DNS configuration for multi-user development environments on Ubuntu Server and DD-WRT routers."><meta name=author content="Edd Mann"><script async src="https://www.googletagmanager.com/gtag/js?id=G-ZPQ7WHNXH4"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-ZPQ7WHNXH4")}</script><meta itemprop=name content="DNSMasq, your local development DNS"><meta itemprop=description content="Setting up a single-user web development environment is easy. One-click (OS)AMP installers do all the work and store internal domains in an easily accessible host file. However, expanding this to a multi-user development team, all of whom need access to the same resources, is a completely different challenge. Moreover, they may require access from multiple devices, some of which do not have a host file, such as mobile phones."><meta itemprop=datePublished content="2012-05-15T00:00:00+00:00"><meta itemprop=dateModified content="2012-05-15T00:00:00+00:00"><meta itemprop=wordCount content="679"><meta itemprop=keywords content="Dns,Dnsmasq"><meta property="og:url" content="https://eddmann.com/posts/dnsmasq-your-local-development-dns/"><meta property="og:site_name" content="Edd Mann"><meta property="og:title" content="DNSMasq, your local development DNS"><meta property="og:description" content="Setting up a single-user web development environment is easy. One-click (OS)AMP installers do all the work and store internal domains in an easily accessible host file. However, expanding this to a multi-user development team, all of whom need access to the same resources, is a completely different challenge. Moreover, they may require access from multiple devices, some of which do not have a host file, such as mobile phones."><meta property="og:locale" content="en_GB"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2012-05-15T00:00:00+00:00"><meta property="article:modified_time" content="2012-05-15T00:00:00+00:00"><meta property="article:tag" content="Dns"><meta property="article:tag" content="Dnsmasq"><meta name=twitter:card content="summary"><meta name=twitter:title content="DNSMasq, your local development DNS"><meta name=twitter:description content="Setting up a single-user web development environment is easy. One-click (OS)AMP installers do all the work and store internal domains in an easily accessible host file. However, expanding this to a multi-user development team, all of whom need access to the same resources, is a completely different challenge. Moreover, they may require access from multiple devices, some of which do not have a host file, such as mobile phones."><meta name=twitter:site content="@edd_mann"><link rel="preload stylesheet" as=style href=/css/style.min.0121a173d3063b9541f1f561a87125fd59dc1fac6110b21c15bba8bc141b70b1.css integrity="sha256-ASGhc9MGO5VB8fVhqHEl/VncH6xhELIcFbuovBQbcLE="><link rel=preload as=image href=/assets/x.svg><link rel=preload as=image href=/assets/github.svg><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://eddmann.com/posts/dnsmasq-your-local-development-dns/></head><body><header class="site-header wrapper"><a href=https://eddmann.com/><h3 class=site-header__title>Edd Mann
<span style=--url:url(/assets/code.svg)>Developer</span></h3></a><div class=site-header__mobile-navigation-button aria-label="Toggle mobile site navigation" aria-expanded=false aria-controls=site-navigation></div><div class=site-header__navigation id=site-navigation><nav aria-label="Primary navigation"><ul class=site-header__primary-navigation><li><a href=/archive>Archive</a></li><li><a href=/projects>Projects</a></li><li><a href=/about>About</a></li></ul></nav><nav aria-label="Social links"><ul class=site-header__social-navigation><li><a class=social-icon style=--url:url(/assets/x.svg) href=https://x.com/edd_mann rel="external noopener" target=_blank>Twitter (X)</a></li><li><a class=social-icon style=--url:url(/assets/github.svg) href=https://github.com/eddmann rel="external noopener" target=_blank>GitHub</a></li></ul></nav></div></header><main class=wrapper><article><header class=page-title><h1>DNSMasq, your local development DNS</h1><time class=post__time>May 15, 2012</time></header><main class=prose><p>Setting up a single-user web development environment is easy.
One-click (OS)AMP installers do all the work and store internal domains in an easily accessible host file.
However, expanding this to a multi-user development team, all of whom need access to the same resources, is a completely different challenge.
Moreover, they may require access from multiple devices, some of which do not have a host file, such as mobile phones.</p><p>A common solution to this problem is to share host files, which include all the development domains used, in the hope that everyone remains in sync.
In the case of devices that do not have a readily accessible host file, uploading externally accessible builds or providing an alternative gateway into the development ecosystem is one way to address the issue.
These methods do not seem right to me; they involve far too many variables and extra work.
An even better solution, which eliminates all the overhead, is to set up your own local DNS and start enjoying the simplicity of a single-user environment.</p><h2 id=ladies-and-gentleman-dnsmasq>Ladies and gentleman, DNSMasq</h2><p>To set up your own local DNS you can spend hours configuring BIND, but nothing beats the ease and maintainability of DNSMasq.
DNSMasq is a lightweight DNS, DHCP, and TFTP server and is ideal for this case study.
In just a few keystrokes using your package manager of choice, you can set up a local DNS server for the entire development team, keeping all those pesky local domains consolidated in one host file as they should be.</p><h2 id=installation>Installation</h2><p>I will be installing and configuring a DNSMasq setup on an Ubuntu Server distribution, but installation on other platforms should be fairly similar.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ sudo apt-get install dnsmasq
</span></span></code></pre></div><p>Upon successful installation, you may be greeted with an unfriendly &ldquo;port 53 already in use&rdquo; message.
To resolve this issue, use the following commands: first, check which process is using port 53, and then kill that process by its ID.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ sudo netstat -anlp | grep -w LISTEN
</span></span><span style=display:flex><span>$ sudo kill <span style=color:#f92672>[</span>process-id<span style=color:#f92672>]</span>
</span></span></code></pre></div><p>The final step is to add all your local development domains to the host file found at <code>/etc/hosts</code>.
Once all domains have been added, the final command that needs to be executed is to restart DNSMasq.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ sudo /etc/init.d/dnsmasq restart
</span></span></code></pre></div><p>To access your newly created DNS server, you can either individually add the server&rsquo;s IP address to each computer&rsquo;s DNS network configuration, or alternatively, point your router&rsquo;s DNS record to the IP address.</p><h2 id=an-alternative-option>An alternative option&mldr;</h2><p>If you&rsquo;re feeling extra hardcore and do not wish to install another software dependency on your system, you may wish to consider flashing your router with <a href=http://www.dd-wrt.com/ rel="external noopener" target=_blank>DD-WRT</a> (if your router supports it) and letting the hardware do the work.
Setting up DNSMasq on a compatible DD-WRT installation is as simple as adding the local domain entries into the &ldquo;Additional DNSMasq Options&rdquo; textarea in the administration panel.</p><p>Below is a screenshot of an example DD-WRT DNSMasq configuration</p><p><picture><source type=image/webp srcset=/posts/dnsmasq-your-local-development-dns/dd-wrt_hu_b0213798ad5ea015.webp><source type=image/jpeg srcset=/posts/dnsmasq-your-local-development-dns/dd-wrt_hu_3467fb5e8730fa20.jpg><img src=/posts/dnsmasq-your-local-development-dns/dd-wrt_hu_3467fb5e8730fa20.jpg alt=DD-WRT loading=lazy></picture></p><h2 id=an-even-more-awesome-idea>An even more awesome idea</h2><p>Instead of having to add an extra entry for each development site, which can be a chore, we have an opportunity to make it even easier.
My regular naming convention for local development sites is to use the descriptive &ldquo;.dev&rdquo; TLD.
This naming scheme allows me to easily distinguish between development and live builds.
Fortunately, we have the opportunity to exploit the fact that &ldquo;.dev&rdquo; is an unused TLD.
With DNSMasq, we are able to easily set up a TLD wildcard which will check and match any domain we pass through the DNS and forward it to our defined location.
As a consequence, any URL request using a &ldquo;.dev&rdquo; TLD can be directed to my local development server for Apache to respond to.
For a software installation, you are required to add the following line to your <code>dnsmasq.conf</code> file.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ sudo echo <span style=color:#e6db74>&#34;address=/dev/[dev-server-ip]&#34;</span> &gt;&gt; /etc/dnsmasq.conf
</span></span></code></pre></div><p>Alternatively, in the case of DD-WRT, add the above configuration setting to the &ldquo;Additional DNSMasq Options&rdquo; textarea in the administration panel.</p><h2 id=resources>Resources</h2><ul><li><a href=http://www.thekelleys.org.uk/dnsmasq/doc.html rel="external noopener" target=_blank>DNSMasq - Official Site</a></li><li><a href=http://davidwinter.me/articles/2011/06/18/simple-local-web-development-with-apache-and-dnsmasq/ rel="external noopener" target=_blank>Simple local web development with Apache and DNSMasq</a></li><li><a href=http://www.dd-wrt.com/site/index rel="external noopener" target=_blank>DD-WRT - Official Site</a></li><li><a href=http://www.dd-wrt.com/wiki/index.php/DNSMasq_as_DHCP_server rel="external noopener" target=_blank>DNSMasq as DD-WRT DHCP Server</a></li></ul></main><footer class=post__tags><a href=/archive/tag/dns>dns</a><a href=/archive/tag/dnsmasq>dnsmasq</a></footer></article></main><footer class="site-footer wrapper"><div>&copy; 2025, Edd Mann</div></footer><script>(function(){document.querySelector(".site-header__mobile-navigation-button").addEventListener("click",e=>{document.documentElement.classList.toggle("mobile-navigation-open"),e.target.setAttribute("aria-expanded",e.target.getAttribute("aria-expanded")==="false"?"true":"false")});const n=document.querySelector(".site-header");let t=window.pageYOffset,e=!1;window.addEventListener("scroll",()=>{if(e)return;const s=window.pageYOffset;window.requestAnimationFrame(()=>{n.classList.toggle("is-sticky",t>s),t=s,e=!1}),e=!0})})()</script></body></html>