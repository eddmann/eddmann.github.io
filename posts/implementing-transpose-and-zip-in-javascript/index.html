<!doctype html>
<html lang="en">
    <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Learn how to implement 'transpose' and 'zip' in JavaScript to manipulate multi-dimensional arrays effectively.">

    <title>
        
            Implementing Transpose and Zip in JavaScript &middot; Edd Mann
        
    </title>

    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,700italic,400italic">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/styles.css">

    <link rel="shortcut icon" href="/favicon.ico">

    <link rel="alternate" href="/rss.xml" title="" type="application/rss+xml">

    

    <script>
        var _gaq=[['_setAccount','UA-32512081-1'],['_setDomainName','eddmann.com'],['_trackPageview']];
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = 'https://ssl.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>
</head>

    <body>
        <div class="container content">
            <header class="masthead">
                <h3 class="masthead-title">
                    <a href="/" title="Home">Edd Mann</a>
                    <small><i class="fa fa-code"></i> Developer</small>
                </h3>
                <nav>
                    <a href="https://twitter.com/edd_mann"><i class="fa fa-twitter"></i></a>
                    <a href="https://github.com/eddmann"><i class="fa fa-github"></i></a>
                    <a href="mailto:the@eddmann.com"><i class="fa fa-envelope"></i></a>
                </nav>
                <div class="cf"></div>
            </header>

            <main>
                <article class="post">
    <h1 class="post-title">Implementing Transpose and Zip in JavaScript</h1>
    <time datetime="2016-04-08T00:00:00+00:00" class="post-date">08 Apr 2016</time>
    <p>In a recent <a href="http://www.fullstackradio.com/39">Full Stack Radio</a> podcast, a discussion around the application of <code class="language-plaintext highlighter-rouge">transpose</code> and <code class="language-plaintext highlighter-rouge">zip</code> on collections made me wonder how I would go about implementing such a feature in JavaScript. 
The concept behind ‘transpose’ is to turn a multi-dimensional array’s rows into columns and vice versa.
I typically think of a ‘zip’ as a limited form of this, handling only two collections, but with the added bonus of permitting collections of different lengths.
This can be resolved by either padding out the arrays with empty values or only including elements up to the shortest collection’s length.</p>

<p>I decided that I would be a little lenient in my implementation and create a single function that could handle <code class="language-plaintext highlighter-rouge">n</code>-th collections of differing lengths.
The first implementation below achieves this by only including elements up to the shortest collection’s length.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">shortest</span> <span class="o">=</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="nx">b</span><span class="p">.</span><span class="nx">length</span> <span class="p">?</span> <span class="nx">a</span> <span class="p">:</span> <span class="nx">b</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">zip</span> <span class="o">=</span> <span class="p">(...</span><span class="nx">arrs</span><span class="p">)</span> <span class="o">=&gt;</span>
  <span class="nx">arrs</span><span class="p">.</span><span class="nx">reduce</span><span class="p">(</span><span class="nx">shortest</span><span class="p">).</span><span class="nx">map</span><span class="p">((</span><span class="nx">_</span><span class="p">,</span> <span class="nx">idx</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">arrs</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">arr</span> <span class="o">=&gt;</span> <span class="nx">arr</span><span class="p">[</span><span class="nx">idx</span><span class="p">]));</span>

<span class="nx">zip</span><span class="p">([</span><span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">b</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">c</span><span class="dl">'</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]);</span>
<span class="c1">// [['a', 1], ['b', 2], ['c', 3]]</span>
</code></pre></div></div>

<p>The implementation below instead pads out arrays that are not of the maximum length with empty values.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">longest</span> <span class="o">=</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="nx">b</span><span class="p">.</span><span class="nx">length</span> <span class="p">?</span> <span class="nx">a</span> <span class="p">:</span> <span class="nx">b</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">zipLongest</span> <span class="o">=</span> <span class="p">(...</span><span class="nx">arrs</span><span class="p">)</span> <span class="o">=&gt;</span>
  <span class="nx">arrs</span><span class="p">.</span><span class="nx">reduce</span><span class="p">(</span><span class="nx">longest</span><span class="p">).</span><span class="nx">map</span><span class="p">((</span><span class="nx">_</span><span class="p">,</span> <span class="nx">idx</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">arrs</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">arr</span> <span class="o">=&gt;</span> <span class="nx">arr</span><span class="p">[</span><span class="nx">idx</span><span class="p">]));</span>

<span class="nx">zipLongest</span><span class="p">([</span><span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">b</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">c</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">d</span><span class="dl">'</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]);</span>
<span class="c1">// [['a', 1], ['b', 2], ['c', 3], ['d', undefined]]</span>
</code></pre></div></div>

<p>An interesting use case that was discussed was the ability to easily create a collection that includes each element along with its successor or predecessor.
This can be useful in cases where, upon iteration, a decision is dependent on the neighbouring values of elements.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">alpha</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">b</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">c</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">d</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">e</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">f</span><span class="dl">'</span><span class="p">];</span>

<span class="c1">// elements with successor</span>
<span class="nx">zip</span><span class="p">(</span><span class="nx">alpha</span><span class="p">,</span> <span class="nx">alpha</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">));</span>

<span class="c1">// elements with predecessor</span>
<span class="nx">zip</span><span class="p">(</span><span class="nx">alpha</span><span class="p">,</span> <span class="p">[</span><span class="kc">undefined</span><span class="p">,</span> <span class="p">...</span><span class="nx">alpha</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">alpha</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)]);</span>
</code></pre></div></div>

</article>

            </main>

            <footer class="footer">
                <img src="https://www.gravatar.com/avatar/c5c2978bb14d16460f73399c394b6acd?s=160">
                <ul>
                    <li>Developer at <a href="http://www.mybuilder.com/">MyBuilder</a></li>
                    <li><a href="http://threedevsandamaybe.com/">Three Devs and a Maybe</a> podcast co-host</li>
                    <li>All ramblings can be found in the <a href="/archive/">Archive</a></li>
                </ul>
                <div class="cf"></div>
            </footer>
        </div>
    </body>
</html>
