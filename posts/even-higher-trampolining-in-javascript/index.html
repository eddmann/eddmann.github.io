<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Even Higher Trampolining in JavaScript - Edd Mann</title>
<meta name=description content="Discover advanced trampolining techniques in JavaScript with an enhanced abstraction for managing function return types, improving both clarity and performance."><meta name=author content="Edd Mann"><script async src="https://www.googletagmanager.com/gtag/js?id=G-ZPQ7WHNXH4"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-ZPQ7WHNXH4")}</script><meta itemprop=name content="Even Higher Trampolining in JavaScript"><meta itemprop=description content="The concept of trampolining seems to have been a running trend throughout this week. I noted in my initial post on implementing trampolining in JavaScript that I would document a revised version capable of handling the case when a function is the desired return type."><meta itemprop=datePublished content="2016-01-08T00:00:00+00:00"><meta itemprop=dateModified content="2016-01-08T00:00:00+00:00"><meta itemprop=wordCount content="200"><meta itemprop=keywords content="Javascript,Functional-Programming"><meta property="og:url" content="https://eddmann.com/posts/even-higher-trampolining-in-javascript/"><meta property="og:site_name" content="Edd Mann"><meta property="og:title" content="Even Higher Trampolining in JavaScript"><meta property="og:description" content="The concept of trampolining seems to have been a running trend throughout this week. I noted in my initial post on implementing trampolining in JavaScript that I would document a revised version capable of handling the case when a function is the desired return type."><meta property="og:locale" content="en_GB"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2016-01-08T00:00:00+00:00"><meta property="article:modified_time" content="2016-01-08T00:00:00+00:00"><meta property="article:tag" content="Javascript"><meta property="article:tag" content="Functional-Programming"><meta name=twitter:card content="summary"><meta name=twitter:title content="Even Higher Trampolining in JavaScript"><meta name=twitter:description content="The concept of trampolining seems to have been a running trend throughout this week. I noted in my initial post on implementing trampolining in JavaScript that I would document a revised version capable of handling the case when a function is the desired return type."><meta name=twitter:site content="@edd_mann"><link rel=stylesheet href=/css/style.min.3182afb340a83ee2b29f9b972282f896d25ab9c363ef5462a251fa004875db3e.css integrity="sha256-MYKvs0CoPuKyn5uXIoL4ltJaucNj71RiolH6AEh12z4="><link rel=preload as=image href=/assets/x.svg><link rel=preload as=image href=/assets/github.svg><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://eddmann.com/posts/even-higher-trampolining-in-javascript/><script>(function(){document.documentElement.setAttribute("data-theme",localStorage.getItem("theme")||window.matchMedia("(prefers-color-scheme: dark)").matches&&"dark"||"light")})()</script><script src=/script.min.7b3001f959164202b0ed43cdde230bfa9d8f579831cc5e4f9853519364eb2fbe.js integrity="sha256-ezAB+VkWQgKw7UPN3iML+p2PV5gxzF5PmFNRk2TrL74=" defer></script></head><body><header class="site-header l-wrapper"><a href=https://eddmann.com/><h3 class=site-header__title>Edd Mann
<span style=--url:url(/assets/code.svg)>Developer</span></h3></a><button class=site-header__mobile-navigation-button type=button title="Toggle mobile site navigation" aria-label="Toggle mobile site navigation" aria-expanded=false aria-controls=site-navigation></button><div class=site-header__navigation id=site-navigation><nav aria-label="Primary navigation"><ul class=site-header__primary-navigation><li><a href=/archive>Archive</a></li><li><a href=/projects>Projects</a></li><li><a href=/about>About</a></li></ul></nav><nav aria-label="Social links"><ul class=site-header__social-navigation><li><a class=social-icon style=--url:url(/assets/x.svg) href=https://x.com/edd_mann rel="external noopener" target=_blank>Twitter (X)</a></li><li><a class=social-icon style=--url:url(/assets/github.svg) href=https://github.com/eddmann rel="external noopener" target=_blank>GitHub</a></li></ul></nav></div></header><main class=l-wrapper><article><header class=l-page-title><h1 class=u-transition-between-pages style=--id:even-higher-trampolining-in-javascript>Even Higher Trampolining in JavaScript</h1><time datetime=2016-01-08T00:00:00Z class=post__time>Jan 8, 2016</time></header><main class=u-prose><p>The concept of <em>trampolining</em> seems to have been a running trend throughout this week.
I noted in my initial post on implementing trampolining in JavaScript that I would document a revised version capable of handling the case when a function is the desired return type.</p><p>Taking an idea found in the Clojure documentation for this function, I decided to provide a simple abstraction over the process which wraps the <em>thunk</em> or <em>result</em> in a two-element array data structure.
This allows us to pass along the additional knowledge of whether the user&rsquo;s desired action is to continue (&lsquo;cont&rsquo;) or complete (&lsquo;done&rsquo;) back to the trampoline, so that we can make the correct decision.
This approach also has the added bonus of being more expressive in its intent, thanks to the additional functions being used.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>trampoline</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>bounce</span> =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> [<span style=color:#a6e22e>isRunning</span>, <span style=color:#a6e22e>value</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>bounce</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>while</span> (<span style=color:#a6e22e>isRunning</span>) {
</span></span><span style=display:flex><span>    [<span style=color:#a6e22e>isRunning</span>, <span style=color:#a6e22e>value</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>value</span>();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>value</span>;
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span><span style=color:#a6e22e>trampoline</span>.<span style=color:#a6e22e>cont</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>thunk</span> =&gt; [<span style=color:#66d9ef>true</span>, <span style=color:#a6e22e>thunk</span>];
</span></span><span style=display:flex><span><span style=color:#a6e22e>trampoline</span>.<span style=color:#a6e22e>done</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>result</span> =&gt; [<span style=color:#66d9ef>false</span>, <span style=color:#a6e22e>result</span>];
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>odd</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>n</span> =&gt;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>n</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>?</span> <span style=color:#a6e22e>trampoline</span>.<span style=color:#a6e22e>done</span>(<span style=color:#66d9ef>false</span>) <span style=color:#f92672>:</span> <span style=color:#a6e22e>trampoline</span>.<span style=color:#a6e22e>cont</span>(() =&gt; <span style=color:#a6e22e>even</span>(<span style=color:#a6e22e>n</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>));
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>even</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>n</span> =&gt;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>n</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>?</span> <span style=color:#a6e22e>trampoline</span>.<span style=color:#a6e22e>done</span>(<span style=color:#66d9ef>true</span>) <span style=color:#f92672>:</span> <span style=color:#a6e22e>trampoline</span>.<span style=color:#a6e22e>cont</span>(() =&gt; <span style=color:#a6e22e>odd</span>(<span style=color:#a6e22e>n</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>trampoline</span>(<span style=color:#a6e22e>odd</span>(<span style=color:#ae81ff>4</span>));
</span></span></code></pre></div></main><footer class=post__tags><a href=/archive/tag/javascript>javascript</a><a href=/archive/tag/functional-programming>functional-programming</a></footer></article><div class="related-posts u-prose"><h3>Related Posts</h3><ul><li><a href=/posts/recursive-functions-using-a-trampoline-in-javascript/>Recursive Functions using a Trampoline in JavaScript</a></li><li><a href=/posts/cartesian-product-in-javascript/>Cartesian Product in JavaScript</a></li><li><a href=/posts/peano-numbers-and-arithmetic-in-javascript/>Peano Numbers and Arithmetic in JavaScript</a></li><li><a href=/posts/lifting-javascript-operators-into-first-class-functions/>Lifting JavaScript Operators into First-class Functions</a></li><li><a href=/posts/partial-application-currying-and-composition-using-javascript-es6/>Partial Application (Currying) and Composition using JavaScript ES6</a></li></ul></div><div class=scroll-watcher></div></main><footer class="site-footer l-wrapper"><div>&copy; 2025, Edd Mann</div><button class=site-footer__theme-toggle type=button title="Toggle theme" aria-label="Toggle theme"><svg fill="currentcolor" viewBox="0 0 32 32" role="img"><title>Theme toggle icon</title><desc>A circle representing the moon for toggling theme</desc><path d="M16 .5C7.4.5.5 7.4.5 16S7.4 31.5 16 31.5 31.5 24.6 31.5 16 24.6.5 16 .5zm0 28.1V3.4C23 3.4 28.6 9 28.6 16S23 28.6 16 28.6z"/></svg></button></footer></body></html>