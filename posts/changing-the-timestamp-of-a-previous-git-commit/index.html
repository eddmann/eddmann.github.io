<!doctype html>
<html lang="en">
    <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Simple ways to alter a past or present commit date (timestamp).">

    <title>Changing the timestamp of a previous Git commit &middot; Edd Mann</title>

    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,700italic,400italic">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/styles.css">

    <link rel="shortcut icon" href="/favicon.ico">

    <link rel="alternate" href="/rss.xml" title="" type="application/rss+xml">

    <script>
        var _gaq=[['_setAccount','UA-32512081-1'],['_setDomainName','eddmann.com'],['_trackPageview']];
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = 'https://ssl.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>
</head>

    <body>
        <div class="container content">
            <header class="masthead">
                <h3 class="masthead-title">
                    <a href="/" title="Home">Edd Mann</a>
                    <small><i class="fa fa-code"></i> Developer</small>
                </h3>
                <nav>
                    <a href="https://twitter.com/edd_mann"><i class="fa fa-twitter"></i></a>
                    <a href="https://github.com/eddmann"><i class="fa fa-github"></i></a>
                    <a href="mailto:the@eddmann.com"><i class="fa fa-envelope"></i></a>
                </nav>
                <div class="cf"></div>
            </header>

            <main>
                <article class="post">
    <h1 class="post-title">Changing the timestamp of a previous Git commit</h1>
    <time datetime="2013-12-14T00:00:00+00:00" class="post-date">14 Dec 2013</time>
    <p>Git has two different types of timestamp associated with a commit.
Although both may typically hold the same value they are used in subtly different ways.
The author (GIT_AUTHOR_DATE) is the user who originally created the work (i.e. a patch), where as the committer (GIT_COMMITTER_DATE) is the user who last applied the work (i.e. applied patch or rebase).
The author date is the one displayed when the log is accessed, however, the commit date is used when given the filter (–since, –until) options, which seems a little odd.
To avoid confusion you can include the committer date within your log display by setting the –format option.
</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>git log <span class="nt">--format</span><span class="o">=</span>fuller
</code></pre></div></div>

<h2 id="ch-ch-changes">Ch-ch-Changes…</h2>

<p>A tendency I have picked up is to be very commit happy when developing locally, and then find myself rebasing a lot before pushing to a remote.
As a result of this I sometimes am required to alter timestamps of certain commits to make them more meaningful.
I found that the simplest of which is adding a specified timestamp to the current commit.
The author date is specified with the –date option where as the committer timestamp has to be changed with an environment variable.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>git commit <span class="nt">--date</span><span class="o">=</span><span class="s2">"Sat, 14 Dec 2013 12:40:00 +0000"</span> <span class="c"># only author</span>
<span class="nv">$ GIT_COMMITTER_DATE</span><span class="o">=</span><span class="s2">"</span><span class="sb">`</span><span class="nb">date</span> <span class="nt">-R</span><span class="sb">`</span><span class="s2">"</span> git commit <span class="nt">--date</span> <span class="s2">"</span><span class="sb">`</span><span class="nb">date</span> <span class="nt">-R</span><span class="sb">`</span><span class="s2">"</span> <span class="c"># for both</span>
</code></pre></div></div>

<p>If on the other hand we wish to amend the last author commit you can execute the following, very similar command.
I should warn you to be wary of running these next commands on a branch with commits that you have already pushed to a remote - due to Git’s hashing nature this will alter the SHA’s of all commits that come after the desired commit as well.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>git commit <span class="nt">--amend</span> <span class="nt">--date</span> <span class="s2">"</span><span class="sb">`</span><span class="nb">date</span> <span class="nt">-R</span><span class="sb">`</span><span class="s2">"</span> <span class="c"># include '-C HEAD' to bypass commit message editing</span>
</code></pre></div></div>

<p>Finally, to alter a previous commit by SHA reference hash, you can run the following command (altered from <a href="http://git.wiki.kernel.org/index.php/GitFaq#How_can_I_tweak_the_date_of_a_commit_in_the_repo.3F">GitFaq</a>).</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>git filter-branch <span class="nt">--env-filter</span> <span class="se">\</span>
<span class="s2">"if test </span><span class="se">\$</span><span class="s2">GIT_COMMIT = 'e6dbcffca68e4b51887ef660e2389052193ba4f4'
then
    export GIT_AUTHOR_DATE='Sat, 14 Dec 2013 12:40:00 +0000'
    export GIT_COMMITTER_DATE='Sat, 14 Dec 2013 12:40:00 +0000'
fi"</span> <span class="o">&amp;&amp;</span> <span class="nb">rm</span> <span class="nt">-fr</span> <span class="s2">"</span><span class="si">$(</span>git rev-parse <span class="nt">--git-dir</span><span class="si">)</span><span class="s2">/refs/original/"</span>
</code></pre></div></div>

<h2 id="viewing-the-alterations">Viewing the alterations</h2>

<p>We can now check out our handy work by looking at the log again, providing –since and –until options to filter the results.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>git log <span class="nt">--since</span><span class="o">=</span><span class="s2">"yesterday"</span>
<span class="nv">$ </span>git log <span class="nt">--since</span><span class="o">=</span><span class="s2">"1 month ago"</span> <span class="nt">--until</span><span class="o">=</span><span class="s2">"yesterday"</span>
</code></pre></div></div>

<h2 id="resources">Resources</h2>

<ul>
  <li><a href="http://git.wiki.kernel.org/index.php/GitFaq#How_can_I_tweak_the_date_of_a_commit_in_the_repo.3F">How can I tweak the date of a commit in the repo?</a></li>
  <li><a href="http://stackoverflow.com/questions/454734/how-can-one-change-the-timestamp-of-an-old-commit-in-git">How can one change the timestamp of an old commit in Git?</a></li>
</ul>

</article>

            </main>

            <footer class="footer">
                <img src="https://www.gravatar.com/avatar/c5c2978bb14d16460f73399c394b6acd?s=160">
                <ul>
                    <li>Developer at <a href="http://www.mybuilder.com/">MyBuilder</a></li>
                    <li><a href="http://threedevsandamaybe.com/">Three Devs and a Maybe</a> podcast co-host</li>
                    <li>All ramblings can be found in the <a href="/archive/">Archive</a></li>
                </ul>
                <div class="cf"></div>
            </footer>
        </div>
    </body>
</html>
