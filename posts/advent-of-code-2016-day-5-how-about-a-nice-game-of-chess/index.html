<!doctype html>
<html lang="en">
    <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Solving the Advent of Code 2016 Day 5 puzzle using Python">

    <title>Advent of Code 2016 - Day 5 - How About a Nice Game of Chess? &middot; Edd Mann</title>

    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,700italic,400italic">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/styles.css">

    <link rel="shortcut icon" href="/favicon.ico">

    <link rel="alternate" href="/rss.xml" title="" type="application/rss+xml">

    <script>
        var _gaq=[['_setAccount','UA-32512081-1'],['_setDomainName','eddmann.com'],['_trackPageview']];
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = 'https://ssl.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>
</head>

    <body>
        <div class="container content">
            <header class="masthead">
                <h3 class="masthead-title">
                    <a href="/" title="Home">Edd Mann</a>
                    <small><i class="fa fa-code"></i> Developer</small>
                </h3>
                <nav>
                    <a href="https://twitter.com/edd_mann"><i class="fa fa-twitter"></i></a>
                    <a href="https://github.com/eddmann"><i class="fa fa-github"></i></a>
                    <a href="mailto:the@eddmann.com"><i class="fa fa-envelope"></i></a>
                </nav>
                <div class="cf"></div>
            </header>

            <main>
                <article class="post">
    <h1 class="post-title">Advent of Code 2016 - Day 5 - How About a Nice Game of Chess?</h1>
    <time datetime="2021-03-27T00:00:00-05:00" class="post-date">27 Mar 2021</time>
    <p>On the fifth day of Advent of Code 2016 we are asked to calculate the password for a security door in Easter Bunny HQ.</p>



<h3 id="part-1">Part 1</h3>

<p>The eight-character password for the security door is generated one character at a time by finding the MD5 hash of the door id (our input) and an increasing integer index (starting with 0).
A hash indicates the next character in the password if its hexadecimal representation starts with five zeroes, with the sixth character being the next password character.</p>

<p>We will begin by creating a small helper function which simplifies Pythonâ€™s capabilities to hash values using MD5.
Out-of-the-box you are required to perform some additional steps both before and after generating the hash to return the desired hexadecimal representation.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">md5</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">md5</span><span class="p">(</span><span class="n">value</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">)).</span><span class="n">hexdigest</span><span class="p">()</span>
</code></pre></div></div>

<p>We can now use this helper function to build an lazy <em>infinite list</em> which increments from zero and yields hashes in the sequence which match the desired prefix.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">generate_hashes</span><span class="p">(</span><span class="n">door_id</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="n">itertools</span><span class="p">.</span><span class="n">count</span><span class="p">(</span><span class="mi">0</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">next</span> <span class="p">:</span><span class="o">=</span> <span class="n">md5</span><span class="p">(</span><span class="n">door_id</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">))).</span><span class="n">startswith</span><span class="p">(</span><span class="s">'0'</span> <span class="o">*</span> <span class="n">padding</span><span class="p">):</span>
            <span class="k">yield</span> <span class="nb">next</span>
</code></pre></div></div>

<p>With the ability to now perform this generation we can <em>take</em> the first 8 hashes from the sequence and reduce these down to their sixth characters.
Concating this listing into string form returns the desired answer ðŸŒŸ.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">PASSWORD_LENGTH</span> <span class="o">=</span> <span class="mi">8</span>

<span class="k">def</span> <span class="nf">part1</span><span class="p">(</span><span class="nb">input</span><span class="p">):</span>
    <span class="k">return</span> <span class="s">''</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">h</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">itertools</span><span class="p">.</span><span class="n">islice</span><span class="p">(</span><span class="n">generate_hashes</span><span class="p">(</span><span class="nb">input</span><span class="p">),</span> <span class="n">PASSWORD_LENGTH</span><span class="p">))</span>
</code></pre></div></div>

<h3 id="part-2">Part 2</h3>

<p>For part two instead of filling in the password from left to right, the hash now also indicates the position within the password to fill.
Based on the same process for generating hashes as in part one - the sixth character now represents the position (0-7), and the seventh character is the character to put in that position.</p>

<p>We can achieve this by generating hashes from the sequence until all password character <em>slots</em> have been filled.
Python is able to rather nicely map these requirements into code form.
Once all <em>slots</em> have been taken we can return the desired answer, as shown below ðŸŒŸ.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">part2</span><span class="p">(</span><span class="nb">input</span><span class="p">):</span>
    <span class="n">password</span> <span class="o">=</span> <span class="p">[</span><span class="bp">None</span><span class="p">]</span> <span class="o">*</span> <span class="n">PASSWORD_LENGTH</span>

    <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">generate_hashes</span><span class="p">(</span><span class="nb">input</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">index</span> <span class="p">:</span><span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">h</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span> <span class="mi">16</span><span class="p">))</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">PASSWORD_LENGTH</span><span class="p">)</span> <span class="ow">and</span> <span class="n">password</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">password</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">h</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">in</span> <span class="n">password</span><span class="p">:</span>
            <span class="k">break</span>

    <span class="k">return</span> <span class="s">''</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">password</span><span class="p">)</span>
</code></pre></div></div>

<p>I found that taking advantage of hashes all being represented in base-16, we can succinctly parse and validate the sixth character position upon each iteration.</p>

</article>

            </main>

            <footer class="footer">
                <img src="https://www.gravatar.com/avatar/c5c2978bb14d16460f73399c394b6acd?s=160">
                <ul>
                    <li>Developer at <a href="http://www.mybuilder.com/">MyBuilder</a></li>
                    <li><a href="http://threedevsandamaybe.com/">Three Devs and a Maybe</a> podcast co-host</li>
                    <li>All ramblings can be found in the <a href="/archive/">Archive</a></li>
                </ul>
                <div class="cf"></div>
            </footer>
        </div>
    </body>
</html>
