<!doctype html>
<html lang="en">
    <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Converting between numbering systems using JavaScript and Collection Pipelines">

    <title>Binary/Octal/Hexadecimal to Decimal using Collection Pipelines in JavaScript &middot; Edd Mann</title>

    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,700italic,400italic">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/styles.css">

    <link rel="shortcut icon" href="/favicon.ico">

    <link rel="alternate" href="/rss.xml" title="" type="application/rss+xml">

    <script>
        var _gaq=[['_setAccount','UA-32512081-1'],['_setDomainName','eddmann.com'],['_trackPageview']];
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = 'https://ssl.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>
</head>

    <body>
        <div class="container content">
            <header class="masthead">
                <h3 class="masthead-title">
                    <a href="/" title="Home">Edd Mann</a>
                    <small><i class="fa fa-code"></i> Developer</small>
                </h3>
                <nav>
                    <a href="https://twitter.com/edd_mann"><i class="fa fa-twitter"></i></a>
                    <a href="https://github.com/eddmann"><i class="fa fa-github"></i></a>
                    <a href="mailto:the@eddmann.com"><i class="fa fa-envelope"></i></a>
                </nav>
                <div class="cf"></div>
            </header>

            <main>
                <article class="post">
    <h1 class="post-title">Binary/Octal/Hexadecimal to Decimal using Collection Pipelines in JavaScript</h1>
    <time datetime="2016-04-18T00:00:00+00:00" class="post-date">18 Apr 2016</time>
    <p>In a recent <a href="https://twitter.com/adamwathan/status/720432624548900864">tweet</a> from Adam Wathan highlighting one of the examples in his <a href="http://adamwathan.me/refactoring-to-collections/">upcoming book</a>, he demonstrated breaking down the process of converting from binary to decimal representation using a pipeline of transformations.
I thought it would again be interesting to see how I would go about performing this process in JavaScript.
</p>

<h3 id="binary">Binary</h3>

<p>I began by implementing the binary to decimal function, following the signature present in PHPâ€™s <code class="language-plaintext highlighter-rouge">bindec</code> function.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">bindec</span> <span class="o">=</span> <span class="nx">binary</span> <span class="o">=&gt;</span> <span class="nx">binary</span>
  <span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">''</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">reverse</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">reduce</span><span class="p">(</span>
    <span class="p">(</span><span class="nx">acc</span><span class="p">,</span> <span class="nx">bin</span><span class="p">,</span> <span class="nx">exp</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">bin</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">0</span><span class="dl">'</span> <span class="p">?</span> <span class="nx">acc</span> <span class="p">:</span> <span class="nx">acc</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nx">exp</span><span class="p">),</span>
    <span class="mi">0</span><span class="p">);</span>

<span class="nx">bindec</span><span class="p">(</span><span class="dl">'</span><span class="s1">1100100</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// 100</span>
</code></pre></div></div>

<p>Looking at the implementation above, you will notice how we are able to break up the problem into a list of transformations.
Starting by splitting up the string binary representation into characters, we then reverse this sequence and reduce the collection down into the single decimal result.</p>

<h3 id="octal">Octal</h3>

<p>From here I decided to see how easy it would be to re-create the <code class="language-plaintext highlighter-rouge">octdec</code> function.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">octdec</span> <span class="o">=</span> <span class="nx">octal</span> <span class="o">=&gt;</span> <span class="nx">octal</span>
  <span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">''</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">reverse</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">reduce</span><span class="p">(</span>
    <span class="p">(</span><span class="nx">acc</span><span class="p">,</span> <span class="nx">oct</span><span class="p">,</span> <span class="nx">exp</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">oct</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">0</span><span class="dl">'</span> <span class="p">?</span> <span class="nx">acc</span> <span class="p">:</span> <span class="nx">acc</span> <span class="o">+</span> <span class="p">(</span><span class="nx">oct</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="nx">exp</span><span class="p">)),</span>
    <span class="mi">0</span><span class="p">);</span>

<span class="nx">octdec</span><span class="p">(</span><span class="dl">'</span><span class="s1">144</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// 100</span>
</code></pre></div></div>

<p>Again following a similar shape to the transformations present in the previous example we only have to update the logic present in the reduce phase.</p>

<h3 id="hexadecimal">Hexadecimal</h3>

<p>Finally, I decided to explore an implementation to convert hexadecimal representations into decimal.
This transformation pipeline requires an additional mapping phase to transform the alphabetical representations (A to F) into their decimal equivalents.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">hexdec</span> <span class="o">=</span> <span class="nx">hexadecimal</span> <span class="o">=&gt;</span> <span class="nx">hexadecimal</span>
  <span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">''</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">reverse</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="dl">''</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="dl">'</span><span class="s1">0123456789ABCDEF</span><span class="dl">'</span><span class="p">))</span>
  <span class="p">.</span><span class="nx">reduce</span><span class="p">(</span>
    <span class="p">(</span><span class="nx">acc</span><span class="p">,</span> <span class="nx">hex</span><span class="p">,</span> <span class="nx">exp</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">hex</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">?</span> <span class="nx">acc</span> <span class="p">:</span> <span class="nx">acc</span> <span class="o">+</span> <span class="p">(</span><span class="nx">hex</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="nx">exp</span><span class="p">)),</span>
    <span class="mi">0</span><span class="p">);</span>

<span class="nx">hexdec</span><span class="p">(</span><span class="dl">'</span><span class="s1">64</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// 100</span>
</code></pre></div></div>

</article>

            </main>

            <footer class="footer">
                <img src="https://www.gravatar.com/avatar/c5c2978bb14d16460f73399c394b6acd?s=160">
                <ul>
                    <li>Developer at <a href="http://www.mybuilder.com/">MyBuilder</a></li>
                    <li><a href="http://threedevsandamaybe.com/">Three Devs and a Maybe</a> podcast co-host</li>
                    <li>All ramblings can be found in the <a href="/archive/">Archive</a></li>
                </ul>
                <div class="cf"></div>
            </footer>
        </div>
    </body>
</html>
