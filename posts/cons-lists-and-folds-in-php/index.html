<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Cons Lists and Folds in PHP - Edd Mann</title>
<meta name=description content="A comprehensive exploration of implementing Cons cell lists and fold operations in PHP for efficient data manipulation."><meta name=author content="Edd Mann"><script async src="https://www.googletagmanager.com/gtag/js?id=G-ZPQ7WHNXH4"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-ZPQ7WHNXH4")}</script><meta itemprop=name content="Cons Lists and Folds in PHP"><meta itemprop=description content="Cons cells are used to (cons)truct a data object which represents an ordered pair. The elements in this pair can be identified as ‘car’ and ‘cdr’ accordingly. Using this simple representation, we are able not only to hold ordered pairs but also to create more complex data structures, such as a List."><meta itemprop=datePublished content="2015-01-02T00:00:00+00:00"><meta itemprop=dateModified content="2015-01-02T00:00:00+00:00"><meta itemprop=wordCount content="854"><meta itemprop=keywords content="Php,Functional-Programming,Data-Structures"><meta property="og:url" content="https://eddmann.com/posts/cons-lists-and-folds-in-php/"><meta property="og:site_name" content="Edd Mann"><meta property="og:title" content="Cons Lists and Folds in PHP"><meta property="og:description" content="Cons cells are used to (cons)truct a data object which represents an ordered pair. The elements in this pair can be identified as ‘car’ and ‘cdr’ accordingly. Using this simple representation, we are able not only to hold ordered pairs but also to create more complex data structures, such as a List."><meta property="og:locale" content="en_GB"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2015-01-02T00:00:00+00:00"><meta property="article:modified_time" content="2015-01-02T00:00:00+00:00"><meta property="article:tag" content="Php"><meta property="article:tag" content="Functional-Programming"><meta property="article:tag" content="Data-Structures"><meta name=twitter:card content="summary"><meta name=twitter:title content="Cons Lists and Folds in PHP"><meta name=twitter:description content="Cons cells are used to (cons)truct a data object which represents an ordered pair. The elements in this pair can be identified as ‘car’ and ‘cdr’ accordingly. Using this simple representation, we are able not only to hold ordered pairs but also to create more complex data structures, such as a List."><meta name=twitter:site content="@edd_mann"><link rel=stylesheet href=/css/style.min.38ebe85b7a95b0ed5f3ec14e02666c3ac5666f40e38576814a1bdbdf87e4f477.css integrity="sha256-OOvoW3qVsO1fPsFOAmZsOsVmb0DjhXaBShvb34fk9Hc="><link rel=preload as=image href=/assets/x.svg><link rel=preload as=image href=/assets/github.svg><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://eddmann.com/posts/cons-lists-and-folds-in-php/><script>(function(){document.documentElement.setAttribute("data-theme",localStorage.getItem("theme")||window.matchMedia("(prefers-color-scheme: dark)").matches&&"dark"||"light")})()</script><script src=/script.min.1052707861642a4eb63c758a2c16cbf5deb3b3ea2582f09f743a7d4c55fb9828.js integrity="sha256-EFJweGFkKk62PHWKLBbL9d6zs+olgvCfdDp9TFX7mCg=" defer></script></head><body><header class="site-header wrapper"><a href=https://eddmann.com/><h3 class=site-header__title>Edd Mann
<span style=--url:url(/assets/code.svg)>Developer</span></h3></a><button class=site-header__mobile-navigation-button type=button title="Toggle mobile site navigation" aria-label="Toggle mobile site navigation" aria-expanded=false aria-controls=site-navigation></button><div class=site-header__navigation id=site-navigation><nav aria-label="Primary navigation"><ul class=site-header__primary-navigation><li><a href=/archive>Archive</a></li><li><a href=/projects>Projects</a></li><li><a href=/about>About</a></li></ul></nav><nav aria-label="Social links"><ul class=site-header__social-navigation><li><a class=social-icon style=--url:url(/assets/x.svg) href=https://x.com/edd_mann rel="external noopener" target=_blank>Twitter (X)</a></li><li><a class=social-icon style=--url:url(/assets/github.svg) href=https://github.com/eddmann rel="external noopener" target=_blank>GitHub</a></li></ul></nav></div></header><main class=wrapper><article><header class=page-title><h1 class=transition-between-pages style=--id:cons-lists-and-folds-in-php>Cons Lists and Folds in PHP</h1><time datetime=2015-01-02T00:00:00Z class=post__time>Jan 2, 2015</time></header><main class=prose><p>Cons cells are used to (cons)truct a data object which represents an ordered pair.
The elements in this pair can be identified as &lsquo;car&rsquo; and &lsquo;cdr&rsquo; accordingly.
Using this simple representation, we are able not only to hold ordered pairs but also to create more complex data structures, such as a List.</p><p>Below is an example interface that we will be using to implement the two different kinds of Cons cell required to create this List data structure.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>ConsCell</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>head</span>();
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>tail</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>foldr</span>(<span style=color:#a6e22e>Closure</span> $fn, $acc);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>foldl</span>(<span style=color:#a6e22e>Closure</span> $fn, $acc);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>Closure</span> $fn);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>filter</span>(<span style=color:#a6e22e>Closure</span> $fn);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>As you can see, we have also included a couple of other useful methods that will be used to traverse the list.
A defined closure is provided which will be invoked on each element, returning either a predicate or a new value.</p><h2 id=nil>Nil</h2><p>The first type of cell used to represent this structure is the empty list.
Commonly called Nil, it is treated as a <a href=http://en.wikipedia.org/wiki/Sentinel_node rel="external noopener" target=_blank>sentinel</a> node, distinguishing the end of the list and used as a recursive base case.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Nil</span> <span style=color:#66d9ef>implements</span> <span style=color:#a6e22e>ConsCell</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>head</span>() { <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>RuntimeException</span>(<span style=color:#e6db74>&#39;No head present&#39;</span>); }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>tail</span>() { <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>RuntimeException</span>(<span style=color:#e6db74>&#39;No tail present&#39;</span>); }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>foldr</span>(<span style=color:#a6e22e>Closure</span> $fn, $acc) { <span style=color:#66d9ef>return</span> $acc; }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>foldl</span>(<span style=color:#a6e22e>Closure</span> $fn, $acc) { <span style=color:#66d9ef>return</span> $acc; }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>Closure</span> $fn) { <span style=color:#66d9ef>return</span> $this; }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>filter</span>(<span style=color:#a6e22e>Closure</span> $fn) { <span style=color:#66d9ef>return</span> $this; }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=cons>Cons</h2><p>The other type of cell required stores the first element in its left-hand value (&lsquo;car&rsquo;) and the next Cons cell in its right-hand value (&lsquo;cdr&rsquo;).
In this implementation, we use alternative, more meaningful names for the &lsquo;car&rsquo; and &lsquo;cdr&rsquo; values by following the head and tail naming convention instead.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Cons</span> <span style=color:#66d9ef>implements</span> <span style=color:#a6e22e>ConsCell</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> $head, $tail;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> __construct($head, <span style=color:#a6e22e>ConsCell</span> $tail)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>head</span> <span style=color:#f92672>=</span> $head;
</span></span><span style=display:flex><span>        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>tail</span> <span style=color:#f92672>=</span> $tail;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>head</span>() { <span style=color:#66d9ef>return</span> $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>head</span>; }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>tail</span>() { <span style=color:#66d9ef>return</span> $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>tail</span>; }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>foldr</span>(<span style=color:#a6e22e>Closure</span> $fn, $acc)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> $fn($this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>head</span>(), $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>tail</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>foldr</span>($fn, $acc));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>foldl</span>(<span style=color:#a6e22e>Closure</span> $fn, $acc)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>tail</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>foldl</span>($fn, $fn($this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>head</span>(), $acc));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>Closure</span> $fn)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>foldr</span>(<span style=color:#66d9ef>function</span> ($head, $acc) <span style=color:#66d9ef>use</span> ($fn) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Cons</span>($fn($head), $acc);
</span></span><span style=display:flex><span>        }, <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Nil</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>filter</span>(<span style=color:#a6e22e>Closure</span> $fn)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>foldr</span>(<span style=color:#66d9ef>function</span> ($head, $acc) <span style=color:#66d9ef>use</span> ($fn) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> $fn($head) <span style=color:#f92672>?</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Cons</span>($head, $acc) <span style=color:#f92672>:</span> $acc;
</span></span><span style=display:flex><span>        }, <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Nil</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>from</span>(<span style=color:#66d9ef>array</span> $xs)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> ($x <span style=color:#f92672>=</span> <span style=color:#a6e22e>array_shift</span>($xs)) <span style=color:#f92672>?</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Cons</span>($x, <span style=color:#a6e22e>Cons</span><span style=color:#f92672>::</span><span style=color:#a6e22e>from</span>($xs)) <span style=color:#f92672>:</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Nil</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>As you can see, the Cons implementation does the majority of the work with regard to the methods we use to traverse the list.
After defining how each of the different folds is to be implemented, we are able to use these to create the map and filter methods.
A fold is used to analyse a recursive data structure and to create a returning value from this completed process.
The <code>foldr</code> method is used to perform the more common action of iterating over each element in the list (in order) from left to right.
The <code>foldl</code> method, on the other hand, can be considered the opposite, going from right to left instead.
These methods can typically be achieved using <code>array_reduce</code> in PHP, with <code>array_reverse</code> invoked first in the case of <code>foldl</code>.</p><h2 id=other-use-cases>Other Use-cases</h2><p>We are able to use the <code>foldl</code> method to easily add a <code>reverse</code> method to our List implementation, as shown below.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Nil</span> <span style=color:#66d9ef>implements</span> <span style=color:#a6e22e>ConsCell</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ..
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>reverse</span>() { <span style=color:#66d9ef>return</span> $this; }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Cons</span> <span style=color:#66d9ef>implements</span> <span style=color:#a6e22e>ConsCell</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ..
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>reverse</span>()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>foldl</span>(<span style=color:#66d9ef>function</span> ($head, $acc) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Cons</span>($head, $acc);
</span></span><span style=display:flex><span>        }, <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Nil</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>We can also implement a <code>toArray</code> method which converts the List representation into a PHP array, making it easier to reason about the resulting output.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Nil</span> <span style=color:#66d9ef>implements</span> <span style=color:#a6e22e>ConsCell</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ..
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>toArray</span>() { <span style=color:#66d9ef>return</span> []; }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Cons</span> <span style=color:#66d9ef>implements</span> <span style=color:#a6e22e>ConsCell</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ..
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>toArray</span>()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>array_merge</span>([$this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>head</span>()], $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>tail</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>toArray</span>());
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=examples>Examples</h2><p>Let&rsquo;s first try out a combination of a couple of the List methods, invoked via chaining.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span>$isEven <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span> ($x) { <span style=color:#66d9ef>return</span> $x <span style=color:#f92672>%</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>0</span>; };
</span></span><span style=display:flex><span>$starify <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span> ($x) { <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;*</span><span style=color:#e6db74>$x</span><span style=color:#e6db74>*&#34;</span>; };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Cons</span><span style=color:#f92672>::</span><span style=color:#a6e22e>from</span>(<span style=color:#a6e22e>range</span>(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>10</span>))
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>filter</span>($isEven)
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>map</span>($starify)
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>reverse</span>()
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>toArray</span>(); <span style=color:#75715e>// [&#39;*10*&#39;,&#39;*8*&#39;,&#39;*6*&#39;,&#39;*4*&#39;,&#39;*2*&#39;]
</span></span></span></code></pre></div><p>In the example above, we are creating a Cons list which represents the numbers from 1 to 10.
We then subsequently filter out any elements that are not even, apply some pretty printing to each of the resulting elements and then reverse this output.
Finally, we convert the Cons representation into an array to facilitate easy output.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span>$isFibonacci <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span> ($x) {
</span></span><span style=display:flex><span>    $isWholeNumber <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span> ($y) { <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>abs</span>($y <span style=color:#f92672>-</span> <span style=color:#a6e22e>round</span>($y)) <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0.0001</span>; };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>        $isWholeNumber(<span style=color:#a6e22e>sqrt</span>(<span style=color:#ae81ff>5</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>pow</span>($x, <span style=color:#ae81ff>2</span>) <span style=color:#f92672>+</span> <span style=color:#ae81ff>4</span>)) <span style=color:#f92672>||</span>
</span></span><span style=display:flex><span>        $isWholeNumber(<span style=color:#a6e22e>sqrt</span>(<span style=color:#ae81ff>5</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>pow</span>($x, <span style=color:#ae81ff>2</span>) <span style=color:#f92672>-</span> <span style=color:#ae81ff>4</span>));
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>$count <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span> ($x, $acc) { <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>+</span> $acc; };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Cons</span><span style=color:#f92672>::</span><span style=color:#a6e22e>from</span>(<span style=color:#a6e22e>range</span>(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>100</span>))
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>filter</span>($isFibonacci)
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>foldr</span>($count, <span style=color:#ae81ff>0</span>); <span style=color:#75715e>// 10
</span></span></span></code></pre></div><p>The example above tallies up the total number of Fibonacci numbers between 1 and 100.
Using the &lsquo;filter&rsquo; method with a supplied predicate function and the &lsquo;foldr&rsquo; reduce method, we correctly return the total of 10.</p></main><footer class=post__tags><a href=/archive/tag/php>php</a><a href=/archive/tag/functional-programming>functional-programming</a><a href=/archive/tag/data-structures>data-structures</a></footer></article><div class="related-posts prose"><h3>Related Posts</h3><ul><li><a href=/posts/tuples-in-php/>Tuples in PHP</a></li><li><a href=/posts/the-y-fixed-point-combinator-in-php/>The Y (Fixed-Point) Combinator in PHP</a></li><li><a href=/posts/using-anonymous-functions-lambdas-and-closures-in-php/>Using Anonymous Functions (Lambdas) and Closures in PHP</a></li><li><a href=/posts/using-partial-application-in-php/>Using Partial Application in PHP</a></li><li><a href=/posts/reversing-a-unicode-string-in-php-using-utf-16-be-le/>Reversing a Unicode String in PHP using UTF-16BE/LE</a></li></ul></div><div class=scroll-watcher></div></main><footer class="site-footer wrapper"><div>&copy; 2025, Edd Mann</div><button class=theme-toggle type=button title="Toggle theme" aria-label="Toggle theme"><svg fill="currentcolor" viewBox="0 0 32 32" role="img"><title>Theme toggle icon</title><desc>A circle representing the moon for toggling theme</desc><path d="M16 .5C7.4.5.5 7.4.5 16S7.4 31.5 16 31.5 31.5 24.6 31.5 16 24.6.5 16 .5zm0 28.1V3.4C23 3.4 28.6 9 28.6 16S23 28.6 16 28.6z"/></svg></button></footer></body></html>