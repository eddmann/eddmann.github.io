<!doctype html>
<html lang="en">
    <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Explore the implementation and theory behind the XOR swap method in Java, a unique technique for swapping variable values without a temporary variable, complete with code examples and detailed explanations.">

    <title>
        
            Experimenting with the XOR Swap Method in Java &middot; Edd Mann
        
    </title>

    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,700italic,400italic">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/styles.css">

    <link rel="shortcut icon" href="/favicon.ico">

    <link rel="alternate" href="/rss.xml" title="" type="application/rss+xml">

    

    <script>
        var _gaq=[['_setAccount','UA-32512081-1'],['_setDomainName','eddmann.com'],['_trackPageview']];
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = 'https://ssl.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>
</head>

    <body>
        <div class="container content">
            <header class="masthead">
                <h3 class="masthead-title">
                    <a href="/" title="Home">Edd Mann</a>
                    <small><i class="fa fa-code"></i> Developer</small>
                </h3>
                <nav>
                    <a href="https://twitter.com/edd_mann"><i class="fa fa-twitter"></i></a>
                    <a href="https://github.com/eddmann"><i class="fa fa-github"></i></a>
                    <a href="mailto:the@eddmann.com"><i class="fa fa-envelope"></i></a>
                </nav>
                <div class="cf"></div>
            </header>

            <main>
                <article class="post">
    <h1 class="post-title">Experimenting with the XOR Swap Method in Java</h1>
    <time datetime="2013-12-29T00:00:00+00:00" class="post-date">29 Dec 2013</time>
    <p>The exclusive disjunction (or XOR) swap algorithm is a little trick to swap values of the same data type without the use of a temporary variable.
Typically, low-level data types like integers are used in practice, but in theory any value represented by fixed-length <a href="http://en.wikipedia.org/wiki/Bit_array">bit-strings</a> will work.
Though it is considered bad practice in most use cases, it does help to highlight implementation details which can seem foreign to <a href="http://en.wikipedia.org/wiki/High-level_programming_language">higher-level</a> programmers.
Due to the high levels of abstraction implemented to aid the development of complex systems, we sometimes lose the beauty of working with the underlying bits and bytes.
An example of such an abstraction is the <a href="http://javabook.compuware.com/content/memory/how-garbage-collection-works.aspx">garbage collector</a> found in the JVM, which handles memory management concerns that, in lower-level languages, would require significant attention.</p>



<h2 id="decimal-to-binary-representation">Decimal to Binary Representation</h2>

<p>To display each value’s binary representation in the experiment, we could simply use the <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#toBinaryString(int)">Integer.toBinaryString</a> method.
However, as this is a learning exercise, below are two alternative implementations.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">toBin</span><span class="o">(</span><span class="kt">int</span> <span class="n">decimal</span><span class="o">)</span>
<span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">decimal</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="k">return</span> <span class="s">"0"</span><span class="o">;</span>

    <span class="nc">StringBuilder</span> <span class="n">sb</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>

    <span class="k">while</span> <span class="o">(</span><span class="n">decimal</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">sb</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">decimal</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="o">);</span>
        <span class="n">decimal</span> <span class="o">&gt;&gt;=</span> <span class="mi">1</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="k">return</span> <span class="n">sb</span><span class="o">.</span><span class="na">reverse</span><span class="o">().</span><span class="na">toString</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div>

<p>The first example uses a bitwise AND and shift operation to inspect each bit of the integer value.
This implementation handles the use case of being initially supplied with a decimal value of zero.
The resulting value is built using a StringBuilder and reversed before the string instance is created.
This is required as we wish to represent the least significant digit at the rightmost position.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">toBin</span><span class="o">(</span><span class="kt">int</span> <span class="n">decimal</span><span class="o">)</span>
<span class="o">{</span>
    <span class="k">return</span> <span class="o">(</span><span class="n">decimal</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span>
        <span class="o">?</span> <span class="n">toBin</span><span class="o">(</span><span class="n">decimal</span> <span class="o">/</span> <span class="mi">2</span><span class="o">)</span> <span class="o">+</span> <span class="o">(</span><span class="n">decimal</span> <span class="o">%</span> <span class="mi">2</span><span class="o">)</span>
        <span class="o">:</span> <span class="s">""</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p>The second example uses division and modulus to recursively build up a string representation.</p>

<h2 id="the-algorithm">The Algorithm</h2>

<p>Directing attention back to the algorithm, no stipulations are placed on the value; however, due to <a href="http://en.wikipedia.org/wiki/Aliasing_(computing)">aliasing</a> concerns, the two variables must be stored in different (distinct) memory address spaces.
With this knowledge in hand, we can now produce an example of the algorithm.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">;</span>
<span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="o">,</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">2</span><span class="o">;</span> <span class="c1">// x=01, y=10</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">^</span> <span class="n">y</span><span class="o">;</span>    <span class="c1">// x=11, y=10</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">x</span> <span class="o">^</span> <span class="n">y</span><span class="o">;</span>    <span class="c1">// x=11, y=01</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">^</span> <span class="n">y</span><span class="o">;</span>    <span class="c1">// x=10, y=01</span>
</code></pre></div></div>

<p>After initialising the two integers, we combine (XOR) the two values, storing the resulting value back into the first variable.
As the XOR operation is <a href="http://en.wikipedia.org/wiki/Commutative_property">commutative</a>, we are free to change the operand ordering of any or all three of the statements.
We then move on to XOR the resulting first value and the initial second value, storing the result in the second variable’s location.
Using an XOR in this manner effectively cancels out all the information we have gained from the second variable in the initial operation, leaving us with only the first value.
Finally, we XOR the two values yet again, but this time storing the resulting value back into the first variable, which, due to cancellation, leaves us with only the second value.</p>

<h2 id="resources">Resources</h2>

<ul>
  <li><a href="http://en.wikipedia.org/wiki/XOR_swap_algorithm">XOR swap algorithm</a></li>
  <li><a href="http://en.wikipedia.org/wiki/Bit_array">Bit array</a></li>
  <li><a href="http://javabook.compuware.com/content/memory/how-garbage-collection-works.aspx">Java Memory Management</a></li>
</ul>

</article>

            </main>

            <footer class="footer">
                <img src="https://www.gravatar.com/avatar/c5c2978bb14d16460f73399c394b6acd?s=160">
                <ul>
                    <li>Developer at <a href="http://www.mybuilder.com/">MyBuilder</a></li>
                    <li><a href="http://threedevsandamaybe.com/">Three Devs and a Maybe</a> podcast co-host</li>
                    <li>All ramblings can be found in the <a href="/archive/">Archive</a></li>
                </ul>
                <div class="cf"></div>
            </footer>
        </div>
    </body>
</html>
