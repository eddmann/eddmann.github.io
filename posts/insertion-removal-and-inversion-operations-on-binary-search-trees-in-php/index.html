<!doctype html>
<html lang="en">
    <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Learn how to implement insertion, removal and inversion operations on binary search trees in PHP using both mutable and immutable approaches.">

    <title>
        
            Insertion, Removal and Inversion Operations on Binary (Search) Trees in PHP &middot; Edd Mann
        
    </title>

    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,700italic,400italic">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/styles.css">

    <link rel="shortcut icon" href="/favicon.ico">

    <link rel="alternate" href="/rss.xml" title="" type="application/rss+xml">

    

    <script>
        var _gaq=[['_setAccount','UA-32512081-1'],['_setDomainName','eddmann.com'],['_trackPageview']];
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = 'https://ssl.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>
</head>

    <body>
        <div class="container content">
            <header class="masthead">
                <h3 class="masthead-title">
                    <a href="/" title="Home">Edd Mann</a>
                    <small><i class="fa fa-code"></i> Developer</small>
                </h3>
                <nav>
                    <a href="https://twitter.com/edd_mann"><i class="fa fa-twitter"></i></a>
                    <a href="https://github.com/eddmann"><i class="fa fa-github"></i></a>
                    <a href="mailto:the@eddmann.com"><i class="fa fa-envelope"></i></a>
                </nav>
                <div class="cf"></div>
            </header>

            <main>
                <article class="post">
    <h1 class="post-title">Insertion, Removal and Inversion Operations on Binary (Search) Trees in PHP</h1>
    <time datetime="2015-07-22T00:00:00+00:00" class="post-date">22 Jul 2015</time>
    <p>Recently Max Howell (creator of <a href="http://brew.sh/">Homebrew</a>) posted an interesting <a href="https://twitter.com/mxcl/status/608682016205344768">tweet</a> in regard to Google’s interview process.
In this tweet he mentioned how one of the proposed questions was to white-board a solution to invert a binary tree.
Over the past couple of years I have been interested in exploring fundamental computer science data structures and algorithms.
As a result, I thought it would be interesting to explore this structure and its associated operations in more depth - using immutable and mutable PHP implementations to clearly highlight the benefits garnered from each approach.</p>



<p>Binary trees are a form of tree data structure, comprised of nodes with assigned values and at most two child nodes (left and right).
To expand on this problem I will be documenting the creation of a <a href="https://en.wikipedia.org/wiki/Binary_search_tree">binary search tree</a>, which has the additional invariant that any left child is less than, and any right child is greater than, the current node’s value.
This allows us to perform unambiguous node deletion from the structure.</p>

<h2 id="node-representation">Node Representation</h2>

<p>Throughout all these examples I have leaned towards a simple function, as opposed to a class-based approach, relying on namespaces to infer relation.
The following function can be used to create a simple object representation of a tree node.
Providing a value and optional left and right nodes, it simply returns the aggregate.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="n">Node</span><span class="p">(</span><span class="nv">$value</span><span class="p">,</span> <span class="nv">$left</span> <span class="o">=</span> <span class="kc">null</span><span class="p">,</span> <span class="nv">$right</span> <span class="o">=</span> <span class="kc">null</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">object</span><span class="p">)</span> <span class="nb">compact</span><span class="p">(</span><span class="s1">'value'</span><span class="p">,</span> <span class="s1">'left'</span><span class="p">,</span> <span class="s1">'right'</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="insertion">Insertion</h2>

<p>Now that we are able to represent tree nodes, the next logical step is to provide insertion capabilities.
Accessible from the root tree node (initially NULL), we are able to recursively traverse the structure until we either find a leaf or the node is already present.
To decide which child to traverse down we use the discussed comparator invariant.
Below is a small diagram depicting the insertion of a value within an existing tree.</p>

<p style="text-align:center;">
    <img src="/uploads/binary-search-trees-in-php/insertion.png" style="width:220px;" alt="Binary Search Tree Insertion" />
</p>

<h3 id="mutable">Mutable</h3>

<p>The first implementation provides a mutable means of insertion.
Notice the explicit reassignment of the right and left child node references.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="n">insert</span><span class="p">(</span><span class="nv">$value</span><span class="p">,</span> <span class="nv">$root</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$root</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nf">Node</span><span class="p">(</span><span class="nv">$value</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$value</span> <span class="o">===</span> <span class="nv">$root</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$root</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$value</span> <span class="o">&gt;</span> <span class="nv">$root</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$root</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">=</span> <span class="nf">insert</span><span class="p">(</span><span class="nv">$value</span><span class="p">,</span> <span class="nv">$root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$root</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">=</span> <span class="nf">insert</span><span class="p">(</span><span class="nv">$value</span><span class="p">,</span> <span class="nv">$root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nv">$root</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="immutable">Immutable</h3>

<p>Below is an immutable implementation of the insertion process starting from a rooted tree node.
As opposed to modifying pre-existing state, we instead build up a modified representation, creating new nodes when required.
This allows us to use both the new and old tree representations simultaneously.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="n">insert</span><span class="p">(</span><span class="nv">$value</span><span class="p">,</span> <span class="nv">$root</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$root</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nf">Node</span><span class="p">(</span><span class="nv">$value</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$value</span> <span class="o">===</span> <span class="nv">$root</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$root</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$value</span> <span class="o">&gt;</span> <span class="nv">$root</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nf">Node</span><span class="p">(</span><span class="nv">$root</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">,</span> <span class="nv">$root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">,</span> <span class="nf">insert</span><span class="p">(</span><span class="nv">$value</span><span class="p">,</span> <span class="nv">$root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">));</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nf">Node</span><span class="p">(</span><span class="nv">$root</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">,</span> <span class="nf">insert</span><span class="p">(</span><span class="nv">$value</span><span class="p">,</span> <span class="nv">$root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">),</span> <span class="nv">$root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="removal">Removal</h2>

<p>With the ability to now insert nodes into the tree, we can expand on this by performing the inverse operation, that being removal.
When removing a node from the tree, there are three different use cases that need to be addressed.
The first two are relatively simple cases, met when the node in question has zero or one child.
When no children are present we are able to just remove the reference to the node.
However, in the case of a single child node we can replace the node’s parent reference with its child node.
The third case is a little more tricky, requiring us to rearrange the structure to find a new node to replace this one, maintaining the desired invariant.</p>

<p>There are two common techniques to achieve this, either finding the in-order successor or in-order predecessor and replacing the current node with this result.
In these examples I have opted for the in-order successor, which requires us to find the minimal value of the current node’s right tree.
This operation can be succinctly codified recursively as shown below.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="n">minValue</span><span class="p">(</span><span class="nv">$root</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$root</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$root</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nf">minValue</span><span class="p">(</span><span class="nv">$root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Below is a small diagram depicting the removal of a node which meets the third use case.</p>

<p style="text-align:center;">
    <img src="/uploads/binary-search-trees-in-php/removal.png" style="width:338px" alt="Binary Search Tree Removal" />
</p>

<h3 id="mutable-1">Mutable</h3>

<p>In a similar fashion to how mutable insertion can be carried out, we reassign both the node’s right and left references when required.
We also replace the current node’s value, if the operation falls into the described third use case.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="n">remove</span><span class="p">(</span><span class="nv">$value</span><span class="p">,</span> <span class="nv">$root</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$root</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$root</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$value</span> <span class="o">&gt;</span> <span class="nv">$root</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$root</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">=</span> <span class="nf">remove</span><span class="p">(</span><span class="nv">$value</span><span class="p">,</span> <span class="nv">$root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">);</span>

        <span class="k">return</span> <span class="nv">$root</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$value</span> <span class="o">&lt;</span> <span class="nv">$root</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$root</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">=</span> <span class="nf">remove</span><span class="p">(</span><span class="nv">$value</span><span class="p">,</span> <span class="nv">$root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">);</span>

        <span class="k">return</span> <span class="nv">$root</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$root</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$root</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nv">$value</span> <span class="o">=</span> <span class="nf">minValue</span><span class="p">(</span><span class="nv">$root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">);</span>

    <span class="nv">$root</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">=</span> <span class="nf">remove</span><span class="p">(</span><span class="nv">$value</span><span class="p">,</span> <span class="nv">$root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">);</span>

    <span class="nv">$root</span><span class="o">-&gt;</span><span class="n">value</span> <span class="o">=</span> <span class="nv">$value</span><span class="p">;</span>

    <span class="k">return</span> <span class="nv">$root</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="immutable-1">Immutable</h3>

<p>In the immutable instance we instead return new nodes in place of the reassignment that would have occurred in the mutable version.
This allows us to maintain and access the entire original tree structure whilst reusing unmodified references in the new tree.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="n">remove</span><span class="p">(</span><span class="nv">$value</span><span class="p">,</span> <span class="nv">$root</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$root</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$root</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$value</span> <span class="o">&gt;</span> <span class="nv">$root</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nf">Node</span><span class="p">(</span><span class="nv">$root</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">,</span> <span class="nv">$root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">,</span> <span class="nf">remove</span><span class="p">(</span><span class="nv">$value</span><span class="p">,</span> <span class="nv">$root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">));</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$value</span> <span class="o">&lt;</span> <span class="nv">$root</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nf">Node</span><span class="p">(</span><span class="nv">$root</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">,</span> <span class="nf">remove</span><span class="p">(</span><span class="nv">$value</span><span class="p">,</span> <span class="nv">$root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">),</span> <span class="nv">$root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$root</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$root</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nv">$value</span> <span class="o">=</span> <span class="nf">minValue</span><span class="p">(</span><span class="nv">$root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">);</span>

    <span class="k">return</span> <span class="nf">Node</span><span class="p">(</span><span class="nv">$value</span><span class="p">,</span> <span class="nv">$root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">,</span> <span class="nf">remove</span><span class="p">(</span><span class="nv">$value</span><span class="p">,</span> <span class="nv">$root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="inversion">Inversion</h2>

<p>Now that we have the ability to insert and remove nodes from a binary tree, another operation which can be performed is inversion (as mentioned in the tweet).
I should note that this operation does not typically occur on binary search trees as it violates the additional invariant.</p>

<h3 id="mutable-2">Mutable</h3>

<p>From a mutable perspective we are able to invert the tree in a memory-efficient manner, with only references being altered.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="n">invert</span><span class="p">(</span><span class="nv">$root</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$root</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$root</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nv">$tmp</span> <span class="o">=</span> <span class="nv">$root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">;</span>
    <span class="nv">$root</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">=</span> <span class="nf">invert</span><span class="p">(</span><span class="nv">$root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">);</span>
    <span class="nv">$root</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">=</span> <span class="nf">invert</span><span class="p">(</span><span class="nv">$tmp</span><span class="p">);</span>

    <span class="k">return</span> <span class="nv">$root</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="immutable-2">Immutable</h3>

<p>In the case of immutability, an entirely new tree is required to be built.
In order to maintain the ability to reuse the current tree we are not able to manipulate any of the existing node references.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="n">invert</span><span class="p">(</span><span class="nv">$root</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$root</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$root</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nf">Node</span><span class="p">(</span><span class="nv">$root</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">,</span> <span class="nf">invert</span><span class="p">(</span><span class="nv">$root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">),</span> <span class="nf">invert</span><span class="p">(</span><span class="nv">$root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="example">Example</h2>

<p>Now that we have these operations in place we can use the following function to generate a tree from an array representation.
Notice the use of the mutable insert operation to save on memory costs.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="n">fromArray</span><span class="p">(</span><span class="kt">array</span> <span class="nv">$values</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nv">$tree</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$values</span> <span class="k">as</span> <span class="nv">$value</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$tree</span> <span class="o">=</span> <span class="nf">BinaryTree\Mutable\insert</span><span class="p">(</span><span class="nv">$value</span><span class="p">,</span> <span class="nv">$tree</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nv">$tree</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>We can then visualise the generated tree by using the following render function.
This function displays the tree from left to right, as opposed to the typical top-down approach.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="n">render</span><span class="p">(</span><span class="nv">$root</span><span class="p">,</span> <span class="nv">$depth</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$root</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nb">str_repeat</span><span class="p">(</span><span class="s2">"</span><span class="se">\t</span><span class="s2">"</span><span class="p">,</span> <span class="nv">$depth</span><span class="p">)</span> <span class="mf">.</span> <span class="s2">"~</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span>
        <span class="nf">render</span><span class="p">(</span><span class="nv">$root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">,</span> <span class="nv">$depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="mf">.</span>
        <span class="nb">str_repeat</span><span class="p">(</span><span class="s2">"</span><span class="se">\t</span><span class="s2">"</span><span class="p">,</span> <span class="nv">$depth</span><span class="p">)</span> <span class="mf">.</span> <span class="nv">$root</span><span class="o">-&gt;</span><span class="n">value</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span> <span class="mf">.</span>
        <span class="nf">render</span><span class="p">(</span><span class="nv">$root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">,</span> <span class="nv">$depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Finally, we are able to use all these operations and helper functions in conjunction, for a contrived example.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$a</span> <span class="o">=</span> <span class="nf">BinaryTree\fromArray</span><span class="p">([</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span> <span class="p">]);</span>

<span class="nv">$b</span> <span class="o">=</span> <span class="nf">BinaryTree\Immutable\remove</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nv">$a</span><span class="p">);</span>

<span class="k">echo</span> <span class="nf">BinaryTree\render</span><span class="p">(</span><span class="nv">$a</span><span class="p">);</span>

<span class="cm">/*
                        ~
                4
                        ~
        3
                ~
2
                ~
        1
                ~
*/</span>

<span class="nf">BinaryTree\Mutable\invert</span><span class="p">(</span><span class="nv">$b</span><span class="p">);</span>

<span class="k">echo</span> <span class="nf">BinaryTree\render</span><span class="p">(</span><span class="nv">$b</span><span class="p">);</span>

<span class="cm">/*
                ~
        1
                ~
3
                ~
        4
                ~
*/</span>
</code></pre></div></div>

</article>

            </main>

            <footer class="footer">
                <img src="https://www.gravatar.com/avatar/c5c2978bb14d16460f73399c394b6acd?s=160">
                <ul>
                    <li>Developer at <a href="http://www.mybuilder.com/">MyBuilder</a></li>
                    <li><a href="http://threedevsandamaybe.com/">Three Devs and a Maybe</a> podcast co-host</li>
                    <li>All ramblings can be found in the <a href="/archive/">Archive</a></li>
                </ul>
                <div class="cf"></div>
            </footer>
        </div>
    </body>
</html>
